This is
/home/melpa/melpa/working/python-info-20130916.1420/python.info,
produced by makeinfo version 4.13 from
/home/melpa/melpa/working/python-info/python.texi.

Generated by Sphinx 1.1.3.
INFO-DIR-SECTION Programming
START-INFO-DIR-ENTRY
* Python: (python.info). The Python Programming Language
END-INFO-DIR-ENTRY

     Python 2.7.5, September 16, 2013

     Georg Brandl

     Copyright (C) 1990-2013, Python Software Foundation


File: python.info,  Node: What is Python good for?,  Next: How does the Python version numbering scheme work?,  Prev: Why was Python created in the first place?,  Up: General Information

11.1.1.5 What is Python good for?
.................................

Python is a high-level general-purpose programming language that can be
applied to many different classes of problems.

  The language comes with a large standard library that covers areas
such as string processing (regular expressions, Unicode, calculating
differences between files), Internet protocols (HTTP, FTP, SMTP,
XML-RPC, POP, IMAP, CGI programming), software engineering (unit
testing, logging, profiling, parsing Python code), and operating system
interfaces (system calls, filesystems, TCP/IP sockets).  Look at the
table of contents for *note The Python Standard Library: 4ef. to get an
idea of what's available.  A wide variety of third-party extensions are
also available.  Consult the Python Package Index(1) to find packages
of interest to you.

  ---------- Footnotes ----------

  (1) http://pypi.python.org/pypi


File: python.info,  Node: How does the Python version numbering scheme work?,  Next: How do I obtain a copy of the Python source?,  Prev: What is Python good for?,  Up: General Information

11.1.1.6 How does the Python version numbering scheme work?
...........................................................

Python versions are numbered A.B.C or A.B.  A is the major version
number - it is only incremented for really major changes in the
language.  B is the minor version number, incremented for less
earth-shattering changes.  C is the micro-level - it is incremented for
each bugfix release.  See PEP 6(1) for more information about bugfix
releases.

  Not all releases are bugfix releases.  In the run-up to a new major
release, a series of development releases are made, denoted as alpha,
beta, or release candidate.  Alphas are early releases in which
interfaces aren't yet finalized; it's not unexpected to see an
interface change between two alpha releases.  Betas are more stable,
preserving existing interfaces but possibly adding new modules, and
release candidates are frozen, making no changes except as needed to
fix critical bugs.

  Alpha, beta and release candidate versions have an additional suffix.
The suffix for an alpha version is "aN" for some small number N, the
suffix for a beta version is "bN" for some small number N, and the
suffix for a release candidate version is "cN" for some small number N.
In other words, all versions labeled 2.0aN precede the versions labeled
2.0bN, which precede versions labeled 2.0cN, and _those_ precede 2.0.

  You may also find version numbers with a "+" suffix, e.g. "2.2+".
These are unreleased versions, built directly from the Subversion
trunk.  In practice, after a final minor release is made, the
Subversion trunk is incremented to the next minor version, which
becomes the "a0" version, e.g. "2.4a0".

  See also the documentation for `sys.version', `sys.hexversion', and
`sys.version_info'.

  ---------- Footnotes ----------

  (1) http://www.python.org/dev/peps/pep-0006


File: python.info,  Node: How do I obtain a copy of the Python source?,  Next: How do I get documentation on Python?,  Prev: How does the Python version numbering scheme work?,  Up: General Information

11.1.1.7 How do I obtain a copy of the Python source?
.....................................................

The latest Python source distribution is always available from
python.org, at <http://www.python.org/download/>.  The latest
development sources can be obtained via anonymous Mercurial access at
<http://hg.python.org/cpython>.

  The source distribution is a gzipped tar file containing the complete
C source, Sphinx-formatted documentation, Python library modules,
example programs, and several useful pieces of freely distributable
software.  The source will compile and run out of the box on most UNIX
platforms.

  Consult the Developer FAQ(1) for more information on getting the
source code and compiling it.

  ---------- Footnotes ----------

  (1) http://docs.python.org/devguide/faq


File: python.info,  Node: How do I get documentation on Python?,  Next: I've never programmed before Is there a Python tutorial?,  Prev: How do I obtain a copy of the Python source?,  Up: General Information

11.1.1.8 How do I get documentation on Python?
..............................................

The standard documentation for the current stable version of Python is
available at <http://docs.python.org/>.  PDF, plain text, and
downloadable HTML versions are also available at
<http://docs.python.org/download.html>.

  The documentation is written in reStructuredText and processed by the
Sphinx documentation tool(1).  The reStructuredText source for the
documentation is part of the Python source distribution.

  ---------- Footnotes ----------

  (1) http://sphinx.pocoo.org/


File: python.info,  Node: I've never programmed before Is there a Python tutorial?,  Next: Is there a newsgroup or mailing list devoted to Python?,  Prev: How do I get documentation on Python?,  Up: General Information

11.1.1.9 I've never programmed before. Is there a Python tutorial?
..................................................................

There are numerous tutorials and books available.  The standard
documentation includes *note The Python Tutorial: 4ee.

  Consult the Beginner's Guide(1) to find information for beginning
Python programmers, including lists of tutorials.

  ---------- Footnotes ----------

  (1) http://wiki.python.org/moin/BeginnersGuide


File: python.info,  Node: Is there a newsgroup or mailing list devoted to Python?,  Next: How do I get a beta test version of Python?,  Prev: I've never programmed before Is there a Python tutorial?,  Up: General Information

11.1.1.10 Is there a newsgroup or mailing list devoted to Python?
.................................................................

There is a newsgroup, `comp.lang.python', and a mailing list,
python-list(1).  The newsgroup and mailing list are gatewayed into each
other - if you can read news it's unnecessary to subscribe to the
mailing list.  `comp.lang.python' is high-traffic, receiving hundreds
of postings every day, and Usenet readers are often more able to cope
with this volume.

  Announcements of new software releases and events can be found in
comp.lang.python.announce, a low-traffic moderated list that receives
about five postings per day.  It's available as the python-announce
mailing list(2).

  More info about other mailing lists and newsgroups can be found at
<http://www.python.org/community/lists/>.

  ---------- Footnotes ----------

  (1) http://mail.python.org/mailman/listinfo/python-list

  (2) http://mail.python.org/mailman/listinfo/python-announce-list


File: python.info,  Node: How do I get a beta test version of Python?,  Next: How do I submit bug reports and patches for Python?,  Prev: Is there a newsgroup or mailing list devoted to Python?,  Up: General Information

11.1.1.11 How do I get a beta test version of Python?
.....................................................

Alpha and beta releases are available from
<http://www.python.org/download/>.  All releases are announced on the
comp.lang.python and comp.lang.python.announce newsgroups and on the
Python home page at <http://www.python.org/>; an RSS feed of news is
available.

  You can also access the development version of Python through
Subversion.  See <http://docs.python.org/devguide/faq> for details.


File: python.info,  Node: How do I submit bug reports and patches for Python?,  Next: Are there any published articles about Python that I can reference?,  Prev: How do I get a beta test version of Python?,  Up: General Information

11.1.1.12 How do I submit bug reports and patches for Python?
.............................................................

To report a bug or submit a patch, please use the Roundup installation
at <http://bugs.python.org/>.

  You must have a Roundup account to report bugs; this makes it
possible for us to contact you if we have follow-up questions.  It will
also enable Roundup to send you updates as we act on your bug. If you
had previously used SourceForge to report bugs to Python, you can
obtain your Roundup password through Roundup's password reset
procedure(1).

  For more information on how Python is developed, consult the Python
Developer's Guide(2).

  ---------- Footnotes ----------

  (1) http://bugs.python.org/user?@template=forgotten

  (2) http://docs.python.org/devguide/


File: python.info,  Node: Are there any published articles about Python that I can reference?,  Next: Are there any books on Python?,  Prev: How do I submit bug reports and patches for Python?,  Up: General Information

11.1.1.13 Are there any published articles about Python that I can reference?
.............................................................................

It's probably best to cite your favorite book about Python.

  The very first article about Python was written in 1991 and is now
quite outdated.

     Guido van Rossum and Jelke de Boer, "Interactively Testing Remote
     Servers Using the Python Programming Language", CWI Quarterly,
     Volume 4, Issue 4 (December 1991), Amsterdam, pp 283-303.


File: python.info,  Node: Are there any books on Python?,  Next: Where in the world is www python org located?,  Prev: Are there any published articles about Python that I can reference?,  Up: General Information

11.1.1.14 Are there any books on Python?
........................................

Yes, there are many, and more are being published.  See the python.org
wiki at <http://wiki.python.org/moin/PythonBooks> for a list.

  You can also search online bookstores for "Python" and filter out the
Monty Python references; or perhaps search for "Python" and "language".


File: python.info,  Node: Where in the world is www python org located?,  Next: Why is it called Python?,  Prev: Are there any books on Python?,  Up: General Information

11.1.1.15 Where in the world is www.python.org located?
.......................................................

It's currently in Amsterdam, graciously hosted by XS4ALL(1).  Thanks to
Thomas Wouters for his work in arranging python.org's hosting.

  ---------- Footnotes ----------

  (1) http://www.xs4all.nl


File: python.info,  Node: Why is it called Python?,  Next: Do I have to like "Monty Python's Flying Circus"?,  Prev: Where in the world is www python org located?,  Up: General Information

11.1.1.16 Why is it called Python?
..................................

When he began implementing Python, Guido van Rossum was also reading the
published scripts from "Monty Python's Flying Circus"(1), a BBC comedy
series from the 1970s.  Van Rossum thought he needed a name that was
short, unique, and slightly mysterious, so he decided to call the
language Python.

  ---------- Footnotes ----------

  (1) http://pythonline.com/


File: python.info,  Node: Do I have to like "Monty Python's Flying Circus"?,  Prev: Why is it called Python?,  Up: General Information

11.1.1.17 Do I have to like "Monty Python's Flying Circus"?
...........................................................

No, but it helps.  :)


File: python.info,  Node: Python in the real world,  Next: Upgrading Python,  Prev: General Information,  Up: General Python FAQ

11.1.2 Python in the real world
-------------------------------

* Menu:

* How stable is Python?::
* How many people are using Python?::
* Have any significant projects been done in Python?::
* What new developments are expected for Python in the future?::
* Is it reasonable to propose incompatible changes to Python?::
* Is Python Y2K (Year 2000) Compliant?: Is Python Y2K Year 2000 Compliant?.
* Is Python a good language for beginning programmers?::


File: python.info,  Node: How stable is Python?,  Next: How many people are using Python?,  Up: Python in the real world

11.1.2.1 How stable is Python?
..............................

Very stable.  New, stable releases have been coming out roughly every 6
to 18 months since 1991, and this seems likely to continue.  Currently
there are usually around 18 months between major releases.

  The developers issue "bugfix" releases of older versions, so the
stability of existing releases gradually improves.  Bugfix releases,
indicated by a third component of the version number (e.g. 2.5.3,
2.6.2), are managed for stability; only fixes for known problems are
included in a bugfix release, and it's guaranteed that interfaces will
remain the same throughout a series of bugfix releases.

  The latest stable releases can always be found on the Python download
page(1).  There are two recommended production-ready versions at this
point in time, because at the moment there are two branches of stable
releases: 2.x and 3.x.  Python 3.x may be less useful than 2.x, since
currently there is more third party software available for Python 2
than for Python 3.  Python 2 code will generally not run unchanged in
Python 3.

  ---------- Footnotes ----------

  (1) http://python.org/download/


File: python.info,  Node: How many people are using Python?,  Next: Have any significant projects been done in Python?,  Prev: How stable is Python?,  Up: Python in the real world

11.1.2.2 How many people are using Python?
..........................................

There are probably tens of thousands of users, though it's difficult to
obtain an exact count.

  Python is available for free download, so there are no sales figures,
and it's available from many different sites and packaged with many
Linux distributions, so download statistics don't tell the whole story
either.

  The comp.lang.python newsgroup is very active, but not all Python
users post to the group or even read it.


File: python.info,  Node: Have any significant projects been done in Python?,  Next: What new developments are expected for Python in the future?,  Prev: How many people are using Python?,  Up: Python in the real world

11.1.2.3 Have any significant projects been done in Python?
...........................................................

See <http://python.org/about/success> for a list of projects that use
Python.  Consulting the proceedings for past Python conferences(1) will
reveal contributions from many different companies and organizations.

  High-profile Python projects include the Mailman mailing list
manager(2) and the Zope application server(3).  Several Linux
distributions, most notably Red Hat(4), have written part or all of
their installer and system administration software in Python.
Companies that use Python internally include Google, Yahoo, and
Lucasfilm Ltd.

  ---------- Footnotes ----------

  (1) http://python.org/community/workshops/

  (2) http://www.list.org

  (3) http://www.zope.org

  (4) http://www.redhat.com


File: python.info,  Node: What new developments are expected for Python in the future?,  Next: Is it reasonable to propose incompatible changes to Python?,  Prev: Have any significant projects been done in Python?,  Up: Python in the real world

11.1.2.4 What new developments are expected for Python in the future?
.....................................................................

See <http://www.python.org/dev/peps/> for the Python Enhancement
Proposals (PEPs). PEPs are design documents describing a suggested new
feature for Python, providing a concise technical specification and a
rationale.  Look for a PEP titled "Python X.Y Release Schedule", where
X.Y is a version that hasn't been publicly released yet.

  New development is discussed on the python-dev mailing list(1).

  ---------- Footnotes ----------

  (1) http://mail.python.org/mailman/listinfo/python-dev/


File: python.info,  Node: Is it reasonable to propose incompatible changes to Python?,  Next: Is Python Y2K Year 2000 Compliant?,  Prev: What new developments are expected for Python in the future?,  Up: Python in the real world

11.1.2.5 Is it reasonable to propose incompatible changes to Python?
....................................................................

In general, no.  There are already millions of lines of Python code
around the world, so any change in the language that invalidates more
than a very small fraction of existing programs has to be frowned upon.
Even if you can provide a conversion program, there's still the problem
of updating all documentation; many books have been written about
Python, and we don't want to invalidate them all at a single stroke.

  Providing a gradual upgrade path is necessary if a feature has to be
changed.  PEP 5(1) describes the procedure followed for introducing
backward-incompatible changes while minimizing disruption for users.

  ---------- Footnotes ----------

  (1) http://www.python.org/dev/peps/pep-0005


File: python.info,  Node: Is Python Y2K Year 2000 Compliant?,  Next: Is Python a good language for beginning programmers?,  Prev: Is it reasonable to propose incompatible changes to Python?,  Up: Python in the real world

11.1.2.6 Is Python Y2K (Year 2000) Compliant?
.............................................

As of August, 2003 no major problems have been reported and Y2K
compliance seems to be a non-issue.

  Python does very few date calculations and for those it does perform
relies on the C library functions.  Python generally represents times
either as seconds since 1970 or as a `(year, month, day, ...)' tuple
where the year is expressed with four digits, which makes Y2K bugs
unlikely.  So as long as your C library is okay, Python should be okay.
Of course, it's possible that a particular application written in
Python makes assumptions about 2-digit years.

  Because Python is available free of charge, there are no absolute
guarantees.  If there _are_ unforeseen problems, liability is the
user's problem rather than the developers', and there is nobody you can
sue for damages.  The Python copyright notice contains the following
disclaimer:

     4. PSF is making Python 2.3 available to Licensee on an "AS IS"
     basis.  PSF MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR
     IMPLIED.  BY WAY OF EXAMPLE, BUT NOT LIMITATION, PSF MAKES NO AND
     DISCLAIMS ANY REPRESENTATION OR WARRANTY OF MERCHANTABILITY OR
     FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF PYTHON 2.3
     WILL NOT INFRINGE ANY THIRD PARTY RIGHTS.

     5. PSF SHALL NOT BE LIABLE TO LICENSEE OR ANY OTHER USERS OF PYTHON
     2.3 FOR ANY INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES OR LOSS
     AS A RESULT OF MODIFYING, DISTRIBUTING, OR OTHERWISE USING PYTHON
     2.3, OR ANY DERIVATIVE THEREOF, EVEN IF ADVISED OF THE POSSIBILITY
     THEREOF.

  The good news is that _if_ you encounter a problem, you have full
source available to track it down and fix it.  This is one advantage of
an open source programming environment.


File: python.info,  Node: Is Python a good language for beginning programmers?,  Prev: Is Python Y2K Year 2000 Compliant?,  Up: Python in the real world

11.1.2.7 Is Python a good language for beginning programmers?
.............................................................

Yes.

  It is still common to start students with a procedural and statically
typed language such as Pascal, C, or a subset of C++ or Java.  Students
may be better served by learning Python as their first language.
Python has a very simple and consistent syntax and a large standard
library and, most importantly, using Python in a beginning programming
course lets students concentrate on important programming skills such
as problem decomposition and data type design.  With Python, students
can be quickly introduced to basic concepts such as loops and
procedures.  They can probably even work with user-defined objects in
their very first course.

  For a student who has never programmed before, using a statically
typed language seems unnatural.  It presents additional complexity that
the student must master and slows the pace of the course.  The students
are trying to learn to think like a computer, decompose problems,
design consistent interfaces, and encapsulate data.  While learning to
use a statically typed language is important in the long term, it is
not necessarily the best topic to address in the students' first
programming course.

  Many other aspects of Python make it a good first language.  Like
Java, Python has a large standard library so that students can be
assigned programming projects very early in the course that _do_
something.  Assignments aren't restricted to the standard four-function
calculator and check balancing programs.  By using the standard
library, students can gain the satisfaction of working on realistic
applications as they learn the fundamentals of programming.  Using the
standard library also teaches students about code reuse.  Third-party
modules such as PyGame are also helpful in extending the students'
reach.

  Python's interactive interpreter enables students to test language
features while they're programming.  They can keep a window with the
interpreter running while they enter their program's source in another
window.  If they can't remember the methods for a list, they can do
something like this:

    >>> L = []
    >>> dir(L)
    ['append', 'count', 'extend', 'index', 'insert', 'pop', 'remove',
    'reverse', 'sort']
    >>> help(L.append)
    Help on built-in function append:

    append(...)
        L.append(object) -- append object to end
    >>> L.append(1)
    >>> L
    [1]

With the interpreter, documentation is never far from the student as
he's programming.

  There are also good IDEs for Python.  IDLE is a cross-platform IDE
for Python that is written in Python using Tkinter.  PythonWin is a
Windows-specific IDE.  Emacs users will be happy to know that there is
a very good Python mode for Emacs.  All of these programming
environments provide syntax highlighting, auto-indenting, and access to
the interactive interpreter while coding.  Consult
<http://www.python.org/editors/> for a full list of Python editing
environments.

  If you want to discuss Python's use in education, you may be
interested in joining the edu-sig mailing list(1).

  ---------- Footnotes ----------

  (1) http://python.org/community/sigs/current/edu-sig


File: python.info,  Node: Upgrading Python,  Prev: Python in the real world,  Up: General Python FAQ

11.1.3 Upgrading Python
-----------------------

* Menu:

* What is this bsddb185 module my application keeps complaining about?::


File: python.info,  Node: What is this bsddb185 module my application keeps complaining about?,  Up: Upgrading Python

11.1.3.1 What is this bsddb185 module my application keeps complaining about?
.............................................................................

Starting with Python2.3, the distribution includes the `PyBSDDB package
<http://pybsddb.sf.net/>' as a replacement for the old bsddb module.  It
includes functions which provide backward compatibility at the API
level, but requires a newer version of the underlying Berkeley DB(1)
library.  Files created with the older bsddb module can't be opened
directly using the new module.

  Using your old version of Python and a pair of scripts which are part
of Python 2.3 (db2pickle.py and pickle2db.py, in the Tools/scripts
directory) you can convert your old database files to the new format.
Using your old Python version, run the db2pickle.py script to convert
it to a pickle, e.g.:

    python2.2 <pathto>/db2pickley.py database.db database.pck

Rename your database file:

    mv database.db olddatabase.db

Now convert the pickle file to a new format database:

    python <pathto>/pickle2db.py database.db database.pck

The precise commands you use will vary depending on the particulars of
your installation.  For full details about operation of these two
scripts check the doc string at the start of each one.

  ---------- Footnotes ----------

  (1) http://www.sleepycat.com


File: python.info,  Node: Programming FAQ,  Next: Design and History FAQ,  Prev: General Python FAQ,  Up: Python Frequently Asked Questions

11.2 Programming FAQ
====================

* Menu:

* General Questions::
* Core Language::
* Numbers and strings::
* Sequences (Tuples/Lists): Sequences Tuples/Lists.
* Dictionaries: Dictionaries<2>.
* Objects::
* Modules: Modules<3>.

General Questions

* Is there a source code level debugger with breakpoints, single-stepping, etc.?: Is there a source code level debugger with breakpoints single-stepping etc ?.
* Is there a tool to help find bugs or perform static analysis?::
* How can I create a stand-alone binary from a Python script?::
* Are there coding standards or a style guide for Python programs?::
* My program is too slow. How do I speed it up?: My program is too slow How do I speed it up?.

Core Language

* Why am I getting an UnboundLocalError when the variable has a value?::
* What are the rules for local and global variables in Python?::
* Why do lambdas defined in a loop with different values all return the same result?::
* How do I share global variables across modules?::
* What are the "best practices" for using import in a module?::
* How can I pass optional or keyword parameters from one function to another?::
* What is the difference between arguments and parameters?::
* How do I write a function with output parameters (call by reference)?: How do I write a function with output parameters call by reference ?.
* How do you make a higher order function in Python?::
* How do I copy an object in Python?::
* How can I find the methods or attributes of an object?::
* How can my code discover the name of an object?::
* What's up with the comma operator's precedence?::
* Is there an equivalent of C's "?;" ternary operator?: Is there an equivalent of C's "? " ternary operator?.
* Is it possible to write obfuscated one-liners in Python?::

Numbers and strings

* How do I specify hexadecimal and octal integers?::
* Why does -22 // 10 return -3?::
* How do I convert a string to a number?::
* How do I convert a number to a string?::
* How do I modify a string in place?::
* How do I use strings to call functions/methods?::
* Is there an equivalent to Perl's chomp() for removing trailing newlines from strings?: Is there an equivalent to Perl's chomp for removing trailing newlines from strings?.
* Is there a scanf() or sscanf() equivalent?: Is there a scanf or sscanf equivalent?.
* What does 'UnicodeError; ASCII [decoding,encoding] error; ordinal not in range(128)' mean?: What does 'UnicodeError ASCII [decoding encoding] error ordinal not in range 128 ' mean?.

Sequences (Tuples/Lists)

* How do I convert between tuples and lists?::
* What's a negative index?::
* How do I iterate over a sequence in reverse order?::
* How do you remove duplicates from a list?::
* How do you make an array in Python?::
* How do I create a multidimensional list?::
* How do I apply a method to a sequence of objects?::

Dictionaries

* How can I get a dictionary to display its keys in a consistent order?::
* I want to do a complicated sort; can you do a Schwartzian Transform in Python?: I want to do a complicated sort can you do a Schwartzian Transform in Python?.
* How can I sort one list by values from another list?::

Objects

* What is a class?::
* What is a method?::
* What is self?::
* How do I check if an object is an instance of a given class or of a subclass of it?::
* What is delegation?::
* How do I call a method defined in a base class from a derived class that overrides it?::
* How can I organize my code to make it easier to change the base class?::
* How do I create static class data and static class methods?::
* How can I overload constructors (or methods) in Python?: How can I overload constructors or methods in Python?.
* I try to use __spam and I get an error about _SomeClassName__spam.: I try to use __spam and I get an error about _SomeClassName__spam.
* My class defines __del__ but it is not called when I delete the object.: My class defines __del__ but it is not called when I delete the object.
* How do I get a list of all instances of a given class?::

Modules

* How do I create a .pyc file?: How do I create a pyc file?.
* How do I find the current module name?::
* How can I have modules that mutually import each other?::
* __import__('x.y.z') returns <module 'x'>; how do I get z?: __import__ 'x y z' returns <module 'x'>; how do I get z?.
* When I edit an imported module and reimport it, the changes don't show up. Why does this happen?: When I edit an imported module and reimport it the changes don't show up Why does this happen?.


File: python.info,  Node: General Questions,  Next: Core Language,  Up: Programming FAQ

11.2.1 General Questions
------------------------

* Menu:

* Is there a source code level debugger with breakpoints, single-stepping, etc.?: Is there a source code level debugger with breakpoints single-stepping etc ?.
* Is there a tool to help find bugs or perform static analysis?::
* How can I create a stand-alone binary from a Python script?::
* Are there coding standards or a style guide for Python programs?::
* My program is too slow. How do I speed it up?: My program is too slow How do I speed it up?.


File: python.info,  Node: Is there a source code level debugger with breakpoints single-stepping etc ?,  Next: Is there a tool to help find bugs or perform static analysis?,  Up: General Questions

11.2.1.1 Is there a source code level debugger with breakpoints, single-stepping, etc.?
.......................................................................................

Yes.

  The pdb module is a simple but adequate console-mode debugger for
Python. It is part of the standard Python library, and is *note
documented in the Library Reference Manual: 12c. You can also write
your own debugger by using the code for pdb as an example.

  The IDLE interactive development environment, which is part of the
standard Python distribution (normally available as
Tools/scripts/idle), includes a graphical debugger.  There is
documentation for the IDLE debugger at
<http://www.python.org/idle/doc/idle2.html#Debugger>.

  PythonWin is a Python IDE that includes a GUI debugger based on pdb.
The Pythonwin debugger colors breakpoints and has quite a few cool
features such as debugging non-Pythonwin programs.  Pythonwin is
available as part of the Python for Windows Extensions(1) project and
as a part of the ActivePython distribution (see
<http://www.activestate.com/Products/ActivePython/index.html>).

  Boa Constructor(2) is an IDE and GUI builder that uses wxWidgets.  It
offers visual frame creation and manipulation, an object inspector,
many views on the source like object browsers, inheritance hierarchies,
doc string generated html documentation, an advanced debugger,
integrated help, and Zope support.

  Eric(3) is an IDE built on PyQt and the Scintilla editing component.

  Pydb is a version of the standard Python debugger pdb, modified for
use with DDD (Data Display Debugger), a popular graphical debugger
front end.  Pydb can be found at <http://bashdb.sourceforge.net/pydb/>
and DDD can be found at <http://www.gnu.org/software/ddd>.

  There are a number of commercial Python IDEs that include graphical
debuggers.  They include:

   * Wing IDE (<http://wingware.com/>)

   * Komodo IDE (<http://www.activestate.com/Products/Komodo>)

  ---------- Footnotes ----------

  (1) http://sourceforge.net/projects/pywin32/

  (2) http://boa-constructor.sourceforge.net/

  (3) http://www.die-offenbachs.de/eric/index.html


File: python.info,  Node: Is there a tool to help find bugs or perform static analysis?,  Next: How can I create a stand-alone binary from a Python script?,  Prev: Is there a source code level debugger with breakpoints single-stepping etc ?,  Up: General Questions

11.2.1.2 Is there a tool to help find bugs or perform static analysis?
......................................................................

Yes.

  PyChecker is a static analysis tool that finds bugs in Python source
code and warns about code complexity and style.  You can get PyChecker
from <http://pychecker.sf.net>.

  Pylint(1) is another tool that checks if a module satisfies a coding
standard, and also makes it possible to write plug-ins to add a custom
feature.  In addition to the bug checking that PyChecker performs,
Pylint offers some additional features such as checking line length,
whether variable names are well-formed according to your coding
standard, whether declared interfaces are fully implemented, and more.
<http://www.logilab.org/card/pylint_manual> provides a full list of
Pylint's features.

  ---------- Footnotes ----------

  (1) http://www.logilab.org/projects/pylint


File: python.info,  Node: How can I create a stand-alone binary from a Python script?,  Next: Are there coding standards or a style guide for Python programs?,  Prev: Is there a tool to help find bugs or perform static analysis?,  Up: General Questions

11.2.1.3 How can I create a stand-alone binary from a Python script?
....................................................................

You don't need the ability to compile Python to C code if all you want
is a stand-alone program that users can download and run without having
to install the Python distribution first.  There are a number of tools
that determine the set of modules required by a program and bind these
modules together with a Python binary to produce a single executable.

  One is to use the freeze tool, which is included in the Python source
tree as `Tools/freeze'. It converts Python byte code to C arrays; a C
compiler you can embed all your modules into a new program, which is
then linked with the standard Python modules.

  It works by scanning your source recursively for import statements
(in both forms) and looking for the modules in the standard Python path
as well as in the source directory (for built-in modules).  It then
turns the bytecode for modules written in Python into C code (array
initializers that can be turned into code objects using the marshal
module) and creates a custom-made config file that only contains those
built-in modules which are actually used in the program.  It then
compiles the generated C code and links it with the rest of the Python
interpreter to form a self-contained binary which acts exactly like
your script.

  Obviously, freeze requires a C compiler.  There are several other
utilities which don't. One is Thomas Heller's py2exe (Windows only) at

     <http://www.py2exe.org/>

  Another is Christian Tismer's SQFREEZE(1) which appends the byte code
to a specially-prepared Python interpreter that can find the byte code
in the executable.

  Other tools include Fredrik Lundh's Squeeze(2) and Anthony Tuininga's
cx_Freeze(3).

  ---------- Footnotes ----------

  (1) http://starship.python.net/crew/pirx

  (2) http://www.pythonware.com/products/python/squeeze

  (3) http://starship.python.net/crew/atuining/cx_Freeze/index.html


File: python.info,  Node: Are there coding standards or a style guide for Python programs?,  Next: My program is too slow How do I speed it up?,  Prev: How can I create a stand-alone binary from a Python script?,  Up: General Questions

11.2.1.4 Are there coding standards or a style guide for Python programs?
.........................................................................

Yes.  The coding style required for standard library modules is
documented as PEP 8(1).

  ---------- Footnotes ----------

  (1) http://www.python.org/dev/peps/pep-0008


File: python.info,  Node: My program is too slow How do I speed it up?,  Prev: Are there coding standards or a style guide for Python programs?,  Up: General Questions

11.2.1.5 My program is too slow. How do I speed it up?
......................................................

That's a tough one, in general.  There are many tricks to speed up
Python code; consider rewriting parts in C as a last resort.

  In some cases it's possible to automatically translate Python to C or
x86 assembly language, meaning that you don't have to modify your code
to gain increased speed.

  Pyrex(1) can compile a slightly modified version of Python code into
a C extension, and can be used on many different platforms.

  Psyco(2) is a just-in-time compiler that translates Python code into
x86 assembly language.  If you can use it, Psyco can provide dramatic
speedups for critical functions.

  The rest of this answer will discuss various tricks for squeezing a
bit more speed out of Python code.  _Never_ apply any optimization
tricks unless you know you need them, after profiling has indicated
that a particular function is the heavily executed hot spot in the
code.  Optimizations almost always make the code less clear, and you
shouldn't pay the costs of reduced clarity (increased development time,
greater likelihood of bugs) unless the resulting performance benefit is
worth it.

  There is a page on the wiki devoted to performance tips(3).

  Guido van Rossum has written up an anecdote related to optimization at
<http://www.python.org/doc/essays/list2str.html>.

  One thing to notice is that function and (especially) method calls
are rather expensive; if you have designed a purely OO interface with
lots of tiny functions that don't do much more than get or set an
instance variable or call another method, you might consider using a
more direct way such as directly accessing instance variables.  Also
see the standard module *note profile: 139. which makes it possible to
find out where your program is spending most of its time (if you have
some patience - the profiling itself can slow your program down by an
order of magnitude).

  Remember that many standard optimization heuristics you may know from
other programming experience may well apply to Python.  For example it
may be faster to send output to output devices using larger writes
rather than smaller ones in order to reduce the overhead of kernel
system calls.  Thus CGI scripts that write all output in "one shot" may
be faster than those that write lots of small pieces of output.

  Also, be sure to use Python's core features where appropriate.  For
example, slicing allows programs to chop up lists and other sequence
objects in a single tick of the interpreter's mainloop using highly
optimized C implementations.  Thus to get the same effect as:

    L2 = []
    for i in range(3):
        L2.append(L1[i])

it is much shorter and far faster to use

    L2 = list(L1[:3])  # "list" is redundant if L1 is a list.

Note that the functionally-oriented built-in functions such as *note
map(): 2fd, *note zip(): 3fe, and friends can be a convenient
accelerator for loops that perform a single task.  For example to pair
the elements of two lists together:

    >>> zip([1, 2, 3], [4, 5, 6])
    [(1, 4), (2, 5), (3, 6)]

or to compute a number of sines:

    >>> map(math.sin, (1, 2, 3, 4))
    [0.841470984808, 0.909297426826, 0.14112000806, -0.756802495308]

The operation completes very quickly in such cases.

  Other examples include the `join()' and `split()' *note methods of
string objects: 519.  For example if s1..s7 are large (10K+) strings
then `"".join([s1,s2,s3,s4,s5,s6,s7])' may be far faster than the more
obvious `s1+s2+s3+s4+s5+s6+s7', since the "summation" will compute many
subexpressions, whereas `join()' does all the copying in one pass.  For
manipulating strings, use the `replace()' and the `format()' *note
methods on string objects: 519.  Use regular expressions only when
you're not dealing with constant string patterns.  You may still use
*note the old % operations: 51b. `string % tuple' and `string %
dictionary'.

  Be sure to use the `list.sort()' built-in method to do sorting, and
see the sorting mini-HOWTO(4) for examples of moderately advanced
usage.  `list.sort()' beats other techniques for sorting in all but the
most extreme circumstances.

  Another common trick is to "push loops into functions or methods."
For example suppose you have a program that runs slowly and you use the
profiler to determine that a Python function `ff()' is being called
lots of times.  If you notice that `ff()':

    def ff(x):
        ... # do something with x computing result...
        return result

tends to be called in loops like:

    list = map(ff, oldlist)

or:

    for x in sequence:
        value = ff(x)
        ... # do something with value...

then you can often eliminate function call overhead by rewriting `ff()'
to:

    def ffseq(seq):
        resultseq = []
        for x in seq:
            ... # do something with x computing result...
            resultseq.append(result)
        return resultseq

and rewrite the two examples to `list = ffseq(oldlist)' and to:

    for value in ffseq(sequence):
        ... # do something with value...

Single calls to `ff(x)' translate to `ffseq([x])[0]' with little
penalty.  Of course this technique is not always appropriate and there
are other variants which you can figure out.

  You can gain some performance by explicitly storing the results of a
function or method lookup into a local variable.  A loop like:

    for key in token:
        dict[key] = dict.get(key, 0) + 1

resolves `dict.get' every iteration.  If the method isn't going to
change, a slightly faster implementation is:

    dict_get = dict.get  # look up the method once
    for key in token:
        dict[key] = dict_get(key, 0) + 1

Default arguments can be used to determine values once, at compile time
instead of at run time.  This can only be done for functions or objects
which will not be changed during program execution, such as replacing

    def degree_sin(deg):
        return math.sin(deg * math.pi / 180.0)

with

    def degree_sin(deg, factor=math.pi/180.0, sin=math.sin):
        return sin(deg * factor)

Because this trick uses default arguments for terms which should not be
changed, it should only be used when you are not concerned with
presenting a possibly confusing API to your users.

  ---------- Footnotes ----------

  (1) http://www.cosc.canterbury.ac.nz/~greg/python/Pyrex/

  (2) http://psyco.sourceforge.net

  (3) http://wiki.python.org/moin/PythonSpeed/PerformanceTips

  (4) http://wiki.python.org/moin/HowTo/Sorting


File: python.info,  Node: Core Language,  Next: Numbers and strings,  Prev: General Questions,  Up: Programming FAQ

11.2.2 Core Language
--------------------

* Menu:

* Why am I getting an UnboundLocalError when the variable has a value?::
* What are the rules for local and global variables in Python?::
* Why do lambdas defined in a loop with different values all return the same result?::
* How do I share global variables across modules?::
* What are the "best practices" for using import in a module?::
* How can I pass optional or keyword parameters from one function to another?::
* What is the difference between arguments and parameters?::
* How do I write a function with output parameters (call by reference)?: How do I write a function with output parameters call by reference ?.
* How do you make a higher order function in Python?::
* How do I copy an object in Python?::
* How can I find the methods or attributes of an object?::
* How can my code discover the name of an object?::
* What's up with the comma operator's precedence?::
* Is there an equivalent of C's "?;" ternary operator?: Is there an equivalent of C's "? " ternary operator?.
* Is it possible to write obfuscated one-liners in Python?::


File: python.info,  Node: Why am I getting an UnboundLocalError when the variable has a value?,  Next: What are the rules for local and global variables in Python?,  Up: Core Language

11.2.2.1 Why am I getting an UnboundLocalError when the variable has a value?
.............................................................................

It can be a surprise to get the UnboundLocalError in previously working
code when it is modified by adding an assignment statement somewhere in
the body of a function.

  This code:

    >>> x = 10
    >>> def bar():
    ...     print x
    >>> bar()
    10

works, but this code:

    >>> x = 10
    >>> def foo():
    ...     print x
    ...     x += 1

results in an UnboundLocalError:

    >>> foo()
    Traceback (most recent call last):
      ...
    UnboundLocalError: local variable 'x' referenced before assignment

This is because when you make an assignment to a variable in a scope,
that variable becomes local to that scope and shadows any similarly
named variable in the outer scope.  Since the last statement in foo
assigns a new value to `x', the compiler recognizes it as a local
variable.  Consequently when the earlier `print x' attempts to print
the uninitialized local variable and an error results.

  In the example above you can access the outer scope variable by
declaring it global:

    >>> x = 10
    >>> def foobar():
    ...     global x
    ...     print x
    ...     x += 1
    >>> foobar()
    10

This explicit declaration is required in order to remind you that
(unlike the superficially analogous situation with class and instance
variables) you are actually modifying the value of the variable in the
outer scope:

    >>> print x
    11



File: python.info,  Node: What are the rules for local and global variables in Python?,  Next: Why do lambdas defined in a loop with different values all return the same result?,  Prev: Why am I getting an UnboundLocalError when the variable has a value?,  Up: Core Language

11.2.2.2 What are the rules for local and global variables in Python?
.....................................................................

In Python, variables that are only referenced inside a function are
implicitly global.  If a variable is assigned a new value anywhere
within the function's body, it's assumed to be a local.  If a variable
is ever assigned a new value inside the function, the variable is
implicitly local, and you need to explicitly declare it as 'global'.

  Though a bit surprising at first, a moment's consideration explains
this.  On one hand, requiring *note global: 53a. for assigned variables
provides a bar against unintended side-effects.  On the other hand, if
`global' was required for all global references, you'd be using
`global' all the time.  You'd have to declare as global every reference
to a built-in function or to a component of an imported module.  This
clutter would defeat the usefulness of the `global' declaration for
identifying side-effects.


File: python.info,  Node: Why do lambdas defined in a loop with different values all return the same result?,  Next: How do I share global variables across modules?,  Prev: What are the rules for local and global variables in Python?,  Up: Core Language

11.2.2.3 Why do lambdas defined in a loop with different values all return the same result?
...........................................................................................

Assume you use a for loop to define a few different lambdas (or even
plain functions), e.g.:

    squares = []
    for x in range(5):
       squares.append(lambda: x**2)

This gives you a list that contains 5 lambdas that calculate `x**2'.
You might expect that, when called, they would return, respectively,
`0', `1', `4', `9', and `16'.  However, when you actually try you will
see that they all return `16':

    >>> squares[2]()
    16
    >>> squares[4]()
    16

This happens because `x' is not local to the lambdas, but is defined in
the outer scope, and it is accessed when the lambda is called -- not
when it is defined.  At the end of the loop, the value of `x' is `4',
so all the functions now return `4**2', i.e. `16'.  You can also verify
this by changing the value of `x' and see how the results of the
lambdas change:

    >>> x = 8
    >>> squares[2]()
    64

In order to avoid this, you need to save the values in variables local
to the lambdas, so that they don't rely on the value of the global `x':

    squares = []
    for x in range(5):
       squares.append(lambda n=x: n**2)

Here, `n=x' creates a new variable `n' local to the lambda and computed
when the lambda is defined so that it has the same value that `x' had at
that point in the loop.  This means that the value of `n' will be `0'
in the first lambda, `1' in the second, `2' in the third, and so on.
Therefore each lambda will now return the correct result:

    >>> squares[2]()
    4
    >>> squares[4]()
    16

Note that this behaviour is not peculiar to lambdas, but applies to
regular functions too.


File: python.info,  Node: How do I share global variables across modules?,  Next: What are the "best practices" for using import in a module?,  Prev: Why do lambdas defined in a loop with different values all return the same result?,  Up: Core Language

11.2.2.4 How do I share global variables across modules?
........................................................

The canonical way to share information across modules within a single
program is to create a special module (often called config or cfg).
Just import the config module in all modules of your application; the
module then becomes available as a global name.  Because there is only
one instance of each module, any changes made to the module object get
reflected everywhere.  For example:

  config.py:

    x = 0   # Default value of the 'x' configuration setting

mod.py:

    import config
    config.x = 1

main.py:

    import config
    import mod
    print config.x

Note that using a module is also the basis for implementing the
Singleton design pattern, for the same reason.


File: python.info,  Node: What are the "best practices" for using import in a module?,  Next: How can I pass optional or keyword parameters from one function to another?,  Prev: How do I share global variables across modules?,  Up: Core Language

11.2.2.5 What are the "best practices" for using import in a module?
....................................................................

In general, don't use `from modulename import *'.  Doing so clutters the
importer's namespace.  Some people avoid this idiom even with the few
modules that were designed to be imported in this manner.  Modules
designed in this manner include *note Tkinter: 17d, and *note
threading: 179.

  Import modules at the top of a file.  Doing so makes it clear what
other modules your code requires and avoids questions of whether the
module name is in scope.  Using one import per line makes it easy to
add and delete module imports, but using multiple imports per line uses
less screen space.

  It's good practice if you import modules in the following order:

  1. standard library modules - e.g. `sys', `os', `getopt', `re'

  2. third-party library modules (anything installed in Python's
     site-packages directory) - e.g. mx.DateTime, ZODB, PIL.Image, etc.

  3. locally-developed modules

  Never use relative package imports.  If you're writing code that's in
the `package.sub.m1' module and want to import `package.sub.m2', do not
just write `import m2', even though it's legal.  Write `from
package.sub import m2' instead.  Relative imports can lead to a module
being initialized twice, leading to confusing bugs.  See PEP 328(1) for
details.

  It is sometimes necessary to move imports to a function or class to
avoid problems with circular imports.  Gordon McMillan says:

     Circular imports are fine where both modules use the "import
     <module>" form of import.  They fail when the 2nd module wants to
     grab a name out of the first ("from module import name") and the
     import is at the top level.  That's because names in the 1st are
     not yet available, because the first module is busy importing the
     2nd.

  In this case, if the second module is only used in one function, then
the import can easily be moved into that function.  By the time the
import is called, the first module will have finished initializing, and
the second module can do its import.

  It may also be necessary to move imports out of the top level of code
if some of the modules are platform-specific.  In that case, it may not
even be possible to import all of the modules at the top of the file.
In this case, importing the correct modules in the corresponding
platform-specific code is a good option.

  Only move imports into a local scope, such as inside a function
definition, if it's necessary to solve a problem such as avoiding a
circular import or are trying to reduce the initialization time of a
module.  This technique is especially helpful if many of the imports
are unnecessary depending on how the program executes.  You may also
want to move imports into a function if the modules are only ever used
in that function.  Note that loading a module the first time may be
expensive because of the one time initialization of the module, but
loading a module multiple times is virtually free, costing only a
couple of dictionary lookups.  Even if the module name has gone out of
scope, the module is probably available in *note sys.modules: 80f.

  If only instances of a specific class use a module, then it is
reasonable to import the module in the class's `__init__' method and
then assign the module to an instance variable so that the module is
always available (via that instance variable) during the life of the
object.  Note that to delay an import until the class is instantiated,
the import must be inside a method.  Putting the import inside the
class but outside of any method still causes the import to occur when
the module is initialized.

  ---------- Footnotes ----------

  (1) http://www.python.org/dev/peps/pep-0328


File: python.info,  Node: How can I pass optional or keyword parameters from one function to another?,  Next: What is the difference between arguments and parameters?,  Prev: What are the "best practices" for using import in a module?,  Up: Core Language

11.2.2.6 How can I pass optional or keyword parameters from one function to another?
....................................................................................

Collect the arguments using the `*' and `**' specifiers in the
function's parameter list; this gives you the positional arguments as a
tuple and the keyword arguments as a dictionary.  You can then pass
these arguments when calling another function by using `*' and `**':

    def f(x, *args, **kwargs):
        ...
        kwargs['width'] = '14.3c'
        ...
        g(x, *args, **kwargs)

In the unlikely case that you care about Python versions older than
2.0, use *note apply(): 2fc.:

    def f(x, *args, **kwargs):
        ...
        kwargs['width'] = '14.3c'
        ...
        apply(g, (x,)+args, kwargs)



File: python.info,  Node: What is the difference between arguments and parameters?,  Next: How do I write a function with output parameters call by reference ?,  Prev: How can I pass optional or keyword parameters from one function to another?,  Up: Core Language

11.2.2.7 What is the difference between arguments and parameters?
.................................................................

*note Parameters: 7b1. are defined by the names that appear in a
function definition, whereas *note arguments: 7ab. are the values
actually passed to a function when calling it.  Parameters define what
types of arguments a function can accept.  For example, given the
function definition:

    def func(foo, bar=None, **kwargs):
        pass

_foo_, _bar_ and _kwargs_ are parameters of `func'.  However, when
calling `func', for example:

    func(42, bar=314, extra=somevar)

the values `42', `314', and `somevar' are arguments.


File: python.info,  Node: How do I write a function with output parameters call by reference ?,  Next: How do you make a higher order function in Python?,  Prev: What is the difference between arguments and parameters?,  Up: Core Language

11.2.2.8 How do I write a function with output parameters (call by reference)?
..............................................................................

Remember that arguments are passed by assignment in Python.  Since
assignment just creates references to objects, there's no alias between
an argument name in the caller and callee, and so no call-by-reference
per se.  You can achieve the desired effect in a number of ways.

  1. By returning a tuple of the results:

         def func2(a, b):
             a = 'new-value'        # a and b are local names
             b = b + 1              # assigned to new objects
             return a, b            # return new values

         x, y = 'old-value', 99
         x, y = func2(x, y)
         print x, y                 # output: new-value 100

     This is almost always the clearest solution.

  2. By using global variables.  This isn't thread-safe, and is not
     recommended.

  3. By passing a mutable (changeable in-place) object:

         def func1(a):
             a[0] = 'new-value'     # 'a' references a mutable list
             a[1] = a[1] + 1        # changes a shared object

         args = ['old-value', 99]
         func1(args)
         print args[0], args[1]     # output: new-value 100


  4. By passing in a dictionary that gets mutated:

         def func3(args):
             args['a'] = 'new-value'     # args is a mutable dictionary
             args['b'] = args['b'] + 1   # change it in-place

         args = {'a':' old-value', 'b': 99}
         func3(args)
         print args['a'], args['b']


  5. Or bundle up values in a class instance:

         class callByRef:
             def __init__(self, **args):
                 for (key, value) in args.items():
                     setattr(self, key, value)

         def func4(args):
             args.a = 'new-value'        # args is a mutable callByRef
             args.b = args.b + 1         # change object in-place

         args = callByRef(a='old-value', b=99)
         func4(args)
         print args.a, args.b

     There's almost never a good reason to get this complicated.

  Your best choice is to return a tuple containing the multiple results.


File: python.info,  Node: How do you make a higher order function in Python?,  Next: How do I copy an object in Python?,  Prev: How do I write a function with output parameters call by reference ?,  Up: Core Language

11.2.2.9 How do you make a higher order function in Python?
...........................................................

You have two choices: you can use nested scopes or you can use callable
objects.  For example, suppose you wanted to define `linear(a,b)' which
returns a function `f(x)' that computes the value `a*x+b'.  Using
nested scopes:

    def linear(a, b):
        def result(x):
            return a * x + b
        return result

Or using a callable object:

    class linear:

        def __init__(self, a, b):
            self.a, self.b = a, b

        def __call__(self, x):
            return self.a * x + self.b

In both cases,

    taxes = linear(0.3, 2)

gives a callable object where `taxes(10e6) == 0.3 * 10e6 + 2'.

  The callable object approach has the disadvantage that it is a bit
slower and results in slightly longer code.  However, note that a
collection of callables can share their signature via inheritance:

    class exponential(linear):
        # __init__ inherited
        def __call__(self, x):
            return self.a * (x ** self.b)

Object can encapsulate state for several methods:

    class counter:

        value = 0

        def set(self, x):
            self.value = x

        def up(self):
            self.value = self.value + 1

        def down(self):
            self.value = self.value - 1

    count = counter()
    inc, dec, reset = count.up, count.down, count.set

Here `inc()', `dec()' and `reset()' act like functions which share the
same counting variable.


File: python.info,  Node: How do I copy an object in Python?,  Next: How can I find the methods or attributes of an object?,  Prev: How do you make a higher order function in Python?,  Up: Core Language

11.2.2.10 How do I copy an object in Python?
............................................

In general, try *note copy.copy(): c1b. or *note copy.deepcopy(): 20c.
for the general case.  Not all objects can be copied, but most can.

  Some objects can be copied more easily.  Dictionaries have a *note
copy(): 8e4.  method:

    newdict = olddict.copy()

Sequences can be copied by slicing:

    new_l = l[:]



File: python.info,  Node: How can I find the methods or attributes of an object?,  Next: How can my code discover the name of an object?,  Prev: How do I copy an object in Python?,  Up: Core Language

11.2.2.11 How can I find the methods or attributes of an object?
................................................................

For an instance x of a user-defined class, `dir(x)' returns an
alphabetized list of the names containing the instance attributes and
methods and attributes defined by its class.


File: python.info,  Node: How can my code discover the name of an object?,  Next: What's up with the comma operator's precedence?,  Prev: How can I find the methods or attributes of an object?,  Up: Core Language

11.2.2.12 How can my code discover the name of an object?
.........................................................

Generally speaking, it can't, because objects don't really have names.
Essentially, assignment always binds a name to a value; The same is
true of `def' and `class' statements, but in that case the value is a
callable. Consider the following code:

    class A:
        pass

    B = A

    a = B()
    b = a
    print b
    <__main__.A instance at 0x16D07CC>
    print a
    <__main__.A instance at 0x16D07CC>

Arguably the class has a name: even though it is bound to two names and
invoked through the name B the created instance is still reported as an
instance of class A.  However, it is impossible to say whether the
instance's name is a or b, since both names are bound to the same value.

  Generally speaking it should not be necessary for your code to "know
the names" of particular values. Unless you are deliberately writing
introspective programs, this is usually an indication that a change of
approach might be beneficial.

  In comp.lang.python, Fredrik Lundh once gave an excellent analogy in
answer to this question:

     The same way as you get the name of that cat you found on your
     porch: the cat (object) itself cannot tell you its name, and it
     doesn't really care - so the only way to find out what it's called
     is to ask all your neighbours (namespaces) if it's their cat
     (object)...

     ....and don't be surprised if you'll find that it's known by many
     names, or no name at all!


File: python.info,  Node: What's up with the comma operator's precedence?,  Next: Is there an equivalent of C's "? " ternary operator?,  Prev: How can my code discover the name of an object?,  Up: Core Language

11.2.2.13 What's up with the comma operator's precedence?
.........................................................

Comma is not an operator in Python.  Consider this session:

    >>> "a" in "b", "a"
    (False, 'a')

Since the comma is not an operator, but a separator between expressions
the above is evaluated as if you had entered:

    >>> ("a" in "b"), "a"

not:

    >>> "a" in ("b", "a")

The same is true of the various assignment operators (`=', `+=' etc).
They are not truly operators but syntactic delimiters in assignment
statements.


File: python.info,  Node: Is there an equivalent of C's "? " ternary operator?,  Next: Is it possible to write obfuscated one-liners in Python?,  Prev: What's up with the comma operator's precedence?,  Up: Core Language

11.2.2.14 Is there an equivalent of C's "?:" ternary operator?
..............................................................

Yes, this feature was added in Python 2.5. The syntax would be as
follows:

    [on_true] if [expression] else [on_false]

    x, y = 50, 25

    small = x if x < y else y

For versions previous to 2.5 the answer would be 'No'.


File: python.info,  Node: Is it possible to write obfuscated one-liners in Python?,  Prev: Is there an equivalent of C's "? " ternary operator?,  Up: Core Language

11.2.2.15 Is it possible to write obfuscated one-liners in Python?
..................................................................

Yes.  Usually this is done by nesting *note lambda: 3fc. within *note
lambda: 3fc.  See the following three examples, due to Ulf Bartelt:

    # Primes < 1000
    print filter(None,map(lambda y:y*reduce(lambda x,y:x*y!=0,
    map(lambda x,y=y:y%x,range(2,int(pow(y,0.5)+1))),1),range(2,1000)))

    # First 10 Fibonacci numbers
    print map(lambda x,f=lambda x,f:(f(x-1,f)+f(x-2,f)) if x>1 else 1: f(x,f),
    range(10))

    # Mandelbrot set
    print (lambda Ru,Ro,Iu,Io,IM,Sx,Sy:reduce(lambda x,y:x+y,map(lambda y,
    Iu=Iu,Io=Io,Ru=Ru,Ro=Ro,Sy=Sy,L=lambda yc,Iu=Iu,Io=Io,Ru=Ru,Ro=Ro,i=IM,
    Sx=Sx,Sy=Sy:reduce(lambda x,y:x+y,map(lambda x,xc=Ru,yc=yc,Ru=Ru,Ro=Ro,
    i=i,Sx=Sx,F=lambda xc,yc,x,y,k,f=lambda xc,yc,x,y,k,f:(k<=0)or (x*x+y*y
    >=4.0) or 1+f(xc,yc,x*x-y*y+xc,2.0*x*y+yc,k-1,f):f(xc,yc,x,y,k,f):chr(
    64+F(Ru+x*(Ro-Ru)/Sx,yc,0,0,i)),range(Sx))):L(Iu+y*(Io-Iu)/Sy),range(Sy
    ))))(-2.1, 0.7, -1.2, 1.2, 30, 80, 24)
    #    \___ ___/  \___ ___/  |   |   |__ lines on screen
    #        V          V      |   |______ columns on screen
    #        |          |      |__________ maximum of "iterations"
    #        |          |_________________ range on y axis
    #        |____________________________ range on x axis

Don't try this at home, kids!


File: python.info,  Node: Numbers and strings,  Next: Sequences Tuples/Lists,  Prev: Core Language,  Up: Programming FAQ

11.2.3 Numbers and strings
--------------------------

* Menu:

* How do I specify hexadecimal and octal integers?::
* Why does -22 // 10 return -3?::
* How do I convert a string to a number?::
* How do I convert a number to a string?::
* How do I modify a string in place?::
* How do I use strings to call functions/methods?::
* Is there an equivalent to Perl's chomp() for removing trailing newlines from strings?: Is there an equivalent to Perl's chomp for removing trailing newlines from strings?.
* Is there a scanf() or sscanf() equivalent?: Is there a scanf or sscanf equivalent?.
* What does 'UnicodeError; ASCII [decoding,encoding] error; ordinal not in range(128)' mean?: What does 'UnicodeError ASCII [decoding encoding] error ordinal not in range 128 ' mean?.


File: python.info,  Node: How do I specify hexadecimal and octal integers?,  Next: Why does -22 // 10 return -3?,  Up: Numbers and strings

11.2.3.1 How do I specify hexadecimal and octal integers?
.........................................................

To specify an octal digit, precede the octal value with a zero, and
then a lower or uppercase "o".  For example, to set the variable "a" to
the octal value "10" (8 in decimal), type:

    >>> a = 0o10
    >>> a
    8

Hexadecimal is just as easy.  Simply precede the hexadecimal number
with a zero, and then a lower or uppercase "x".  Hexadecimal digits can
be specified in lower or uppercase.  For example, in the Python
interpreter:

    >>> a = 0xa5
    >>> a
    165
    >>> b = 0XB2
    >>> b
    178



File: python.info,  Node: Why does -22 // 10 return -3?,  Next: How do I convert a string to a number?,  Prev: How do I specify hexadecimal and octal integers?,  Up: Numbers and strings

11.2.3.2 Why does -22 // 10 return -3?
......................................

It's primarily driven by the desire that `i % j' have the same sign as
`j'.  If you want that, and also want:

    i == (i // j) * j + (i % j)

then integer division has to return the floor.  C also requires that
identity to hold, and then compilers that truncate `i // j' need to
make `i % j' have the same sign as `i'.

  There are few real use cases for `i % j' when `j' is negative.  When
`j' is positive, there are many, and in virtually all of them it's more
useful for `i % j' to be `>= 0'.  If the clock says 10 now, what did it
say 200 hours ago?  `-190 % 12 == 2' is useful; `-190 % 12 == -10' is a
bug waiting to bite.

     Note: On Python 2, `a / b' returns the same as `a // b' if
     `__future__.division' is not in effect.  This is also known as
     "classic" division.


File: python.info,  Node: How do I convert a string to a number?,  Next: How do I convert a number to a string?,  Prev: Why does -22 // 10 return -3?,  Up: Numbers and strings

11.2.3.3 How do I convert a string to a number?
...............................................

For integers, use the built-in *note int(): 1ef. type constructor, e.g.
`int('144') == 144'.  Similarly, *note float(): 1e8. converts to
floating-point, e.g. `float('144') == 144.0'.

  By default, these interpret the number as decimal, so that
`int('0144') == 144' and `int('0x144')' raises *note ValueError: 233.
`int(string, base)' takes the base to convert from as a second optional
argument, so `int('0x144', 16) == 324'.  If the base is specified as 0,
the number is interpreted using Python's rules: a leading '0' indicates
octal, and '0x' indicates a hex number.

  Do not use the built-in function *note eval(): 359. if all you need
is to convert strings to numbers.  *note eval(): 359. will be
significantly slower and it presents a security risk: someone could
pass you a Python expression that might have unwanted side effects.
For example, someone could pass `__import__('os').system("rm -rf
$HOME")' which would erase your home directory.

  *note eval(): 359. also has the effect of interpreting numbers as
Python expressions, so that e.g. `eval('09')' gives a syntax error
because Python regards numbers starting with '0' as octal (base 8).


File: python.info,  Node: How do I convert a number to a string?,  Next: How do I modify a string in place?,  Prev: How do I convert a string to a number?,  Up: Numbers and strings

11.2.3.4 How do I convert a number to a string?
...............................................

To convert, e.g., the number 144 to the string '144', use the built-in
type constructor *note str(): 1e7.  If you want a hexadecimal or octal
representation, use the built-in functions *note hex(): 32d. or *note
oct(): 31e.  For fancy formatting, see the *note Format String Syntax:
301. section, e.g. `"{:04d}".format(144)' yields `'0144'' and
`"{:.3f}".format(1/3)' yields `'0.333''.  You may also use *note the %
operator: 51b. on strings.  See the library reference manual for
details.


File: python.info,  Node: How do I modify a string in place?,  Next: How do I use strings to call functions/methods?,  Prev: How do I convert a number to a string?,  Up: Numbers and strings

11.2.3.5 How do I modify a string in place?
...........................................

You can't, because strings are immutable.  If you need an object with
this ability, try converting the string to a list or use the array
module:

    >>> s = "Hello, world"
    >>> a = list(s)
    >>> print a
    ['H', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd']
    >>> a[7:] = list("there!")
    >>> ''.join(a)
    'Hello, there!'

    >>> import array
    >>> a = array.array('c', s)
    >>> print a
    array('c', 'Hello, world')
    >>> a[0] = 'y' ; print a
    array('c', 'yello world')
    >>> a.tostring()
    'yello, world'



File: python.info,  Node: How do I use strings to call functions/methods?,  Next: Is there an equivalent to Perl's chomp for removing trailing newlines from strings?,  Prev: How do I modify a string in place?,  Up: Numbers and strings

11.2.3.6 How do I use strings to call functions/methods?
........................................................

There are various techniques.

   * The best is to use a dictionary that maps strings to functions.
     The primary advantage of this technique is that the strings do not
     need to match the names of the functions.  This is also the
     primary technique used to emulate a case construct:

         def a():
             pass

         def b():
             pass

         dispatch = {'go': a, 'stop': b}  # Note lack of parens for funcs

         dispatch[get_input()]()  # Note trailing parens to call function


   * Use the built-in function *note getattr(): 85f.:

         import foo
         getattr(foo, 'bar')()

     Note that *note getattr(): 85f. works on any object, including
     classes, class instances, modules, and so on.

     This is used in several places in the standard library, like this:

         class Foo:
             def do_foo(self):
                 ...

             def do_bar(self):
                 ...

         f = getattr(foo_instance, 'do_' + opname)
         f()


   * Use *note locals(): 335. or *note eval(): 359. to resolve the
     function name:

         def myFunc():
             print "hello"

         fname = "myFunc"

         f = locals()[fname]
         f()

         f = eval(fname)
         f()

     Note: Using *note eval(): 359. is slow and dangerous.  If you
     don't have absolute control over the contents of the string,
     someone could pass a string that resulted in an arbitrary function
     being executed.


File: python.info,  Node: Is there an equivalent to Perl's chomp for removing trailing newlines from strings?,  Next: Is there a scanf or sscanf equivalent?,  Prev: How do I use strings to call functions/methods?,  Up: Numbers and strings

11.2.3.7 Is there an equivalent to Perl's chomp() for removing trailing newlines from strings?
..............................................................................................

Starting with Python 2.2, you can use `S.rstrip("\r\n")' to remove all
occurrences of any line terminator from the end of the string `S'
without removing other trailing whitespace.  If the string `S'
represents more than one line, with several empty lines at the end, the
line terminators for all the blank lines will be removed:

    >>> lines = ("line 1 \r\n"
    ...          "\r\n"
    ...          "\r\n")
    >>> lines.rstrip("\n\r")
    'line 1 '

Since this is typically only desired when reading text one line at a
time, using `S.rstrip()' this way works well.

  For older versions of Python, there are two partial substitutes:

   - If you want to remove all trailing whitespace, use the `rstrip()'
     method of string objects.  This removes all trailing whitespace,
     not just a single newline.

   - Otherwise, if there is only one line in the string `S', use
     `S.splitlines()[0]'.


File: python.info,  Node: Is there a scanf or sscanf equivalent?,  Next: What does 'UnicodeError ASCII [decoding encoding] error ordinal not in range 128 ' mean?,  Prev: Is there an equivalent to Perl's chomp for removing trailing newlines from strings?,  Up: Numbers and strings

11.2.3.8 Is there a scanf() or sscanf() equivalent?
...................................................

Not as such.

  For simple input parsing, the easiest approach is usually to split
the line into whitespace-delimited words using the *note split(): 8bd.
method of string objects and then convert decimal strings to numeric
values using *note int(): 1ef. or *note float(): 1e8.  `split()'
supports an optional "sep" parameter which is useful if the line uses
something other than whitespace as a separator.

  For more complicated input parsing, regular expressions are more
powerful than C's `sscanf()' and better suited for the task.


File: python.info,  Node: What does 'UnicodeError ASCII [decoding encoding] error ordinal not in range 128 ' mean?,  Prev: Is there a scanf or sscanf equivalent?,  Up: Numbers and strings

11.2.3.9 What does 'UnicodeError: ASCII [decoding,encoding] error: ordinal not in range(128)' mean?
...................................................................................................

This error indicates that your Python installation can handle only
7-bit ASCII strings.  There are a couple ways to fix or work around the
problem.

  If your programs must handle data in arbitrary character set
encodings, the environment the application runs in will generally
identify the encoding of the data it is handing you.  You need to
convert the input to Unicode data using that encoding.  For example, a
program that handles email or web input will typically find character
set encoding information in Content-Type headers.  This can then be
used to properly convert input data to Unicode. Assuming the string
referred to by `value' is encoded as UTF-8:

    value = unicode(value, "utf-8")

will return a Unicode object.  If the data is not correctly encoded as
UTF-8, the above call will raise a *note UnicodeError: 42c. exception.

  If you only want strings converted to Unicode which have non-ASCII
data, you can try converting them first assuming an ASCII encoding, and
then generate Unicode objects if that fails:

    try:
        x = unicode(value, "ascii")
    except UnicodeError:
        value = unicode(value, "utf-8")
    else:
        # value was valid ASCII data
        pass

It's possible to set a default encoding in a file called
`sitecustomize.py' that's part of the Python library.  However, this
isn't recommended because changing the Python-wide default encoding may
cause third-party extension modules to fail.

  Note that on Windows, there is an encoding known as "mbcs", which
uses an encoding specific to your current locale.  In many cases, and
particularly when working with COM, this may be an appropriate default
encoding to use.


File: python.info,  Node: Sequences Tuples/Lists,  Next: Dictionaries<2>,  Prev: Numbers and strings,  Up: Programming FAQ

11.2.4 Sequences (Tuples/Lists)
-------------------------------

* Menu:

* How do I convert between tuples and lists?::
* What's a negative index?::
* How do I iterate over a sequence in reverse order?::
* How do you remove duplicates from a list?::
* How do you make an array in Python?::
* How do I create a multidimensional list?::
* How do I apply a method to a sequence of objects?::


File: python.info,  Node: How do I convert between tuples and lists?,  Next: What's a negative index?,  Up: Sequences Tuples/Lists

11.2.4.1 How do I convert between tuples and lists?
...................................................

The type constructor `tuple(seq)' converts any sequence (actually, any
iterable) into a tuple with the same items in the same order.

  For example, `tuple([1, 2, 3])' yields `(1, 2, 3)' and `tuple('abc')'
yields `('a', 'b', 'c')'.  If the argument is a tuple, it does not make
a copy but returns the same object, so it is cheap to call *note
tuple(): 401. when you aren't sure that an object is already a tuple.

  The type constructor `list(seq)' converts any sequence or iterable
into a list with the same items in the same order.  For example,
`list((1, 2, 3))' yields `[1, 2, 3]' and `list('abc')' yields `['a',
'b', 'c']'.  If the argument is a list, it makes a copy just like
`seq[:]' would.


File: python.info,  Node: What's a negative index?,  Next: How do I iterate over a sequence in reverse order?,  Prev: How do I convert between tuples and lists?,  Up: Sequences Tuples/Lists

11.2.4.2 What's a negative index?
.................................

Python sequences are indexed with positive numbers and negative
numbers.  For positive numbers 0 is the first index 1 is the second
index and so forth.  For negative indices -1 is the last index and -2
is the penultimate (next to last) index and so forth.  Think of
`seq[-n]' as the same as `seq[len(seq)-n]'.

  Using negative indices can be very convenient.  For example `S[:-1]'
is all of the string except for its last character, which is useful for
removing the trailing newline from a string.


File: python.info,  Node: How do I iterate over a sequence in reverse order?,  Next: How do you remove duplicates from a list?,  Prev: What's a negative index?,  Up: Sequences Tuples/Lists

11.2.4.3 How do I iterate over a sequence in reverse order?
...........................................................

Use the *note reversed(): 3f1. built-in function, which is new in
Python 2.4:

    for x in reversed(sequence):
        ... # do something with x...

This won't touch your original sequence, but build a new copy with
reversed order to iterate over.

  With Python 2.3, you can use an extended slice syntax:

    for x in sequence[::-1]:
        ... # do something with x...



File: python.info,  Node: How do you remove duplicates from a list?,  Next: How do you make an array in Python?,  Prev: How do I iterate over a sequence in reverse order?,  Up: Sequences Tuples/Lists

11.2.4.4 How do you remove duplicates from a list?
..................................................

See the Python Cookbook for a long discussion of many ways to do this:

     <http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/52560>

  If you don't mind reordering the list, sort it and then scan from the
end of the list, deleting duplicates as you go:

    if mylist:
        mylist.sort()
        last = mylist[-1]
        for i in range(len(mylist)-2, -1, -1):
            if last == mylist[i]:
                del mylist[i]
            else:
                last = mylist[i]

If all elements of the list may be used as dictionary keys (i.e. they
are all hashable) this is often faster

    d = {}
    for x in mylist:
        d[x] = 1
    mylist = list(d.keys())

In Python 2.5 and later, the following is possible instead:

    mylist = list(set(mylist))

This converts the list into a set, thereby removing duplicates, and
then back into a list.


File: python.info,  Node: How do you make an array in Python?,  Next: How do I create a multidimensional list?,  Prev: How do you remove duplicates from a list?,  Up: Sequences Tuples/Lists

11.2.4.5 How do you make an array in Python?
............................................

Use a list:

    ["this", 1, "is", "an", "array"]

Lists are equivalent to C or Pascal arrays in their time complexity;
the primary difference is that a Python list can contain objects of
many different types.

  The `array' module also provides methods for creating arrays of fixed
types with compact representations, but they are slower to index than
lists.  Also note that the Numeric extensions and others define
array-like structures with various characteristics as well.

  To get Lisp-style linked lists, you can emulate cons cells using
tuples:

    lisp_list = ("like",  ("this",  ("example", None) ) )

If mutability is desired, you could use lists instead of tuples.  Here
the analogue of lisp car is `lisp_list[0]' and the analogue of cdr is
`lisp_list[1]'.  Only do this if you're sure you really need to,
because it's usually a lot slower than using Python lists.


File: python.info,  Node: How do I create a multidimensional list?,  Next: How do I apply a method to a sequence of objects?,  Prev: How do you make an array in Python?,  Up: Sequences Tuples/Lists

11.2.4.6 How do I create a multidimensional list?
.................................................

You probably tried to make a multidimensional array like this:

    A = [[None] * 2] * 3

This looks correct if you print it:

    >>> A
    [[None, None], [None, None], [None, None]]

But when you assign a value, it shows up in multiple places:

    >>> A[0][0] = 5
    >>> A
    [[5, None], [5, None], [5, None]]

The reason is that replicating a list with `*' doesn't create copies,
it only creates references to the existing objects.  The `*3' creates a
list containing 3 references to the same list of length two.  Changes
to one row will show in all rows, which is almost certainly not what
you want.

  The suggested approach is to create a list of the desired length
first and then fill in each element with a newly created list:

    A = [None] * 3
    for i in range(3):
        A[i] = [None] * 2

This generates a list containing 3 different lists of length two.  You
can also use a list comprehension:

    w, h = 2, 3
    A = [[None] * w for i in range(h)]

Or, you can use an extension that provides a matrix datatype; Numeric
Python(1) is the best known.

  ---------- Footnotes ----------

  (1) http://numpy.scipy.org/


File: python.info,  Node: How do I apply a method to a sequence of objects?,  Prev: How do I create a multidimensional list?,  Up: Sequences Tuples/Lists

11.2.4.7 How do I apply a method to a sequence of objects?
..........................................................

Use a list comprehension:

    result = [obj.method() for obj in mylist]

More generically, you can try the following function:

    def method_map(objects, method, arguments):
        """method_map([a,b], "meth", (1,2)) gives [a.meth(1,2), b.meth(1,2)]"""
        nobjects = len(objects)
        methods = map(getattr, objects, [method]*nobjects)
        return map(apply, methods, [arguments]*nobjects)



File: python.info,  Node: Dictionaries<2>,  Next: Objects,  Prev: Sequences Tuples/Lists,  Up: Programming FAQ

11.2.5 Dictionaries
-------------------

* Menu:

* How can I get a dictionary to display its keys in a consistent order?::
* I want to do a complicated sort; can you do a Schwartzian Transform in Python?: I want to do a complicated sort can you do a Schwartzian Transform in Python?.
* How can I sort one list by values from another list?::


File: python.info,  Node: How can I get a dictionary to display its keys in a consistent order?,  Next: I want to do a complicated sort can you do a Schwartzian Transform in Python?,  Up: Dictionaries<2>

11.2.5.1 How can I get a dictionary to display its keys in a consistent order?
..............................................................................

You can't.  Dictionaries store their keys in an unpredictable order, so
the display order of a dictionary's elements will be similarly
unpredictable.

  This can be frustrating if you want to save a printable version to a
file, make some changes and then compare it with some other printed
dictionary.  In this case, use the `pprint' module to pretty-print the
dictionary; the items will be presented in order sorted by the key.

  A more complicated solution is to subclass `dict' to create a
`SortedDict' class that prints itself in a predictable order.  Here's
one simpleminded implementation of such a class:

    class SortedDict(dict):
        def __repr__(self):
            keys = sorted(self.keys())
            result = ("{!r}: {!r}".format(k, self[k]) for k in keys)
            return "{{{}}}".format(", ".join(result))

        __str__ = __repr__

This will work for many common situations you might encounter, though
it's far from a perfect solution. The largest flaw is that if some
values in the dictionary are also dictionaries, their values won't be
presented in any particular order.


File: python.info,  Node: I want to do a complicated sort can you do a Schwartzian Transform in Python?,  Next: How can I sort one list by values from another list?,  Prev: How can I get a dictionary to display its keys in a consistent order?,  Up: Dictionaries<2>

11.2.5.2 I want to do a complicated sort: can you do a Schwartzian Transform in Python?
.......................................................................................

The technique, attributed to Randal Schwartz of the Perl community,
sorts the elements of a list by a metric which maps each element to its
"sort value". In Python, just use the `key' argument for the `sort()'
method:

    Isorted = L[:]
    Isorted.sort(key=lambda s: int(s[10:15]))

The `key' argument is new in Python 2.4, for older versions this kind of
sorting is quite simple to do with list comprehensions.  To sort a list
of strings by their uppercase values:

    tmp1 = [(x.upper(), x) for x in L]  # Schwartzian transform
    tmp1.sort()
    Usorted = [x[1] for x in tmp1]

To sort by the integer value of a subfield extending from positions
10-15 in each string:

    tmp2 = [(int(s[10:15]), s) for s in L]  # Schwartzian transform
    tmp2.sort()
    Isorted = [x[1] for x in tmp2]

Note that Isorted may also be computed by

    def intfield(s):
        return int(s[10:15])

    def Icmp(s1, s2):
        return cmp(intfield(s1), intfield(s2))

    Isorted = L[:]
    Isorted.sort(Icmp)

but since this method calls `intfield()' many times for each element of
L, it is slower than the Schwartzian Transform.


File: python.info,  Node: How can I sort one list by values from another list?,  Prev: I want to do a complicated sort can you do a Schwartzian Transform in Python?,  Up: Dictionaries<2>

11.2.5.3 How can I sort one list by values from another list?
.............................................................

Merge them into a single list of tuples, sort the resulting list, and
then pick out the element you want.

    >>> list1 = ["what", "I'm", "sorting", "by"]
    >>> list2 = ["something", "else", "to", "sort"]
    >>> pairs = zip(list1, list2)
    >>> pairs
    [('what', 'something'), ("I'm", 'else'), ('sorting', 'to'), ('by', 'sort')]
    >>> pairs.sort()
    >>> result = [ x[1] for x in pairs ]
    >>> result
    ['else', 'sort', 'to', 'something']

An alternative for the last step is:

    >>> result = []
    >>> for p in pairs: result.append(p[1])

If you find this more legible, you might prefer to use this instead of
the final list comprehension.  However, it is almost twice as slow for
long lists.  Why?  First, the `append()' operation has to reallocate
memory, and while it uses some tricks to avoid doing that each time, it
still has to do it occasionally, and that costs quite a bit.  Second,
the expression "result.append" requires an extra attribute lookup, and
third, there's a speed reduction from having to make all those function
calls.


File: python.info,  Node: Objects,  Next: Modules<3>,  Prev: Dictionaries<2>,  Up: Programming FAQ

11.2.6 Objects
--------------

* Menu:

* What is a class?::
* What is a method?::
* What is self?::
* How do I check if an object is an instance of a given class or of a subclass of it?::
* What is delegation?::
* How do I call a method defined in a base class from a derived class that overrides it?::
* How can I organize my code to make it easier to change the base class?::
* How do I create static class data and static class methods?::
* How can I overload constructors (or methods) in Python?: How can I overload constructors or methods in Python?.
* I try to use __spam and I get an error about _SomeClassName__spam.: I try to use __spam and I get an error about _SomeClassName__spam.
* My class defines __del__ but it is not called when I delete the object.: My class defines __del__ but it is not called when I delete the object.
* How do I get a list of all instances of a given class?::


File: python.info,  Node: What is a class?,  Next: What is a method?,  Up: Objects

11.2.6.1 What is a class?
.........................

A class is the particular object type created by executing a class
statement.  Class objects are used as templates to create instance
objects, which embody both the data (attributes) and code (methods)
specific to a datatype.

  A class can be based on one or more other classes, called its base
class(es). It then inherits the attributes and methods of its base
classes. This allows an object model to be successively refined by
inheritance.  You might have a generic `Mailbox' class that provides
basic accessor methods for a mailbox, and subclasses such as
`MboxMailbox', `MaildirMailbox', `OutlookMailbox' that handle various
specific mailbox formats.


File: python.info,  Node: What is a method?,  Next: What is self?,  Prev: What is a class?,  Up: Objects

11.2.6.2 What is a method?
..........................

A method is a function on some object `x' that you normally call as
`x.name(arguments...)'.  Methods are defined as functions inside the
class definition:

    class C:
        def meth (self, arg):
            return arg * 2 + self.attribute



File: python.info,  Node: What is self?,  Next: How do I check if an object is an instance of a given class or of a subclass of it?,  Prev: What is a method?,  Up: Objects

11.2.6.3 What is self?
......................

Self is merely a conventional name for the first argument of a method.
A method defined as `meth(self, a, b, c)' should be called as
`x.meth(a, b, c)' for some instance `x' of the class in which the
definition occurs; the called method will think it is called as
`meth(x, a, b, c)'.

  See also *note Why must 'self' be used explicitly in method
definitions and calls?: 30f2.


File: python.info,  Node: How do I check if an object is an instance of a given class or of a subclass of it?,  Next: What is delegation?,  Prev: What is self?,  Up: Objects

11.2.6.4 How do I check if an object is an instance of a given class or of a subclass of it?
............................................................................................

Use the built-in function `isinstance(obj, cls)'.  You can check if an
object is an instance of any of a number of classes by providing a
tuple instead of a single class, e.g. `isinstance(obj, (class1, class2,
...))', and can also check whether an object is one of Python's
built-in types, e.g.  `isinstance(obj, str)' or `isinstance(obj, (int,
long, float, complex))'.

  Note that most programs do not use *note isinstance(): 317. on
user-defined classes very often.  If you are developing the classes
yourself, a more proper object-oriented style is to define methods on
the classes that encapsulate a particular behaviour, instead of
checking the object's class and doing a different thing based on what
class it is.  For example, if you have a function that does something:

    def search(obj):
        if isinstance(obj, Mailbox):
            # ... code to search a mailbox
        elif isinstance(obj, Document):
            # ... code to search a document
        elif ...

A better approach is to define a `search()' method on all the classes
and just call it:

    class Mailbox:
        def search(self):
            # ... code to search a mailbox

    class Document:
        def search(self):
            # ... code to search a document

    obj.search()



File: python.info,  Node: What is delegation?,  Next: How do I call a method defined in a base class from a derived class that overrides it?,  Prev: How do I check if an object is an instance of a given class or of a subclass of it?,  Up: Objects

11.2.6.5 What is delegation?
............................

Delegation is an object oriented technique (also called a design
pattern).  Let's say you have an object `x' and want to change the
behaviour of just one of its methods.  You can create a new class that
provides a new implementation of the method you're interested in
changing and delegates all other methods to the corresponding method of
`x'.

  Python programmers can easily implement delegation.  For example, the
following class implements a class that behaves like a file but
converts all written data to uppercase:

    class UpperOut:

        def __init__(self, outfile):
            self._outfile = outfile

        def write(self, s):
            self._outfile.write(s.upper())

        def __getattr__(self, name):
            return getattr(self._outfile, name)

Here the `UpperOut' class redefines the `write()' method to convert the
argument string to uppercase before calling the underlying
`self.__outfile.write()' method.  All other methods are delegated to the
underlying `self.__outfile' object.  The delegation is accomplished via
the `__getattr__' method; consult *note the language reference: 6fb.
for more information about controlling attribute access.

  Note that for more general cases delegation can get trickier. When
attributes must be set as well as retrieved, the class must define a
*note __setattr__(): 481.  method too, and it must do so carefully.
The basic implementation of *note __setattr__(): 481. is roughly
equivalent to the following:

    class X:
        ...
        def __setattr__(self, name, value):
            self.__dict__[name] = value
        ...

Most *note __setattr__(): 481. implementations must modify
`self.__dict__' to store local state for self without causing an
infinite recursion.


File: python.info,  Node: How do I call a method defined in a base class from a derived class that overrides it?,  Next: How can I organize my code to make it easier to change the base class?,  Prev: What is delegation?,  Up: Objects

11.2.6.6 How do I call a method defined in a base class from a derived class that overrides it?
...............................................................................................

If you're using new-style classes, use the built-in *note super(): 376.
function:

    class Derived(Base):
        def meth (self):
            super(Derived, self).meth()

If you're using classic classes: For a class definition such as `class
Derived(Base): ...' you can call method `meth()' defined in `Base' (or
one of `Base''s base classes) as `Base.meth(self, arguments...)'.  Here,
`Base.meth' is an unbound method, so you need to provide the `self'
argument.


File: python.info,  Node: How can I organize my code to make it easier to change the base class?,  Next: How do I create static class data and static class methods?,  Prev: How do I call a method defined in a base class from a derived class that overrides it?,  Up: Objects

11.2.6.7 How can I organize my code to make it easier to change the base class?
...............................................................................

You could define an alias for the base class, assign the real base
class to it before your class definition, and use the alias throughout
your class.  Then all you have to change is the value assigned to the
alias.  Incidentally, this trick is also handy if you want to decide
dynamically (e.g. depending on availability of resources) which base
class to use.  Example:

    BaseAlias = <real base class>

    class Derived(BaseAlias):
        def meth(self):
            BaseAlias.meth(self)
            ...



File: python.info,  Node: How do I create static class data and static class methods?,  Next: How can I overload constructors or methods in Python?,  Prev: How can I organize my code to make it easier to change the base class?,  Up: Objects

11.2.6.8 How do I create static class data and static class methods?
....................................................................

Both static data and static methods (in the sense of C++ or Java) are
supported in Python.

  For static data, simply define a class attribute.  To assign a new
value to the attribute, you have to explicitly use the class name in
the assignment:

    class C:
        count = 0   # number of times C.__init__ called

        def __init__(self):
            C.count = C.count + 1

        def getcount(self):
            return C.count  # or return self.count

`c.count' also refers to `C.count' for any `c' such that `isinstance(c,
C)' holds, unless overridden by `c' itself or by some class on the
base-class search path from `c.__class__' back to `C'.

  Caution: within a method of C, an assignment like `self.count = 42'
creates a new and unrelated instance named "count" in `self''s own
dict.  Rebinding of a class-static data name must always specify the
class whether inside a method or not:

    C.count = 314

Static methods are possible since Python 2.2:

    class C:
        def static(arg1, arg2, arg3):
            # No 'self' parameter!
            ...
        static = staticmethod(static)

With Python 2.4's decorators, this can also be written as

    class C:
        @staticmethod
        def static(arg1, arg2, arg3):
            # No 'self' parameter!
            ...

However, a far more straightforward way to get the effect of a static
method is via a simple module-level function:

    def getcount():
        return C.count

If your code is structured so as to define one class (or tightly
related class hierarchy) per module, this supplies the desired
encapsulation.


File: python.info,  Node: How can I overload constructors or methods in Python?,  Next: I try to use __spam and I get an error about _SomeClassName__spam,  Prev: How do I create static class data and static class methods?,  Up: Objects

11.2.6.9 How can I overload constructors (or methods) in Python?
................................................................

This answer actually applies to all methods, but the question usually
comes up first in the context of constructors.

  In C++ you'd write

    class C {
        C() { cout << "No arguments\n"; }
        C(int i) { cout << "Argument is " << i << "\n"; }
    }

In Python you have to write a single constructor that catches all cases
using default arguments.  For example:

    class C:
        def __init__(self, i=None):
            if i is None:
                print "No arguments"
            else:
                print "Argument is", i

This is not entirely equivalent, but close enough in practice.

  You could also try a variable-length argument list, e.g.

    def __init__(self, *args):
        ...

The same approach works for all method definitions.


File: python.info,  Node: I try to use __spam and I get an error about _SomeClassName__spam,  Next: My class defines __del__ but it is not called when I delete the object,  Prev: How can I overload constructors or methods in Python?,  Up: Objects

11.2.6.10 I try to use __spam and I get an error about _SomeClassName__spam.
............................................................................

Variable names with double leading underscores are "mangled" to provide
a simple but effective way to define class private variables.  Any
identifier of the form `__spam' (at least two leading underscores, at
most one trailing underscore) is textually replaced with
`_classname__spam', where `classname' is the current class name with
any leading underscores stripped.

  This doesn't guarantee privacy: an outside user can still
deliberately access the "_classname__spam" attribute, and private
values are visible in the object's `__dict__'.  Many Python programmers
never bother to use private variable names at all.


File: python.info,  Node: My class defines __del__ but it is not called when I delete the object,  Next: How do I get a list of all instances of a given class?,  Prev: I try to use __spam and I get an error about _SomeClassName__spam,  Up: Objects

11.2.6.11 My class defines __del__ but it is not called when I delete the object.
.................................................................................

There are several possible reasons for this.

  The del statement does not necessarily call *note __del__(): 6f6. -
it simply decrements the object's reference count, and if this reaches
zero *note __del__(): 6f6. is called.

  If your data structures contain circular links (e.g. a tree where
each child has a parent reference and each parent has a list of
children) the reference counts will never go back to zero.  Once in a
while Python runs an algorithm to detect such cycles, but the garbage
collector might run some time after the last reference to your data
structure vanishes, so your *note __del__(): 6f6. method may be called
at an inconvenient and random time. This is inconvenient if you're
trying to reproduce a problem. Worse, the order in which object's *note
__del__(): 6f6.  methods are executed is arbitrary.  You can run *note
gc.collect(): 3b9. to force a collection, but there _are_ pathological
cases where objects will never be collected.

  Despite the cycle collector, it's still a good idea to define an
explicit `close()' method on objects to be called whenever you're done
with them.  The `close()' method can then remove attributes that refer
to subobjecs.  Don't call *note __del__(): 6f6. directly - *note
__del__(): 6f6. should call `close()' and `close()' should make sure
that it can be called more than once for the same object.

  Another way to avoid cyclical references is to use the *note weakref:
195. module, which allows you to point to objects without incrementing
their reference count.  Tree data structures, for instance, should use
weak references for their parent and sibling references (if they need
them!).

  If the object has ever been a local variable in a function that
caught an expression in an except clause, chances are that a reference
to the object still exists in that function's stack frame as contained
in the stack trace.  Normally, calling *note sys.exc_clear(): 45d. will
take care of this by clearing the last recorded exception.

  Finally, if your *note __del__(): 6f6. method raises an exception, a
warning message is printed to *note sys.stderr: 634.


File: python.info,  Node: How do I get a list of all instances of a given class?,  Prev: My class defines __del__ but it is not called when I delete the object,  Up: Objects

11.2.6.12 How do I get a list of all instances of a given class?
................................................................

Python does not keep track of all instances of a class (or of a
built-in type).  You can program the class's constructor to keep track
of all instances by keeping a list of weak references to each instance.


File: python.info,  Node: Modules<3>,  Prev: Objects,  Up: Programming FAQ

11.2.7 Modules
--------------

* Menu:

* How do I create a .pyc file?: How do I create a pyc file?.
* How do I find the current module name?::
* How can I have modules that mutually import each other?::
* __import__('x.y.z') returns <module 'x'>; how do I get z?: __import__ 'x y z' returns <module 'x'>; how do I get z?.
* When I edit an imported module and reimport it, the changes don't show up. Why does this happen?: When I edit an imported module and reimport it the changes don't show up Why does this happen?.


File: python.info,  Node: How do I create a pyc file?,  Next: How do I find the current module name?,  Up: Modules<3>

11.2.7.1 How do I create a .pyc file?
.....................................

When a module is imported for the first time (or when the source is
more recent than the current compiled file) a `.pyc' file containing
the compiled code should be created in the same directory as the `.py'
file.

  One reason that a `.pyc' file may not be created is permissions
problems with the directory. This can happen, for example, if you
develop as one user but run as another, such as if you are testing with
a web server.  Creation of a .pyc file is automatic if you're importing
a module and Python has the ability (permissions, free space, etc...)
to write the compiled module back to the directory.

  Running Python on a top level script is not considered an import and
no `.pyc' will be created.  For example, if you have a top-level module
`abc.py' that imports another module `xyz.py', when you run abc,
`xyz.pyc' will be created since xyz is imported, but no `abc.pyc' file
will be created since `abc.py' isn't being imported.

  If you need to create abc.pyc - that is, to create a .pyc file for a
module that is not imported - you can, using the *note py_compile: 13d.
and *note compileall: 69. modules.

  The *note py_compile: 13d. module can manually compile any module.
One way is to use the `compile()' function in that module interactively:

    >>> import py_compile
    >>> py_compile.compile('abc.py')

This will write the `.pyc' to the same location as `abc.py' (or you can
override that with the optional parameter `cfile').

  You can also automatically compile all files in a directory or
directories using the *note compileall: 69. module.  You can do it from
the shell prompt by running `compileall.py' and providing the path of a
directory containing Python files to compile:

    python -m compileall .



File: python.info,  Node: How do I find the current module name?,  Next: How can I have modules that mutually import each other?,  Prev: How do I create a pyc file?,  Up: Modules<3>

11.2.7.2 How do I find the current module name?
...............................................

A module can find out its own module name by looking at the predefined
global variable `__name__'.  If this has the value `'__main__'', the
program is running as a script.  Many modules that are usually used by
importing them also provide a command-line interface or a self-test,
and only execute this code after checking `__name__':

    def main():
        print 'Running test...'
        ...

    if __name__ == '__main__':
        main()



File: python.info,  Node: How can I have modules that mutually import each other?,  Next: __import__ 'x y z' returns <module 'x'>; how do I get z?,  Prev: How do I find the current module name?,  Up: Modules<3>

11.2.7.3 How can I have modules that mutually import each other?
................................................................

Suppose you have the following modules:

  foo.py:

    from bar import bar_var
    foo_var = 1

bar.py:

    from foo import foo_var
    bar_var = 2

The problem is that the interpreter will perform the following steps:

   * main imports foo

   * Empty globals for foo are created

   * foo is compiled and starts executing

   * foo imports bar

   * Empty globals for bar are created

   * bar is compiled and starts executing

   * bar imports foo (which is a no-op since there already is a module
     named foo)

   * bar.foo_var = foo.foo_var

  The last step fails, because Python isn't done with interpreting
`foo' yet and the global symbol dictionary for `foo' is still empty.

  The same thing happens when you use `import foo', and then try to
access `foo.foo_var' in global code.

  There are (at least) three possible workarounds for this problem.

  Guido van Rossum recommends avoiding all uses of `from <module>
import ...', and placing all code inside functions.  Initializations of
global variables and class variables should use constants or built-in
functions only.  This means everything from an imported module is
referenced as `<module>.<name>'.

  Jim Roskind suggests performing steps in the following order in each
module:

   * exports (globals, functions, and classes that don't need imported
     base classes)

   * `import' statements

   * active code (including globals that are initialized from imported
     values).

  van Rossum doesn't like this approach much because the imports appear
in a strange place, but it does work.

  Matthias Urlichs recommends restructuring your code so that the
recursive import is not necessary in the first place.

  These solutions are not mutually exclusive.


File: python.info,  Node: __import__ 'x y z' returns <module 'x'>; how do I get z?,  Next: When I edit an imported module and reimport it the changes don't show up Why does this happen?,  Prev: How can I have modules that mutually import each other?,  Up: Modules<3>

11.2.7.4 __import__('x.y.z') returns <module 'x'>; how do I get z?
..................................................................

Try:

    __import__('x.y.z').y.z

For more realistic situations, you may have to do something like

    m = __import__(s)
    for i in s.split(".")[1:]:
        m = getattr(m, i)

See *note importlib: f6. for a convenience function called *note
import_module(): 26e.


File: python.info,  Node: When I edit an imported module and reimport it the changes don't show up Why does this happen?,  Prev: __import__ 'x y z' returns <module 'x'>; how do I get z?,  Up: Modules<3>

11.2.7.5 When I edit an imported module and reimport it, the changes don't show up.  Why does this happen?
..........................................................................................................

For reasons of efficiency as well as consistency, Python only reads the
module file on the first time a module is imported.  If it didn't, in a
program consisting of many modules where each one imports the same
basic module, the basic module would be parsed and re-parsed many
times.  To force rereading of a changed module, do this:

    import modname
    reload(modname)

Warning: this technique is not 100% fool-proof.  In particular, modules
containing statements like

    from modname import some_objects

will continue to work with the old version of the imported objects.  If
the module contains class definitions, existing class instances will
_not_ be updated to use the new class definition.  This can result in
the following paradoxical behaviour:

    >>> import cls
    >>> c = cls.C()                # Create an instance of C
    >>> reload(cls)
    <module 'cls' from 'cls.pyc'>
    >>> isinstance(c, cls.C)       # isinstance is false?!?
    False

The nature of the problem is made clear if you print out the class
objects:

    >>> c.__class__
    <class cls.C at 0x7352a0>
    >>> cls.C
    <class cls.C at 0x4198d0>



File: python.info,  Node: Design and History FAQ,  Next: Library and Extension FAQ,  Prev: Programming FAQ,  Up: Python Frequently Asked Questions

11.3 Design and History FAQ
===========================

* Menu:

* Why does Python use indentation for grouping of statements?::
* Why am I getting strange results with simple arithmetic operations?::
* Why are floating point calculations so inaccurate?::
* Why are Python strings immutable?::
* Why must 'self' be used explicitly in method definitions and calls?::
* Why can't I use an assignment in an expression?::
* Why does Python use methods for some functionality (e.g. list.index()) but functions for other (e.g. len(list))?: Why does Python use methods for some functionality e g list index but functions for other e g len list ?.
* Why is join() a string method instead of a list or tuple method?: Why is join a string method instead of a list or tuple method?.
* How fast are exceptions?::
* Why isn't there a switch or case statement in Python?::
* Can't you emulate threads in the interpreter instead of relying on an OS-specific thread implementation?::
* Why can't lambda forms contain statements?::
* Can Python be compiled to machine code, C or some other language?: Can Python be compiled to machine code C or some other language?.
* How does Python manage memory?::
* Why isn't all memory freed when Python exits?::
* Why are there separate tuple and list data types?::
* How are lists implemented?::
* How are dictionaries implemented?::
* Why must dictionary keys be immutable?::
* Why doesn't list.sort() return the sorted list?: Why doesn't list sort return the sorted list?.
* How do you specify and enforce an interface spec in Python?::
* Why are default values shared between objects?::
* Why is there no goto?::
* Why can't raw strings (r-strings) end with a backslash?: Why can't raw strings r-strings end with a backslash?.
* Why doesn't Python have a "with" statement for attribute assignments?::
* Why are colons required for the if/while/def/class statements?::
* Why does Python allow commas at the end of lists and tuples?::


File: python.info,  Node: Why does Python use indentation for grouping of statements?,  Next: Why am I getting strange results with simple arithmetic operations?,  Up: Design and History FAQ

11.3.1 Why does Python use indentation for grouping of statements?
------------------------------------------------------------------

Guido van Rossum believes that using indentation for grouping is
extremely elegant and contributes a lot to the clarity of the average
Python program.  Most people learn to love this feature after a while.

  Since there are no begin/end brackets there cannot be a disagreement
between grouping perceived by the parser and the human reader.
Occasionally C programmers will encounter a fragment of code like this:

    if (x <= y)
            x++;
            y--;
    z++;

Only the `x++' statement is executed if the condition is true, but the
indentation leads you to believe otherwise.  Even experienced C
programmers will sometimes stare at it a long time wondering why `y' is
being decremented even for `x > y'.

  Because there are no begin/end brackets, Python is much less prone to
coding-style conflicts.  In C there are many different ways to place
the braces.  If you're used to reading and writing code that uses one
style, you will feel at least slightly uneasy when reading (or being
required to write) another style.

  Many coding styles place begin/end brackets on a line by themselves.
This makes programs considerably longer and wastes valuable screen
space, making it harder to get a good overview of a program.  Ideally,
a function should fit on one screen (say, 20-30 lines).  20 lines of
Python can do a lot more work than 20 lines of C.  This is not solely
due to the lack of begin/end brackets - the lack of declarations and
the high-level data types are also responsible - but the
indentation-based syntax certainly helps.


File: python.info,  Node: Why am I getting strange results with simple arithmetic operations?,  Next: Why are floating point calculations so inaccurate?,  Prev: Why does Python use indentation for grouping of statements?,  Up: Design and History FAQ

11.3.2 Why am I getting strange results with simple arithmetic operations?
--------------------------------------------------------------------------

See the next question.


File: python.info,  Node: Why are floating point calculations so inaccurate?,  Next: Why are Python strings immutable?,  Prev: Why am I getting strange results with simple arithmetic operations?,  Up: Design and History FAQ

11.3.3 Why are floating point calculations so inaccurate?
---------------------------------------------------------

People are often very surprised by results like this:

    >>> 1.2 - 1.0
    0.199999999999999996

and think it is a bug in Python. It's not.  This has nothing to do with
Python, but with how the underlying C platform handles floating point
numbers, and ultimately with the inaccuracies introduced when writing
down numbers as a string of a fixed number of digits.

  The internal representation of floating point numbers uses a fixed
number of binary digits to represent a decimal number.  Some decimal
numbers can't be represented exactly in binary, resulting in small
roundoff errors.

  In decimal math, there are many numbers that can't be represented
with a fixed number of decimal digits, e.g.  1/3 = 0.3333333333.......

  In base 2, 1/2 = 0.1, 1/4 = 0.01, 1/8 = 0.001, etc.  .2 equals 2/10
equals 1/5, resulting in the binary fractional number
0.001100110011001...

  Floating point numbers only have 32 or 64 bits of precision, so the
digits are cut off at some point, and the resulting number is
0.199999999999999996 in decimal, not 0.2.

  A floating point number's `repr()' function prints as many digits are
necessary to make `eval(repr(f)) == f' true for any float f.  The
`str()' function prints fewer digits and this often results in the more
sensible number that was probably intended:

    >>> 1.1 - 0.9
    0.20000000000000007
    >>> print 1.1 - 0.9
    0.2

One of the consequences of this is that it is error-prone to compare
the result of some computation to a float with `=='. Tiny inaccuracies
may mean that `==' fails.  Instead, you have to check that the
difference between the two numbers is less than a certain threshold:

    epsilon = 0.0000000000001  # Tiny allowed error
    expected_result = 0.4

    if expected_result-epsilon <= computation() <= expected_result+epsilon:
        ...

Please see the chapter on *note floating point arithmetic: 611. in the
Python tutorial for more information.


File: python.info,  Node: Why are Python strings immutable?,  Next: Why must 'self' be used explicitly in method definitions and calls?,  Prev: Why are floating point calculations so inaccurate?,  Up: Design and History FAQ

11.3.4 Why are Python strings immutable?
----------------------------------------

There are several advantages.

  One is performance: knowing that a string is immutable means we can
allocate space for it at creation time, and the storage requirements
are fixed and unchanging.  This is also one of the reasons for the
distinction between tuples and lists.

  Another advantage is that strings in Python are considered as
"elemental" as numbers.  No amount of activity will change the value 8
to anything else, and in Python, no amount of activity will change the
string "eight" to anything else.


File: python.info,  Node: Why must 'self' be used explicitly in method definitions and calls?,  Next: Why can't I use an assignment in an expression?,  Prev: Why are Python strings immutable?,  Up: Design and History FAQ

11.3.5 Why must 'self' be used explicitly in method definitions and calls?
--------------------------------------------------------------------------

The idea was borrowed from Modula-3.  It turns out to be very useful,
for a variety of reasons.

  First, it's more obvious that you are using a method or instance
attribute instead of a local variable.  Reading `self.x' or
`self.meth()' makes it absolutely clear that an instance variable or
method is used even if you don't know the class definition by heart.
In C++, you can sort of tell by the lack of a local variable
declaration (assuming globals are rare or easily recognizable) - but in
Python, there are no local variable declarations, so you'd have to look
up the class definition to be sure.  Some C++ and Java coding standards
call for instance attributes to have an `m_' prefix, so this
explicitness is still useful in those languages, too.

  Second, it means that no special syntax is necessary if you want to
explicitly reference or call the method from a particular class.  In
C++, if you want to use a method from a base class which is overridden
in a derived class, you have to use the `::' operator - in Python you
can write `baseclass.methodname(self, <argument list>)'.  This is
particularly useful for *note __init__(): 375. methods, and in general
in cases where a derived class method wants to extend the base class
method of the same name and thus has to call the base class method
somehow.

  Finally, for instance variables it solves a syntactic problem with
assignment: since local variables in Python are (by definition!) those
variables to which a value is assigned in a function body (and that
aren't explicitly declared global), there has to be some way to tell
the interpreter that an assignment was meant to assign to an instance
variable instead of to a local variable, and it should preferably be
syntactic (for efficiency reasons).  C++ does this through
declarations, but Python doesn't have declarations and it would be a
pity having to introduce them just for this purpose.  Using the
explicit `self.var' solves this nicely.  Similarly, for using instance
variables, having to write `self.var' means that references to
unqualified names inside a method don't have to search the instance's
directories.  To put it another way, local variables and instance
variables live in two different namespaces, and you need to tell Python
which namespace to use.


File: python.info,  Node: Why can't I use an assignment in an expression?,  Next: Why does Python use methods for some functionality e g list index but functions for other e g len list ?,  Prev: Why must 'self' be used explicitly in method definitions and calls?,  Up: Design and History FAQ

11.3.6 Why can't I use an assignment in an expression?
------------------------------------------------------

Many people used to C or Perl complain that they want to use this C
idiom:

    while (line = readline(f)) {
        // do something with line
    }

where in Python you're forced to write this:

    while True:
        line = f.readline()
        if not line:
            break
        ... # do something with line

The reason for not allowing assignment in Python expressions is a
common, hard-to-find bug in those other languages, caused by this
construct:

    if (x = 0) {
        // error handling
    }
    else {
        // code that only works for nonzero x
    }

The error is a simple typo: `x = 0', which assigns 0 to the variable
`x', was written while the comparison `x == 0' is certainly what was
intended.

  Many alternatives have been proposed.  Most are hacks that save some
typing but use arbitrary or cryptic syntax or keywords, and fail the
simple criterion for language change proposals: it should intuitively
suggest the proper meaning to a human reader who has not yet been
introduced to the construct.

  An interesting phenomenon is that most experienced Python programmers
recognize the `while True' idiom and don't seem to be missing the
assignment in expression construct much; it's only newcomers who
express a strong desire to add this to the language.

  There's an alternative way of spelling this that seems attractive but
is generally less robust than the "while True" solution:

    line = f.readline()
    while line:
        ... # do something with line...
        line = f.readline()

The problem with this is that if you change your mind about exactly how
you get the next line (e.g. you want to change it into
`sys.stdin.readline()') you have to remember to change two places in
your program - the second occurrence is hidden at the bottom of the
loop.

  The best approach is to use iterators, making it possible to loop
through objects using the `for' statement.  For example, in the current
version of Python file objects support the iterator protocol, so you
can now write simply:

    for line in f:
        ... # do something with line...



File: python.info,  Node: Why does Python use methods for some functionality e g list index but functions for other e g len list ?,  Next: Why is join a string method instead of a list or tuple method?,  Prev: Why can't I use an assignment in an expression?,  Up: Design and History FAQ

11.3.7 Why does Python use methods for some functionality (e.g. list.index()) but functions for other (e.g. len(list))?
-----------------------------------------------------------------------------------------------------------------------

The major reason is history. Functions were used for those operations
that were generic for a group of types and which were intended to work
even for objects that didn't have methods at all (e.g. tuples).  It is
also convenient to have a function that can readily be applied to an
amorphous collection of objects when you use the functional features of
Python (`map()', `zip()' et al).

  In fact, implementing `len()', `max()', `min()' as a built-in
function is actually less code than implementing them as methods for
each type.  One can quibble about individual cases but it's a part of
Python, and it's too late to make such fundamental changes now. The
functions have to remain to avoid massive code breakage.

     Note: For string operations, Python has moved from external
     functions (the `string' module) to methods.  However, `len()' is
     still a function.


File: python.info,  Node: Why is join a string method instead of a list or tuple method?,  Next: How fast are exceptions?,  Prev: Why does Python use methods for some functionality e g list index but functions for other e g len list ?,  Up: Design and History FAQ

11.3.8 Why is join() a string method instead of a list or tuple method?
-----------------------------------------------------------------------

Strings became much more like other standard types starting in Python
1.6, when methods were added which give the same functionality that has
always been available using the functions of the string module.  Most
of these new methods have been widely accepted, but the one which
appears to make some programmers feel uncomfortable is:

    ", ".join(['1', '2', '4', '8', '16'])

which gives the result:

    "1, 2, 4, 8, 16"

There are two common arguments against this usage.

  The first runs along the lines of: "It looks really ugly using a
method of a string literal (string constant)", to which the answer is
that it might, but a string literal is just a fixed value. If the
methods are to be allowed on names bound to strings there is no logical
reason to make them unavailable on literals.

  The second objection is typically cast as: "I am really telling a
sequence to join its members together with a string constant".  Sadly,
you aren't.  For some reason there seems to be much less difficulty
with having *note split(): 8bd. as a string method, since in that case
it is easy to see that

    "1, 2, 4, 8, 16".split(", ")

is an instruction to a string literal to return the substrings
delimited by the given separator (or, by default, arbitrary runs of
white space).  In this case a Unicode string returns a list of Unicode
strings, an ASCII string returns a list of ASCII strings, and everyone
is happy.

  *note join(): 8a2. is a string method because in using it you are
telling the separator string to iterate over a sequence of strings and
insert itself between adjacent elements.  This method can be used with
any argument which obeys the rules for sequence objects, including any
new classes you might define yourself.

  Because this is a string method it can work for Unicode strings as
well as plain ASCII strings.  If `join()' were a method of the sequence
types then the sequence types would have to decide which type of string
to return depending on the type of the separator.

  If none of these arguments persuade you, then for the moment you can
continue to use the `join()' function from the string module, which
allows you to write

    string.join(['1', '2', '4', '8', '16'], ", ")



File: python.info,  Node: How fast are exceptions?,  Next: Why isn't there a switch or case statement in Python?,  Prev: Why is join a string method instead of a list or tuple method?,  Up: Design and History FAQ

11.3.9 How fast are exceptions?
-------------------------------

A try/except block is extremely efficient if no exceptions are raised.
Actually catching an exception is expensive.  In versions of Python
prior to 2.0 it was common to use this idiom:

    try:
        value = mydict[key]
    except KeyError:
        mydict[key] = getvalue(key)
        value = mydict[key]

This only made sense when you expected the dict to have the key almost
all the time.  If that wasn't the case, you coded it like this:

    if key in mydict:
        value = mydict[key]
    else:
        value = mydict[key] = getvalue(key)


     Note: In Python 2.0 and higher, you can code this as `value =
     mydict.setdefault(key, getvalue(key))'.


File: python.info,  Node: Why isn't there a switch or case statement in Python?,  Next: Can't you emulate threads in the interpreter instead of relying on an OS-specific thread implementation?,  Prev: How fast are exceptions?,  Up: Design and History FAQ

11.3.10 Why isn't there a switch or case statement in Python?
-------------------------------------------------------------

You can do this easily enough with a sequence of `if... elif... elif...
else'.  There have been some proposals for switch statement syntax, but
there is no consensus (yet) on whether and how to do range tests.  See PEP
275(1) for complete details and the current status.

  For cases where you need to choose from a very large number of
possibilities, you can create a dictionary mapping case values to
functions to call.  For example:

    def function_1(...):
        ...

    functions = {'a': function_1,
                 'b': function_2,
                 'c': self.method_1, ...}

    func = functions[value]
    func()

For calling methods on objects, you can simplify yet further by using
the *note getattr(): 85f. built-in to retrieve methods with a
particular name:

    def visit_a(self, ...):
        ...
    ...

    def dispatch(self, value):
        method_name = 'visit_' + str(value)
        method = getattr(self, method_name)
        method()

It's suggested that you use a prefix for the method names, such as
`visit_' in this example.  Without such a prefix, if values are coming
from an untrusted source, an attacker would be able to call any method
on your object.

  ---------- Footnotes ----------

  (1) http://www.python.org/dev/peps/pep-0275


File: python.info,  Node: Can't you emulate threads in the interpreter instead of relying on an OS-specific thread implementation?,  Next: Why can't lambda forms contain statements?,  Prev: Why isn't there a switch or case statement in Python?,  Up: Design and History FAQ

11.3.11 Can't you emulate threads in the interpreter instead of relying on an OS-specific thread implementation?
----------------------------------------------------------------------------------------------------------------

Answer 1: Unfortunately, the interpreter pushes at least one C stack
frame for each Python stack frame.  Also, extensions can call back into
Python at almost random moments.  Therefore, a complete threads
implementation requires thread support for C.

  Answer 2: Fortunately, there is Stackless Python(1), which has a
completely redesigned interpreter loop that avoids the C stack.

  ---------- Footnotes ----------

  (1) http://www.stackless.com


File: python.info,  Node: Why can't lambda forms contain statements?,  Next: Can Python be compiled to machine code C or some other language?,  Prev: Can't you emulate threads in the interpreter instead of relying on an OS-specific thread implementation?,  Up: Design and History FAQ

11.3.12 Why can't lambda forms contain statements?
--------------------------------------------------

Python lambda forms cannot contain statements because Python's syntactic
framework can't handle statements nested inside expressions.  However,
in Python, this is not a serious problem.  Unlike lambda forms in other
languages, where they add functionality, Python lambdas are only a
shorthand notation if you're too lazy to define a function.

  Functions are already first class objects in Python, and can be
declared in a local scope.  Therefore the only advantage of using a
lambda form instead of a locally-defined function is that you don't
need to invent a name for the function - but that's just a local
variable to which the function object (which is exactly the same type
of object that a lambda form yields) is assigned!


File: python.info,  Node: Can Python be compiled to machine code C or some other language?,  Next: How does Python manage memory?,  Prev: Why can't lambda forms contain statements?,  Up: Design and History FAQ

11.3.13 Can Python be compiled to machine code, C or some other language?
-------------------------------------------------------------------------

Not easily.  Python's high level data types, dynamic typing of objects
and run-time invocation of the interpreter (using *note eval(): 359. or
*note exec: 3fd.)  together mean that a "compiled" Python program would
probably consist mostly of calls into the Python run-time system, even
for seemingly simple operations like `x+1'.

  Several projects described in the Python newsgroup or at past Python
conferences(1) have shown that this approach is feasible, although the
speedups reached so far are only modest (e.g. 2x).  Jython uses the
same strategy for compiling to Java bytecode.  (Jim Hugunin has
demonstrated that in combination with whole-program analysis, speedups
of 1000x are feasible for small demo programs.  See the proceedings
from the 1997 Python conference(2) for more information.)

  Internally, Python source code is always translated into a bytecode
representation, and this bytecode is then executed by the Python virtual
machine.  In order to avoid the overhead of repeatedly parsing and
translating modules that rarely change, this byte code is written into
a file whose name ends in ".pyc" whenever a module is parsed.  When the
corresponding .py file is changed, it is parsed and translated again
and the .pyc file is rewritten.

  There is no performance difference once the .pyc file has been
loaded, as the bytecode read from the .pyc file is exactly the same as
the bytecode created by direct translation.  The only difference is
that loading code from a .pyc file is faster than parsing and
translating a .py file, so the presence of precompiled .pyc files
improves the start-up time of Python scripts.  If desired, the
Lib/compileall.py module can be used to create valid .pyc files for a
given set of modules.

  Note that the main script executed by Python, even if its filename
ends in .py, is not compiled to a .pyc file.  It is compiled to
bytecode, but the bytecode is not saved to a file.  Usually main
scripts are quite short, so this doesn't cost much speed.

  There are also several programs which make it easier to intermingle
Python and C code in various ways to increase performance.  See, for
example, Psyco(3), Pyrex(4), PyInline(5), Py2Cmod(6), and Weave(7).

  ---------- Footnotes ----------

  (1) http://python.org/community/workshops/

  (2) http://python.org/workshops/1997-10/proceedings/

  (3) http://psyco.sourceforge.net/

  (4) http://www.cosc.canterbury.ac.nz/~greg/python/Pyrex/

  (5) http://pyinline.sourceforge.net/

  (6) http://sourceforge.net/projects/py2cmod/

  (7) http://www.scipy.org/Weave


File: python.info,  Node: How does Python manage memory?,  Next: Why isn't all memory freed when Python exits?,  Prev: Can Python be compiled to machine code C or some other language?,  Up: Design and History FAQ

11.3.14 How does Python manage memory?
--------------------------------------

The details of Python memory management depend on the implementation.
The standard C implementation of Python uses reference counting to
detect inaccessible objects, and another mechanism to collect reference
cycles, periodically executing a cycle detection algorithm which looks
for inaccessible cycles and deletes the objects involved. The *note gc:
db. module provides functions to perform a garbage collection, obtain
debugging statistics, and tune the collector's parameters.

  Jython relies on the Java runtime so the JVM's garbage collector is
used.  This difference can cause some subtle porting problems if your
Python code depends on the behavior of the reference counting
implementation.

  Sometimes objects get stuck in tracebacks temporarily and hence are
not deallocated when you might expect.  Clear the tracebacks with:

    import sys
    sys.exc_clear()
    sys.exc_traceback = sys.last_traceback = None

Tracebacks are used for reporting errors, implementing debuggers and
related things.  They contain a portion of the program state extracted
during the handling of an exception (usually the most recent exception).

  In the absence of circularities and tracebacks, Python programs do
not need to manage memory explicitly.

  Why doesn't Python use a more traditional garbage collection scheme?
For one thing, this is not a C standard feature and hence it's not
portable.  (Yes, we know about the Boehm GC library.  It has bits of
assembler code for _most_ common platforms, not for all of them, and
although it is mostly transparent, it isn't completely transparent;
patches are required to get Python to work with it.)

  Traditional GC also becomes a problem when Python is embedded into
other applications.  While in a standalone Python it's fine to replace
the standard malloc() and free() with versions provided by the GC
library, an application embedding Python may want to have its _own_
substitute for malloc() and free(), and may not want Python's.  Right
now, Python works with anything that implements malloc() and free()
properly.

  In Jython, the following code (which is fine in CPython) will
probably run out of file descriptors long before it runs out of memory:

    for file in very_long_list_of_files:
        f = open(file)
        c = f.read(1)

Using the current reference counting and destructor scheme, each new
assignment to f closes the previous file.  Using GC, this is not
guaranteed.  If you want to write code that will work with any Python
implementation, you should explicitly close the file or use the *note
with: 1bd. statement; this will work regardless of GC:

    for file in very_long_list_of_files:
        with open(file) as f:
            c = f.read(1)



File: python.info,  Node: Why isn't all memory freed when Python exits?,  Next: Why are there separate tuple and list data types?,  Prev: How does Python manage memory?,  Up: Design and History FAQ

11.3.15 Why isn't all memory freed when Python exits?
-----------------------------------------------------

Objects referenced from the global namespaces of Python modules are not
always deallocated when Python exits.  This may happen if there are
circular references.  There are also certain bits of memory that are
allocated by the C library that are impossible to free (e.g. a tool
like Purify will complain about these).  Python is, however, aggressive
about cleaning up memory on exit and does try to destroy every single
object.

  If you want to force Python to delete certain things on deallocation
use the *note atexit: 12. module to run a function that will force
those deletions.


File: python.info,  Node: Why are there separate tuple and list data types?,  Next: How are lists implemented?,  Prev: Why isn't all memory freed when Python exits?,  Up: Design and History FAQ

11.3.16 Why are there separate tuple and list data types?
---------------------------------------------------------

Lists and tuples, while similar in many respects, are generally used in
fundamentally different ways.  Tuples can be thought of as being
similar to Pascal records or C structs; they're small collections of
related data which may be of different types which are operated on as a
group.  For example, a Cartesian coordinate is appropriately
represented as a tuple of two or three numbers.

  Lists, on the other hand, are more like arrays in other languages.
They tend to hold a varying number of objects all of which have the
same type and which are operated on one-by-one.  For example,
`os.listdir('.')' returns a list of strings representing the files in
the current directory.  Functions which operate on this output would
generally not break if you added another file or two to the directory.

  Tuples are immutable, meaning that once a tuple has been created, you
can't replace any of its elements with a new value.  Lists are mutable,
meaning that you can always change a list's elements.  Only immutable
elements can be used as dictionary keys, and hence only tuples and not
lists can be used as keys.


File: python.info,  Node: How are lists implemented?,  Next: How are dictionaries implemented?,  Prev: Why are there separate tuple and list data types?,  Up: Design and History FAQ

11.3.17 How are lists implemented?
----------------------------------

Python's lists are really variable-length arrays, not Lisp-style linked
lists.  The implementation uses a contiguous array of references to
other objects, and keeps a pointer to this array and the array's length
in a list head structure.

  This makes indexing a list `a[i]' an operation whose cost is
independent of the size of the list or the value of the index.

  When items are appended or inserted, the array of references is
resized.  Some cleverness is applied to improve the performance of
appending items repeatedly; when the array must be grown, some extra
space is allocated so the next few times don't require an actual resize.


File: python.info,  Node: How are dictionaries implemented?,  Next: Why must dictionary keys be immutable?,  Prev: How are lists implemented?,  Up: Design and History FAQ

11.3.18 How are dictionaries implemented?
-----------------------------------------

Python's dictionaries are implemented as resizable hash tables.
Compared to B-trees, this gives better performance for lookup (the most
common operation by far) under most circumstances, and the
implementation is simpler.

  Dictionaries work by computing a hash code for each key stored in the
dictionary using the *note hash(): 6f8. built-in function.  The hash
code varies widely depending on the key; for example, "Python" hashes
to -539294296 while "python", a string that differs by a single bit,
hashes to 1142331976.  The hash code is then used to calculate a
location in an internal array where the value will be stored.  Assuming
that you're storing keys that all have different hash values, this
means that dictionaries take constant time - O(1), in computer science
notation - to retrieve a key.  It also means that no sorted order of
the keys is maintained, and traversing the array as the `.keys()' and
`.items()' do will output the dictionary's content in some arbitrary
jumbled order.


File: python.info,  Node: Why must dictionary keys be immutable?,  Next: Why doesn't list sort return the sorted list?,  Prev: How are dictionaries implemented?,  Up: Design and History FAQ

11.3.19 Why must dictionary keys be immutable?
----------------------------------------------

The hash table implementation of dictionaries uses a hash value
calculated from the key value to find the key.  If the key were a
mutable object, its value could change, and thus its hash could also
change.  But since whoever changes the key object can't tell that it
was being used as a dictionary key, it can't move the entry around in
the dictionary.  Then, when you try to look up the same object in the
dictionary it won't be found because its hash value is different.  If
you tried to look up the old value it wouldn't be found either, because
the value of the object found in that hash bin would be different.

  If you want a dictionary indexed with a list, simply convert the list
to a tuple first; the function `tuple(L)' creates a tuple with the same
entries as the list `L'.  Tuples are immutable and can therefore be
used as dictionary keys.

  Some unacceptable solutions that have been proposed:

   - Hash lists by their address (object ID).  This doesn't work
     because if you construct a new list with the same value it won't
     be found; e.g.:

         mydict = {[1, 2]: '12'}
         print mydict[[1, 2]]

     would raise a KeyError exception because the id of the `[1, 2]'
     used in the second line differs from that in the first line.  In
     other words, dictionary keys should be compared using `==', not
     using *note is: 6dc.

   - Make a copy when using a list as a key.  This doesn't work because
     the list, being a mutable object, could contain a reference to
     itself, and then the copying code would run into an infinite loop.

   - Allow lists as keys but tell the user not to modify them.  This
     would allow a class of hard-to-track bugs in programs when you
     forgot or modified a list by accident. It also invalidates an
     important invariant of dictionaries: every value in `d.keys()' is
     usable as a key of the dictionary.

   - Mark lists as read-only once they are used as a dictionary key.
     The problem is that it's not just the top-level object that could
     change its value; you could use a tuple containing a list as a
     key.  Entering anything as a key into a dictionary would require
     marking all objects reachable from there as read-only - and again,
     self-referential objects could cause an infinite loop.

  There is a trick to get around this if you need to, but use it at
your own risk: You can wrap a mutable structure inside a class instance
which has both a *note __eq__(): 219. and a *note __hash__(): 32e.
method.  You must then make sure that the hash value for all such
wrapper objects that reside in a dictionary (or other hash based
structure), remain fixed while the object is in the dictionary (or
other structure).

    class ListWrapper:
        def __init__(self, the_list):
            self.the_list = the_list
        def __eq__(self, other):
            return self.the_list == other.the_list
        def __hash__(self):
            l = self.the_list
            result = 98767 - len(l)*555
            for i, el in enumerate(l):
                try:
                    result = result + (hash(el) % 9999999) * 1001 + i
                except Exception:
                    result = (result % 7777777) + i * 333
            return result

Note that the hash computation is complicated by the possibility that
some members of the list may be unhashable and also by the possibility
of arithmetic overflow.

  Furthermore it must always be the case that if `o1 == o2' (ie
`o1.__eq__(o2) is True') then `hash(o1) == hash(o2)' (ie,
`o1.__hash__() == o2.__hash__()'), regardless of whether the object is
in a dictionary or not.  If you fail to meet these restrictions
dictionaries and other hash based structures will misbehave.

  In the case of ListWrapper, whenever the wrapper object is in a
dictionary the wrapped list must not change to avoid anomalies.  Don't
do this unless you are prepared to think hard about the requirements
and the consequences of not meeting them correctly.  Consider yourself
warned.


File: python.info,  Node: Why doesn't list sort return the sorted list?,  Next: How do you specify and enforce an interface spec in Python?,  Prev: Why must dictionary keys be immutable?,  Up: Design and History FAQ

11.3.20 Why doesn't list.sort() return the sorted list?
-------------------------------------------------------

In situations where performance matters, making a copy of the list just
to sort it would be wasteful. Therefore, `list.sort()' sorts the list
in place. In order to remind you of that fact, it does not return the
sorted list.  This way, you won't be fooled into accidentally
overwriting a list when you need a sorted copy but also need to keep
the unsorted version around.

  In Python 2.4 a new built-in function - *note sorted(): 220. - has
been added.  This function creates a new list from a provided iterable,
sorts it and returns it.  For example, here's how to iterate over the
keys of a dictionary in sorted order:

    for key in sorted(mydict):
        ... # do whatever with mydict[key]...



File: python.info,  Node: How do you specify and enforce an interface spec in Python?,  Next: Why are default values shared between objects?,  Prev: Why doesn't list sort return the sorted list?,  Up: Design and History FAQ

11.3.21 How do you specify and enforce an interface spec in Python?
-------------------------------------------------------------------

An interface specification for a module as provided by languages such
as C++ and Java describes the prototypes for the methods and functions
of the module.  Many feel that compile-time enforcement of interface
specifications helps in the construction of large programs.

  Python 2.6 adds an *note abc: 4. module that lets you define Abstract
Base Classes (ABCs).  You can then use *note isinstance(): 317. and
*note issubclass(): 318. to check whether an instance or a class
implements a particular ABC.  The *note collections: 65. module defines
a set of useful ABCs such as `Iterable', `Container', and
`MutableMapping'.

  For Python, many of the advantages of interface specifications can be
obtained by an appropriate test discipline for components.  There is
also a tool, PyChecker, which can be used to find problems due to
subclassing.

  A good test suite for a module can both provide a regression test and
serve as a module interface specification and a set of examples.  Many
Python modules can be run as a script to provide a simple "self test."
Even modules which use complex external interfaces can often be tested
in isolation using trivial "stub" emulations of the external interface.
The *note doctest: b5. and *note unittest: 187. modules or third-party
test frameworks can be used to construct exhaustive test suites that
exercise every line of code in a module.

  An appropriate testing discipline can help build large complex
applications in Python as well as having interface specifications
would.  In fact, it can be better because an interface specification
cannot test certain properties of a program.  For example, the
`append()' method is expected to add new elements to the end of some
internal list; an interface specification cannot test that your
`append()' implementation will actually do this correctly, but it's
trivial to check this property in a test suite.

  Writing test suites is very helpful, and you might want to design
your code with an eye to making it easily tested.  One increasingly
popular technique, test-directed development, calls for writing parts
of the test suite first, before you write any of the actual code.  Of
course Python allows you to be sloppy and not write test cases at all.


File: python.info,  Node: Why are default values shared between objects?,  Next: Why is there no goto?,  Prev: How do you specify and enforce an interface spec in Python?,  Up: Design and History FAQ

11.3.22 Why are default values shared between objects?
------------------------------------------------------

This type of bug commonly bites neophyte programmers.  Consider this
function:

    def foo(mydict={}):  # Danger: shared reference to one dict for all calls
        ... compute something ...
        mydict[key] = value
        return mydict

The first time you call this function, `mydict' contains a single item.
The second time, `mydict' contains two items because when `foo()' begins
executing, `mydict' starts out with an item already in it.

  It is often expected that a function call creates new objects for
default values. This is not what happens. Default values are created
exactly once, when the function is defined.  If that object is changed,
like the dictionary in this example, subsequent calls to the function
will refer to this changed object.

  By definition, immutable objects such as numbers, strings, tuples,
and `None', are safe from change. Changes to mutable objects such as
dictionaries, lists, and class instances can lead to confusion.

  Because of this feature, it is good programming practice to not use
mutable objects as default values.  Instead, use `None' as the default
value and inside the function, check if the parameter is `None' and
create a new list/dictionary/whatever if it is.  For example, don't
write:

    def foo(mydict={}):
        ...

but:

    def foo(mydict=None):
        if mydict is None:
            mydict = {}  # create a new dict for local namespace

This feature can be useful.  When you have a function that's
time-consuming to compute, a common technique is to cache the
parameters and the resulting value of each call to the function, and
return the cached value if the same value is requested again.  This is
called "memoizing", and can be implemented like this:

    # Callers will never provide a third parameter for this function.
    def expensive(arg1, arg2, _cache={}):
        if (arg1, arg2) in _cache:
            return _cache[(arg1, arg2)]

        # Calculate the value
        result = ... expensive computation ...
        _cache[(arg1, arg2)] = result           # Store result in the cache
        return result

You could use a global variable containing a dictionary instead of the
default value; it's a matter of taste.


File: python.info,  Node: Why is there no goto?,  Next: Why can't raw strings r-strings end with a backslash?,  Prev: Why are default values shared between objects?,  Up: Design and History FAQ

11.3.23 Why is there no goto?
-----------------------------

You can use exceptions to provide a "structured goto" that even works
across function calls.  Many feel that exceptions can conveniently
emulate all reasonable uses of the "go" or "goto" constructs of C,
Fortran, and other languages.  For example:

    class label: pass  # declare a label

    try:
         ...
         if condition: raise label()  # goto label
         ...
    except label:  # where to goto
         pass
    ...

This doesn't allow you to jump into the middle of a loop, but that's
usually considered an abuse of goto anyway.  Use sparingly.


File: python.info,  Node: Why can't raw strings r-strings end with a backslash?,  Next: Why doesn't Python have a "with" statement for attribute assignments?,  Prev: Why is there no goto?,  Up: Design and History FAQ

11.3.24 Why can't raw strings (r-strings) end with a backslash?
---------------------------------------------------------------

More precisely, they can't end with an odd number of backslashes: the
unpaired backslash at the end escapes the closing quote character,
leaving an unterminated string.

  Raw strings were designed to ease creating input for processors
(chiefly regular expression engines) that want to do their own
backslash escape processing. Such processors consider an unmatched
trailing backslash to be an error anyway, so raw strings disallow that.
In return, they allow you to pass on the string quote character by
escaping it with a backslash.  These rules work well when r-strings are
used for their intended purpose.

  If you're trying to build Windows pathnames, note that all Windows
system calls accept forward slashes too:

    f = open("/mydir/file.txt")  # works fine!

If you're trying to build a pathname for a DOS command, try e.g. one of

    dir = r"\this\is\my\dos\dir" "\\"
    dir = r"\this\is\my\dos\dir\ "[:-1]
    dir = "\\this\\is\\my\\dos\\dir\\"



File: python.info,  Node: Why doesn't Python have a "with" statement for attribute assignments?,  Next: Why are colons required for the if/while/def/class statements?,  Prev: Why can't raw strings r-strings end with a backslash?,  Up: Design and History FAQ

11.3.25 Why doesn't Python have a "with" statement for attribute assignments?
-----------------------------------------------------------------------------

Python has a 'with' statement that wraps the execution of a block,
calling code on the entrance and exit from the block.  Some language
have a construct that looks like this:

    with obj:
        a = 1               # equivalent to obj.a = 1
        total = total + 1   # obj.total = obj.total + 1

In Python, such a construct would be ambiguous.

  Other languages, such as Object Pascal, Delphi, and C++, use static
types, so it's possible to know, in an unambiguous way, what member is
being assigned to. This is the main point of static typing - the
compiler _always_ knows the scope of every variable at compile time.

  Python uses dynamic types. It is impossible to know in advance which
attribute will be referenced at runtime. Member attributes may be added
or removed from objects on the fly. This makes it impossible to know,
from a simple reading, what attribute is being referenced: a local one,
a global one, or a member attribute?

  For instance, take the following incomplete snippet:

    def foo(a):
        with a:
            print x

The snippet assumes that "a" must have a member attribute called "x".
However, there is nothing in Python that tells the interpreter this.
What should happen if "a" is, let us say, an integer?  If there is a
global variable named "x", will it be used inside the with block?  As
you see, the dynamic nature of Python makes such choices much harder.

  The primary benefit of "with" and similar language features
(reduction of code volume) can, however, easily be achieved in Python
by assignment.  Instead of:

    function(args).mydict[index][index].a = 21
    function(args).mydict[index][index].b = 42
    function(args).mydict[index][index].c = 63

write this:

    ref = function(args).mydict[index][index]
    ref.a = 21
    ref.b = 42
    ref.c = 63

This also has the side-effect of increasing execution speed because name
bindings are resolved at run-time in Python, and the second version
only needs to perform the resolution once.


File: python.info,  Node: Why are colons required for the if/while/def/class statements?,  Next: Why does Python allow commas at the end of lists and tuples?,  Prev: Why doesn't Python have a "with" statement for attribute assignments?,  Up: Design and History FAQ

11.3.26 Why are colons required for the if/while/def/class statements?
----------------------------------------------------------------------

The colon is required primarily to enhance readability (one of the
results of the experimental ABC language).  Consider this:

    if a == b
        print a

versus

    if a == b:
        print a

Notice how the second one is slightly easier to read.  Notice further
how a colon sets off the example in this FAQ answer; it's a standard
usage in English.

  Another minor reason is that the colon makes it easier for editors
with syntax highlighting; they can look for colons to decide when
indentation needs to be increased instead of having to do a more
elaborate parsing of the program text.


File: python.info,  Node: Why does Python allow commas at the end of lists and tuples?,  Prev: Why are colons required for the if/while/def/class statements?,  Up: Design and History FAQ

11.3.27 Why does Python allow commas at the end of lists and tuples?
--------------------------------------------------------------------

Python lets you add a trailing comma at the end of lists, tuples, and
dictionaries:

    [1, 2, 3,]
    ('a', 'b', 'c',)
    d = {
        "A": [1, 5],
        "B": [6, 7],  # last trailing comma is optional but good style
    }

There are several reasons to allow this.

  When you have a literal value for a list, tuple, or dictionary spread
across multiple lines, it's easier to add more elements because you
don't have to remember to add a comma to the previous line.  The lines
can also be reordered without creating a syntax error.

  Accidentally omitting the comma can lead to errors that are hard to
diagnose.  For example:

    x = [
      "fee",
      "fie"
      "foo",
      "fum"
    ]

This list looks like it has four elements, but it actually contains
three: "fee", "fiefoo" and "fum".  Always adding the comma avoids this
source of error.

  Allowing the trailing comma may also make programmatic code
generation easier.


File: python.info,  Node: Library and Extension FAQ,  Next: Extending/Embedding FAQ,  Prev: Design and History FAQ,  Up: Python Frequently Asked Questions

11.4 Library and Extension FAQ
==============================

* Menu:

* General Library Questions::
* Common tasks::
* Threads::
* Input and Output: Input and Output<2>.
* Network/Internet Programming::
* Databases::
* Mathematics and Numerics::

General Library Questions

* How do I find a module or application to perform task X?::
* Where is the math.py (socket.py, regex.py, etc.) source file?: Where is the math py socket py regex py etc source file?.
* How do I make a Python script executable on Unix?::
* Is there a curses/termcap package for Python?::
* Is there an equivalent to C's onexit() in Python?: Is there an equivalent to C's onexit in Python?.
* Why don't my signal handlers work?::

Common tasks

* How do I test a Python program or component?::
* How do I create documentation from doc strings?::
* How do I get a single keypress at a time?::

Threads

* How do I program using threads?::
* None of my threads seem to run; why?: None of my threads seem to run why?.
* How do I parcel out work among a bunch of worker threads?::
* What kinds of global value mutation are thread-safe?::
* Can't we get rid of the Global Interpreter Lock?::

Input and Output

* How do I delete a file? (And other file questions...): How do I delete a file? And other file questions.
* How do I copy a file?::
* How do I read (or write) binary data?: How do I read or write binary data?.
* I can't seem to use os.read() on a pipe created with os.popen(); why?: I can't seem to use os read on a pipe created with os popen ; why?.
* How do I run a subprocess with pipes connected to both input and output?::
* How do I access the serial (RS232) port?: How do I access the serial RS232 port?.
* Why doesn't closing sys.stdout (stdin, stderr) really close it?: Why doesn't closing sys stdout stdin stderr really close it?.

Network/Internet Programming

* What WWW tools are there for Python?::
* How can I mimic CGI form submission (METHOD=POST)?: How can I mimic CGI form submission METHOD=POST ?.
* What module should I use to help with generating HTML?::
* How do I send mail from a Python script?::
* How do I avoid blocking in the connect() method of a socket?: How do I avoid blocking in the connect method of a socket?.

Databases

* Are there any interfaces to database packages in Python?::
* How do you implement persistent objects in Python?::
* Why is cPickle so slow?::
* If my program crashes with a bsddb (or anydbm) database open, it gets corrupted. How come?: If my program crashes with a bsddb or anydbm database open it gets corrupted How come?.
* I tried to open Berkeley DB file, but bsddb produces bsddb.error; (22, 'Invalid argument'). Help! How can I restore my data?: I tried to open Berkeley DB file but bsddb produces bsddb error 22 'Invalid argument' Help! How can I restore my data?.

Mathematics and Numerics

* How do I generate random numbers in Python?::


File: python.info,  Node: General Library Questions,  Next: Common tasks,  Up: Library and Extension FAQ

11.4.1 General Library Questions
--------------------------------

* Menu:

* How do I find a module or application to perform task X?::
* Where is the math.py (socket.py, regex.py, etc.) source file?: Where is the math py socket py regex py etc source file?.
* How do I make a Python script executable on Unix?::
* Is there a curses/termcap package for Python?::
* Is there an equivalent to C's onexit() in Python?: Is there an equivalent to C's onexit in Python?.
* Why don't my signal handlers work?::


File: python.info,  Node: How do I find a module or application to perform task X?,  Next: Where is the math py socket py regex py etc source file?,  Up: General Library Questions

11.4.1.1 How do I find a module or application to perform task X?
.................................................................

Check *note the Library Reference: 4ef. to see if there's a relevant
standard library module.  (Eventually you'll learn what's in the
standard library and will be able to skip this step.)

  For third-party packages, search the Python Package Index(1) or try
Google(2) or another Web search engine.  Searching for "Python" plus a
keyword or two for your topic of interest will usually find something
helpful.

  ---------- Footnotes ----------

  (1) http://pypi.python.org/pypi

  (2) http://www.google.com


File: python.info,  Node: Where is the math py socket py regex py etc source file?,  Next: How do I make a Python script executable on Unix?,  Prev: How do I find a module or application to perform task X?,  Up: General Library Questions

11.4.1.2 Where is the math.py (socket.py, regex.py, etc.) source file?
......................................................................

If you can't find a source file for a module it may be a built-in or
dynamically loaded module implemented in C, C++ or other compiled
language.  In this case you may not have the source file or it may be
something like `mathmodule.c', somewhere in a C source directory (not
on the Python Path).

  There are (at least) three kinds of modules in Python:

  1. modules written in Python (.py);

  2. modules written in C and dynamically loaded (.dll, .pyd, .so, .sl,
     etc);

  3. modules written in C and linked with the interpreter; to get a
     list of these, type:

         import sys
         print sys.builtin_module_names




File: python.info,  Node: How do I make a Python script executable on Unix?,  Next: Is there a curses/termcap package for Python?,  Prev: Where is the math py socket py regex py etc source file?,  Up: General Library Questions

11.4.1.3 How do I make a Python script executable on Unix?
..........................................................

You need to do two things: the script file's mode must be executable
and the first line must begin with `#!' followed by the path of the
Python interpreter.

  The first is done by executing `chmod +x scriptfile' or perhaps
`chmod 755 scriptfile'.

  The second can be done in a number of ways.  The most straightforward
way is to write

    #!/usr/local/bin/python

as the very first line of your file, using the pathname for where the
Python interpreter is installed on your platform.

  If you would like the script to be independent of where the Python
interpreter lives, you can use the *env* program.  Almost all Unix
variants support the following, assuming the Python interpreter is in a
directory on the user's `PATH':

    #!/usr/bin/env python

_Don't_ do this for CGI scripts.  The `PATH' variable for CGI scripts is
often very minimal, so you need to use the actual absolute pathname of
the interpreter.

  Occasionally, a user's environment is so full that the */usr/bin/env*
program fails; or there's no env program at all.  In that case, you can
try the following hack (due to Alex Rezinsky):

    #! /bin/sh
    """:"
    exec python $0 ${1+"$@"}
    """

The minor disadvantage is that this defines the script's __doc__ string.
However, you can fix that by adding

    __doc__ = """...Whatever..."""



File: python.info,  Node: Is there a curses/termcap package for Python?,  Next: Is there an equivalent to C's onexit in Python?,  Prev: How do I make a Python script executable on Unix?,  Up: General Library Questions

11.4.1.4 Is there a curses/termcap package for Python?
......................................................

For Unix variants the standard Python source distribution comes with a
curses module in the Modules(1) subdirectory, though it's not compiled
by default.  (Note that this is not available in the Windows
distribution - there is no curses module for Windows.)

  The *note curses: 79. module supports basic curses features as well
as many additional functions from ncurses and SYSV curses such as
colour, alternative character set support, pads, and mouse support.
This means the module isn't compatible with operating systems that only
have BSD curses, but there don't seem to be any currently maintained
OSes that fall into this category.

  For Windows: use the consolelib module(2).

  ---------- Footnotes ----------

  (1) http://hg.python.org/cpython/file/2.7/Modules

  (2) http://effbot.org/zone/console-index.htm


File: python.info,  Node: Is there an equivalent to C's onexit in Python?,  Next: Why don't my signal handlers work?,  Prev: Is there a curses/termcap package for Python?,  Up: General Library Questions

11.4.1.5 Is there an equivalent to C's onexit() in Python?
..........................................................

The *note atexit: 12. module provides a register function that is
similar to C's `onexit()'.


File: python.info,  Node: Why don't my signal handlers work?,  Prev: Is there an equivalent to C's onexit in Python?,  Up: General Library Questions

11.4.1.6 Why don't my signal handlers work?
...........................................

The most common problem is that the signal handler is declared with the
wrong argument list.  It is called as

    handler(signum, frame)

so it should be declared with two arguments:

    def handler(signum, frame):
        ...



File: python.info,  Node: Common tasks,  Next: Threads,  Prev: General Library Questions,  Up: Library and Extension FAQ

11.4.2 Common tasks
-------------------

* Menu:

* How do I test a Python program or component?::
* How do I create documentation from doc strings?::
* How do I get a single keypress at a time?::


File: python.info,  Node: How do I test a Python program or component?,  Next: How do I create documentation from doc strings?,  Up: Common tasks

11.4.2.1 How do I test a Python program or component?
.....................................................

Python comes with two testing frameworks.  The *note doctest: b5.
module finds examples in the docstrings for a module and runs them,
comparing the output with the expected output given in the docstring.

  The *note unittest: 187. module is a fancier testing framework
modelled on Java and Smalltalk testing frameworks.

  To make testing easier, you should use good modular design in your
program.  Your program should have almost all functionality
encapsulated in either functions or class methods - and this sometimes
has the surprising and delightful effect of making the program run
faster (because local variable accesses are faster than global
accesses).  Furthermore the program should avoid depending on mutating
global variables, since this makes testing much more difficult to do.

  The "global main logic" of your program may be as simple as

    if __name__ == "__main__":
        main_logic()

at the bottom of the main module of your program.

  Once your program is organized as a tractable collection of functions
and class behaviours you should write test functions that exercise the
behaviours.  A test suite that automates a sequence of tests can be
associated with each module.  This sounds like a lot of work, but since
Python is so terse and flexible it's surprisingly easy.  You can make
coding much more pleasant and fun by writing your test functions in
parallel with the "production code", since this makes it easy to find
bugs and even design flaws earlier.

  "Support modules" that are not intended to be the main module of a
program may include a self-test of the module.

    if __name__ == "__main__":
        self_test()

Even programs that interact with complex external interfaces may be
tested when the external interfaces are unavailable by using "fake"
interfaces implemented in Python.


File: python.info,  Node: How do I create documentation from doc strings?,  Next: How do I get a single keypress at a time?,  Prev: How do I test a Python program or component?,  Up: Common tasks

11.4.2.2 How do I create documentation from doc strings?
........................................................

The *note pydoc: 13f. module can create HTML from the doc strings in
your Python source code.  An alternative for creating API documentation
purely from docstrings is epydoc(1).  Sphinx(2) can also include
docstring content.

  ---------- Footnotes ----------

  (1) http://epydoc.sf.net/

  (2) http://sphinx.pocoo.org


File: python.info,  Node: How do I get a single keypress at a time?,  Prev: How do I create documentation from doc strings?,  Up: Common tasks

11.4.2.3 How do I get a single keypress at a time?
..................................................

For Unix variants there are several solutions.  It's straightforward to
do this using curses, but curses is a fairly large module to learn.
Here's a solution without curses:

    import termios, fcntl, sys, os
    fd = sys.stdin.fileno()

    oldterm = termios.tcgetattr(fd)
    newattr = termios.tcgetattr(fd)
    newattr[3] = newattr[3] & ~termios.ICANON & ~termios.ECHO
    termios.tcsetattr(fd, termios.TCSANOW, newattr)

    oldflags = fcntl.fcntl(fd, fcntl.F_GETFL)
    fcntl.fcntl(fd, fcntl.F_SETFL, oldflags | os.O_NONBLOCK)

    try:
        while 1:
            try:
                c = sys.stdin.read(1)
                print "Got character", repr(c)
            except IOError: pass
    finally:
        termios.tcsetattr(fd, termios.TCSAFLUSH, oldterm)
        fcntl.fcntl(fd, fcntl.F_SETFL, oldflags)

You need the *note termios: 174. and the *note fcntl: ca. module for
any of this to work, and I've only tried it on Linux, though it should
work elsewhere.  In this code, characters are read and printed one at a
time.

  *note termios.tcsetattr(): 2785. turns off stdin's echoing and
disables canonical mode.  `fcntl.fnctl()' is used to obtain stdin's
file descriptor flags and modify them for non-blocking mode.  Since
reading stdin when it is empty results in an *note IOError: 1f7, this
error is caught and ignored.


File: python.info,  Node: Threads,  Next: Input and Output<2>,  Prev: Common tasks,  Up: Library and Extension FAQ

11.4.3 Threads
--------------

* Menu:

* How do I program using threads?::
* None of my threads seem to run; why?: None of my threads seem to run why?.
* How do I parcel out work among a bunch of worker threads?::
* What kinds of global value mutation are thread-safe?::
* Can't we get rid of the Global Interpreter Lock?::


File: python.info,  Node: How do I program using threads?,  Next: None of my threads seem to run why?,  Up: Threads

11.4.3.1 How do I program using threads?
........................................

Be sure to use the *note threading: 179. module and not the *note
thread: 178. module.  The *note threading: 179. module builds
convenient abstractions on top of the low-level primitives provided by
the *note thread: 178. module.

  Aahz has a set of slides from his threading tutorial that are
helpful; see <http://www.pythoncraft.com/OSCON2001/>.


File: python.info,  Node: None of my threads seem to run why?,  Next: How do I parcel out work among a bunch of worker threads?,  Prev: How do I program using threads?,  Up: Threads

11.4.3.2 None of my threads seem to run: why?
.............................................

As soon as the main thread exits, all threads are killed.  Your main
thread is running too quickly, giving the threads no time to do any
work.

  A simple fix is to add a sleep to the end of the program that's long
enough for all the threads to finish:

    import threading, time

    def thread_task(name, n):
        for i in range(n): print name, i

    for i in range(10):
        T = threading.Thread(target=thread_task, args=(str(i), i))
        T.start()

    time.sleep(10) # <----------------------------!

But now (on many platforms) the threads don't run in parallel, but
appear to run sequentially, one at a time!  The reason is that the OS
thread scheduler doesn't start a new thread until the previous thread
is blocked.

  A simple fix is to add a tiny sleep to the start of the run function:

    def thread_task(name, n):
        time.sleep(0.001) # <---------------------!
        for i in range(n): print name, i

    for i in range(10):
        T = threading.Thread(target=thread_task, args=(str(i), i))
        T.start()

    time.sleep(10)

Instead of trying to guess a good delay value for *note time.sleep():
11cf, it's better to use some kind of semaphore mechanism.  One idea is
to use the *note Queue: 140. module to create a queue object, let each
thread append a token to the queue when it finishes, and let the main
thread read as many tokens from the queue as there are threads.


File: python.info,  Node: How do I parcel out work among a bunch of worker threads?,  Next: What kinds of global value mutation are thread-safe?,  Prev: None of my threads seem to run why?,  Up: Threads

11.4.3.3 How do I parcel out work among a bunch of worker threads?
..................................................................

Use the *note Queue: 140. module to create a queue containing a list of
jobs.  The *note Queue: 5f7. class maintains a list of objects and has
a `.put(obj)' method that adds items to the queue and a `.get()' method
to return them.  The class will take care of the locking necessary to
ensure that each job is handed out exactly once.

  Here's a trivial example:

    import threading, Queue, time

    # The worker thread gets jobs off the queue.  When the queue is empty, it
    # assumes there will be no more work and exits.
    # (Realistically workers will run until terminated.)
    def worker():
        print 'Running worker'
        time.sleep(0.1)
        while True:
            try:
                arg = q.get(block=False)
            except Queue.Empty:
                print 'Worker', threading.currentThread(),
                print 'queue empty'
                break
            else:
                print 'Worker', threading.currentThread(),
                print 'running with argument', arg
                time.sleep(0.5)

    # Create queue
    q = Queue.Queue()

    # Start a pool of 5 workers
    for i in range(5):
        t = threading.Thread(target=worker, name='worker %i' % (i+1))
        t.start()

    # Begin adding work to the queue
    for i in range(50):
        q.put(i)

    # Give threads time to run
    print 'Main thread sleeping'
    time.sleep(5)

When run, this will produce the following output:

    Running worker
    Running worker
    Running worker
    Running worker
    Running worker
    Main thread sleeping
    Worker <Thread(worker 1, started)> running with argument 0
    Worker <Thread(worker 2, started)> running with argument 1
    Worker <Thread(worker 3, started)> running with argument 2
    Worker <Thread(worker 4, started)> running with argument 3
    Worker <Thread(worker 5, started)> running with argument 4
    Worker <Thread(worker 1, started)> running with argument 5
    ...

Consult the module's documentation for more details; the *note Queue:
5f7.  class provides a featureful interface.


File: python.info,  Node: What kinds of global value mutation are thread-safe?,  Next: Can't we get rid of the Global Interpreter Lock?,  Prev: How do I parcel out work among a bunch of worker threads?,  Up: Threads

11.4.3.4 What kinds of global value mutation are thread-safe?
.............................................................

A *note global interpreter lock: 1523. (GIL) is used internally to
ensure that only one thread runs in the Python VM at a time.  In
general, Python offers to switch among threads only between bytecode
instructions; how frequently it switches can be set via *note
sys.setcheckinterval(): 239f.  Each bytecode instruction and therefore
all the C implementation code reached from each instruction is
therefore atomic from the point of view of a Python program.

  In theory, this means an exact accounting requires an exact
understanding of the PVM bytecode implementation.  In practice, it
means that operations on shared variables of built-in data types (ints,
lists, dicts, etc) that "look atomic" really are.

  For example, the following operations are all atomic (L, L1, L2 are
lists, D, D1, D2 are dicts, x, y are objects, i, j are ints):

    L.append(x)
    L1.extend(L2)
    x = L[i]
    x = L.pop()
    L1[i:j] = L2
    L.sort()
    x = y
    x.field = y
    D[x] = y
    D1.update(D2)
    D.keys()

These aren't:

    i = i+1
    L.append(L[-1])
    L[i] = L[j]
    D[x] = D[x] + 1

Operations that replace other objects may invoke those other objects'
*note __del__(): 6f6. method when their reference count reaches zero,
and that can affect things.  This is especially true for the mass
updates to dictionaries and lists.  When in doubt, use a mutex!


File: python.info,  Node: Can't we get rid of the Global Interpreter Lock?,  Prev: What kinds of global value mutation are thread-safe?,  Up: Threads

11.4.3.5 Can't we get rid of the Global Interpreter Lock?
.........................................................

The *note global interpreter lock: 1523. (GIL) is often seen as a
hindrance to Python's deployment on high-end multiprocessor server
machines, because a multi-threaded Python program effectively only uses
one CPU, due to the insistence that (almost) all Python code can only
run while the GIL is held.

  Back in the days of Python 1.5, Greg Stein actually implemented a
comprehensive patch set (the "free threading" patches) that removed the
GIL and replaced it with fine-grained locking.  Unfortunately, even on
Windows (where locks are very efficient) this ran ordinary Python code
about twice as slow as the interpreter using the GIL.  On Linux the
performance loss was even worse because pthread locks aren't as
efficient.

  Since then, the idea of getting rid of the GIL has occasionally come
up but nobody has found a way to deal with the expected slowdown, and
users who don't use threads would not be happy if their code ran at
half the speed.  Greg's free threading patch set has not been kept
up-to-date for later Python versions.

  This doesn't mean that you can't make good use of Python on multi-CPU
machines!  You just have to be creative with dividing the work up
between multiple _processes_ rather than multiple _threads_.  Judicious
use of C extensions will also help; if you use a C extension to perform
a time-consuming task, the extension can release the GIL while the
thread of execution is in the C code and allow other threads to get
some work done.

  It has been suggested that the GIL should be a per-interpreter-state
lock rather than truly global; interpreters then wouldn't be able to
share objects.  Unfortunately, this isn't likely to happen either.  It
would be a tremendous amount of work, because many object
implementations currently have global state.  For example, small
integers and short strings are cached; these caches would have to be
moved to the interpreter state.  Other object types have their own free
list; these free lists would have to be moved to the interpreter state.
And so on.

  And I doubt that it can even be done in finite time, because the same
problem exists for 3rd party extensions.  It is likely that 3rd party
extensions are being written at a faster rate than you can convert them
to store all their global state in the interpreter state.

  And finally, once you have multiple interpreters not sharing any
state, what have you gained over running each interpreter in a separate
process?


File: python.info,  Node: Input and Output<2>,  Next: Network/Internet Programming,  Prev: Threads,  Up: Library and Extension FAQ

11.4.4 Input and Output
-----------------------

* Menu:

* How do I delete a file? (And other file questions...): How do I delete a file? And other file questions.
* How do I copy a file?::
* How do I read (or write) binary data?: How do I read or write binary data?.
* I can't seem to use os.read() on a pipe created with os.popen(); why?: I can't seem to use os read on a pipe created with os popen ; why?.
* How do I run a subprocess with pipes connected to both input and output?::
* How do I access the serial (RS232) port?: How do I access the serial RS232 port?.
* Why doesn't closing sys.stdout (stdin, stderr) really close it?: Why doesn't closing sys stdout stdin stderr really close it?.


File: python.info,  Node: How do I delete a file? And other file questions,  Next: How do I copy a file?,  Up: Input and Output<2>

11.4.4.1 How do I delete a file? (And other file questions...)
..............................................................

Use `os.remove(filename)' or `os.unlink(filename)'; for documentation,
see the *note os: 128. module.  The two functions are identical;
`unlink()' is simply the name of the Unix system call for this function.

  To remove a directory, use *note os.rmdir(): e8e.; use *note
os.mkdir(): 112c. to create one.  `os.makedirs(path)' will create any
intermediate directories in `path' that don't exist.
`os.removedirs(path)' will remove intermediate directories as long as
they're empty; if you want to delete an entire directory tree and its
contents, use *note shutil.rmtree(): e8c.

  To rename a file, use `os.rename(old_path, new_path)'.

  To truncate a file, open it using `f = open(filename, "r+")', and use
`f.truncate(offset)'; offset defaults to the current seek position.
There's also `os.ftruncate(fd, offset)' for files opened with *note
os.open(): 5d5, where _fd_ is the file descriptor (a small integer).

  The *note shutil: 154. module also contains a number of functions to
work on files including *note copyfile(): 249, *note copytree(): 24a,
and *note rmtree(): e8c.


File: python.info,  Node: How do I copy a file?,  Next: How do I read or write binary data?,  Prev: How do I delete a file? And other file questions,  Up: Input and Output<2>

11.4.4.2 How do I copy a file?
..............................

The *note shutil: 154. module contains a *note copyfile(): 249.
function.  Note that on MacOS 9 it doesn't copy the resource fork and
Finder info.


File: python.info,  Node: How do I read or write binary data?,  Next: I can't seem to use os read on a pipe created with os popen ; why?,  Prev: How do I copy a file?,  Up: Input and Output<2>

11.4.4.3 How do I read (or write) binary data?
..............................................

To read or write complex binary data formats, it's best to use the
*note struct: 166.  module.  It allows you to take a string containing
binary data (usually numbers) and convert it to Python objects; and
vice versa.

  For example, the following code reads two 2-byte integers and one
4-byte integer in big-endian format from a file:

    import struct

    f = open(filename, "rb")  # Open in binary mode for portability
    s = f.read(8)
    x, y, z = struct.unpack(">hhl", s)

The '>' in the format string forces big-endian data; the letter 'h'
reads one "short integer" (2 bytes), and 'l' reads one "long integer"
(4 bytes) from the string.

  For data that is more regular (e.g. a homogeneous list of ints or
floats), you can also use the *note array: e. module.


File: python.info,  Node: I can't seem to use os read on a pipe created with os popen ; why?,  Next: How do I run a subprocess with pipes connected to both input and output?,  Prev: How do I read or write binary data?,  Up: Input and Output<2>

11.4.4.4 I can't seem to use os.read() on a pipe created with os.popen(); why?
..............................................................................

*note os.read(): 8f4. is a low-level function which takes a file
descriptor, a small integer representing the opened file.  *note
os.popen(): 6ed. creates a high-level file object, the same type
returned by the built-in *note open(): 2d3. function.  Thus, to read
_n_ bytes from a pipe _p_ created with *note os.popen(): 6ed, you need
to use `p.read(n)'.


File: python.info,  Node: How do I run a subprocess with pipes connected to both input and output?,  Next: How do I access the serial RS232 port?,  Prev: I can't seem to use os read on a pipe created with os popen ; why?,  Up: Input and Output<2>

11.4.4.5 How do I run a subprocess with pipes connected to both input and output?
.................................................................................

Use the *note popen2: 134. module.  For example:

    import popen2
    fromchild, tochild = popen2.popen2("command")
    tochild.write("input\n")
    tochild.flush()
    output = fromchild.readline()

Warning: in general it is unwise to do this because you can easily
cause a deadlock where your process is blocked waiting for output from
the child while the child is blocked waiting for input from you.  This
can be caused by the parent expecting the child to output more text
than it does or by data being stuck in stdio buffers due to lack of
flushing.  The Python parent can of course explicitly flush the data it
sends to the child before it reads any output, but if the child is a
naive C program it may have been written to never explicitly flush its
output, even if it is interactive, since flushing is normally automatic.

  Note that a deadlock is also possible if you use `popen3()' to read
stdout and stderr. If one of the two is too large for the internal
buffer (increasing the buffer size does not help) and you `read()' the
other one first, there is a deadlock, too.

  Note on a bug in popen2: unless your program calls `wait()' or
`waitpid()', finished child processes are never removed, and eventually
calls to popen2 will fail because of a limit on the number of child
processes.  Calling *note os.waitpid(): 1163. with the *note
os.WNOHANG: 116b. option can prevent this; a good place to insert such
a call would be before calling `popen2' again.

  In many cases, all you really need is to run some data through a
command and get the result back.  Unless the amount of data is very
large, the easiest way to do this is to write it to a temporary file
and run the command with that temporary file as input.  The standard
module *note tempfile: 173. exports a *note mktemp(): e6b. function to
generate unique temporary file names.

    import tempfile
    import os

    class Popen3:
        """
        This is a deadlock-safe version of popen that returns
        an object with errorlevel, out (a string) and err (a string).
        (capturestderr may not work under windows.)
        Example: print Popen3('grep spam','\n\nhere spam\n\n').out
        """
        def __init__(self,command,input=None,capturestderr=None):
            outfile=tempfile.mktemp()
            command="( %s ) > %s" % (command,outfile)
            if input:
                infile=tempfile.mktemp()
                open(infile,"w").write(input)
                command=command+" <"+infile
            if capturestderr:
                errfile=tempfile.mktemp()
                command=command+" 2>"+errfile
            self.errorlevel=os.system(command) >> 8
            self.out=open(outfile,"r").read()
            os.remove(outfile)
            if input:
                os.remove(infile)
            if capturestderr:
                self.err=open(errfile,"r").read()
                os.remove(errfile)

Note that many interactive programs (e.g. vi) don't work well with pipes
substituted for standard input and output.  You will have to use pseudo
ttys ("ptys") instead of pipes. Or you can use a Python interface to
Don Libes' "expect" library.  A Python extension that interfaces to
expect is called "expy" and available from
<http://expectpy.sourceforge.net>.  A pure Python solution that works
like expect is pexpect(1).

  ---------- Footnotes ----------

  (1) http://pypi.python.org/pypi/pexpect/


File: python.info,  Node: How do I access the serial RS232 port?,  Next: Why doesn't closing sys stdout stdin stderr really close it?,  Prev: How do I run a subprocess with pipes connected to both input and output?,  Up: Input and Output<2>

11.4.4.6 How do I access the serial (RS232) port?
.................................................

For Win32, POSIX (Linux, BSD, etc.), Jython:

     <http://pyserial.sourceforge.net>

  For Unix, see a Usenet post by Mitch Chapman:

     <http://groups.google.com/groups?selm=34A04430.CF9@ohioee.com>


File: python.info,  Node: Why doesn't closing sys stdout stdin stderr really close it?,  Prev: How do I access the serial RS232 port?,  Up: Input and Output<2>

11.4.4.7 Why doesn't closing sys.stdout (stdin, stderr) really close it?
........................................................................

Python file objects are a high-level layer of abstraction on top of C
streams, which in turn are a medium-level layer of abstraction on top
of (among other things) low-level C file descriptors.

  For most file objects you create in Python via the built-in `file'
constructor, `f.close()' marks the Python file object as being closed
from Python's point of view, and also arranges to close the underlying
C stream.  This also happens automatically in `f''s destructor, when
`f' becomes garbage.

  But stdin, stdout and stderr are treated specially by Python, because
of the special status also given to them by C.  Running
`sys.stdout.close()' marks the Python-level file object as being
closed, but does _not_ close the associated C stream.

  To close the underlying C stream for one of these three, you should
first be sure that's what you really want to do (e.g., you may confuse
extension modules trying to do I/O).  If it is, use os.close:

    os.close(0)   # close C's stdin stream
    os.close(1)   # close C's stdout stream
    os.close(2)   # close C's stderr stream



File: python.info,  Node: Network/Internet Programming,  Next: Databases,  Prev: Input and Output<2>,  Up: Library and Extension FAQ

11.4.5 Network/Internet Programming
-----------------------------------

* Menu:

* What WWW tools are there for Python?::
* How can I mimic CGI form submission (METHOD=POST)?: How can I mimic CGI form submission METHOD=POST ?.
* What module should I use to help with generating HTML?::
* How do I send mail from a Python script?::
* How do I avoid blocking in the connect() method of a socket?: How do I avoid blocking in the connect method of a socket?.


File: python.info,  Node: What WWW tools are there for Python?,  Next: How can I mimic CGI form submission METHOD=POST ?,  Up: Network/Internet Programming

11.4.5.1 What WWW tools are there for Python?
.............................................

See the chapters titled *note Internet Protocols and Support: 1baf. and
*note Internet Data Handling: 17a0. in the Library Reference Manual.
Python has many modules that will help you build server-side and
client-side web systems.

  A summary of available frameworks is maintained by Paul Boddie at
<http://wiki.python.org/moin/WebProgramming> .

  Cameron Laird maintains a useful set of pages about Python web
technologies at <http://phaseit.net/claird/comp.lang.python/web_python>.


File: python.info,  Node: How can I mimic CGI form submission METHOD=POST ?,  Next: What module should I use to help with generating HTML?,  Prev: What WWW tools are there for Python?,  Up: Network/Internet Programming

11.4.5.2 How can I mimic CGI form submission (METHOD=POST)?
...........................................................

I would like to retrieve web pages that are the result of POSTing a
form. Is there existing code that would let me do this easily?

  Yes. Here's a simple example that uses httplib:

    #!/usr/local/bin/python

    import httplib, sys, time

    ### build the query string
    qs = "First=Josephine&MI=Q&Last=Public"

    ### connect and send the server a path
    httpobj = httplib.HTTP('www.some-server.out-there', 80)
    httpobj.putrequest('POST', '/cgi-bin/some-cgi-script')
    ### now generate the rest of the HTTP headers...
    httpobj.putheader('Accept', '*/*')
    httpobj.putheader('Connection', 'Keep-Alive')
    httpobj.putheader('Content-type', 'application/x-www-form-urlencoded')
    httpobj.putheader('Content-length', '%d' % len(qs))
    httpobj.endheaders()
    httpobj.send(qs)
    ### find out what the server said in response...
    reply, msg, hdrs = httpobj.getreply()
    if reply != 200:
        sys.stdout.write(httpobj.getfile().read())

Note that in general for percent-encoded POST operations, query strings
must be quoted using *note urllib.urlencode(): 1c1c.  For example, to
send `name=Guy Steele, Jr.':

    >>> import urllib
    >>> urllib.urlencode({'name': 'Guy Steele, Jr.'})
    'name=Guy+Steele%2C+Jr.'



File: python.info,  Node: What module should I use to help with generating HTML?,  Next: How do I send mail from a Python script?,  Prev: How can I mimic CGI form submission METHOD=POST ?,  Up: Network/Internet Programming

11.4.5.3 What module should I use to help with generating HTML?
...............................................................

You can find a collection of useful links on the Web Programming wiki
page(1).

  ---------- Footnotes ----------

  (1) http://wiki.python.org/moin/WebProgramming


File: python.info,  Node: How do I send mail from a Python script?,  Next: How do I avoid blocking in the connect method of a socket?,  Prev: What module should I use to help with generating HTML?,  Up: Network/Internet Programming

11.4.5.4 How do I send mail from a Python script?
.................................................

Use the standard library module *note smtplib: 15a.

  Here's a very simple interactive mail sender that uses it.  This
method will work on any host that supports an SMTP listener.

    import sys, smtplib

    fromaddr = raw_input("From: ")
    toaddrs  = raw_input("To: ").split(',')
    print "Enter message, end with ^D:"
    msg = ''
    while True:
        line = sys.stdin.readline()
        if not line:
            break
        msg += line

    # The actual mail send
    server = smtplib.SMTP('localhost')
    server.sendmail(fromaddr, toaddrs, msg)
    server.quit()

A Unix-only alternative uses sendmail.  The location of the sendmail
program varies between systems; sometimes it is `/usr/lib/sendmail',
sometimes `/usr/sbin/sendmail'.  The sendmail manual page will help you
out.  Here's some sample code:

    SENDMAIL = "/usr/sbin/sendmail" # sendmail location
    import os
    p = os.popen("%s -t -i" % SENDMAIL, "w")
    p.write("To: receiver@example.com\n")
    p.write("Subject: test\n")
    p.write("\n") # blank line separating headers from body
    p.write("Some text\n")
    p.write("some more text\n")
    sts = p.close()
    if sts != 0:
        print "Sendmail exit status", sts



File: python.info,  Node: How do I avoid blocking in the connect method of a socket?,  Prev: How do I send mail from a Python script?,  Up: Network/Internet Programming

11.4.5.5 How do I avoid blocking in the connect() method of a socket?
.....................................................................

The select module is commonly used to help with asynchronous I/O on
sockets.

  To prevent the TCP connect from blocking, you can set the socket to
non-blocking mode.  Then when you do the `connect()', you will either
connect immediately (unlikely) or get an exception that contains the
error number as `.errno'.  `errno.EINPROGRESS' indicates that the
connection is in progress, but hasn't finished yet.  Different OSes
will return different values, so you're going to have to check what's
returned on your system.

  You can use the `connect_ex()' method to avoid creating an exception.
It will just return the errno value.  To poll, you can call
`connect_ex()' again later - 0 or `errno.EISCONN' indicate that you're
connected - or you can pass this socket to select to check if it's
writable.


File: python.info,  Node: Databases,  Next: Mathematics and Numerics,  Prev: Network/Internet Programming,  Up: Library and Extension FAQ

11.4.6 Databases
----------------

* Menu:

* Are there any interfaces to database packages in Python?::
* How do you implement persistent objects in Python?::
* Why is cPickle so slow?::
* If my program crashes with a bsddb (or anydbm) database open, it gets corrupted. How come?: If my program crashes with a bsddb or anydbm database open it gets corrupted How come?.
* I tried to open Berkeley DB file, but bsddb produces bsddb.error; (22, 'Invalid argument'). Help! How can I restore my data?: I tried to open Berkeley DB file but bsddb produces bsddb error 22 'Invalid argument' Help! How can I restore my data?.


File: python.info,  Node: Are there any interfaces to database packages in Python?,  Next: How do you implement persistent objects in Python?,  Up: Databases

11.4.6.1 Are there any interfaces to database packages in Python?
.................................................................

Yes.

  Python 2.3 includes the *note bsddb: 1c. package which provides an
interface to the BerkeleyDB library.  Interfaces to disk-based hashes
such as *note DBM: 7f.  and *note GDBM: dc. are also included with
standard Python.

  Support for most relational databases is available.  See the
DatabaseProgramming wiki page(1) for details.

  ---------- Footnotes ----------

  (1) http://wiki.python.org/moin/DatabaseProgramming


File: python.info,  Node: How do you implement persistent objects in Python?,  Next: Why is cPickle so slow?,  Prev: Are there any interfaces to database packages in Python?,  Up: Databases

11.4.6.2 How do you implement persistent objects in Python?
...........................................................

The *note pickle: 12d. library module solves this in a very general way
(though you still can't store things like open files, sockets or
windows), and the *note shelve: 152. library module uses pickle and
(g)dbm to create persistent mappings containing arbitrary Python
objects.  For better performance, you can use the *note cPickle: 73.
module.

  A more awkward way of doing things is to use pickle's little sister,
marshal.  The *note marshal: 10b. module provides very fast ways to
store noncircular basic Python types to files and strings, and back
again.  Although marshal does not do fancy things like store instances
or handle shared references properly, it does run extremely fast.  For
example, loading a half megabyte of data may take less than a third of
a second.  This often beats doing something more complex and general
such as using gdbm with pickle/shelve.


File: python.info,  Node: Why is cPickle so slow?,  Next: If my program crashes with a bsddb or anydbm database open it gets corrupted How come?,  Prev: How do you implement persistent objects in Python?,  Up: Databases

11.4.6.3 Why is cPickle so slow?
................................

By default *note pickle: 12d. uses a relatively old and slow format for
backward compatibility.  You can however specify other protocol
versions that are faster:

    largeString = 'z' * (100 * 1024)
    myPickle = cPickle.dumps(largeString, protocol=1)



File: python.info,  Node: If my program crashes with a bsddb or anydbm database open it gets corrupted How come?,  Next: I tried to open Berkeley DB file but bsddb produces bsddb error 22 'Invalid argument' Help! How can I restore my data?,  Prev: Why is cPickle so slow?,  Up: Databases

11.4.6.4 If my program crashes with a bsddb (or anydbm) database open, it gets corrupted. How come?
...................................................................................................

Databases opened for write access with the bsddb module (and often by
the anydbm module, since it will preferentially use bsddb) must
explicitly be closed using the `.close()' method of the database.  The
underlying library caches database contents which need to be converted
to on-disk form and written.

  If you have initialized a new bsddb database but not written anything
to it before the program crashes, you will often wind up with a
zero-length file and encounter an exception the next time the file is
opened.


File: python.info,  Node: I tried to open Berkeley DB file but bsddb produces bsddb error 22 'Invalid argument' Help! How can I restore my data?,  Prev: If my program crashes with a bsddb or anydbm database open it gets corrupted How come?,  Up: Databases

11.4.6.5 I tried to open Berkeley DB file, but bsddb produces bsddb.error: (22, 'Invalid argument'). Help! How can I restore my data?
.....................................................................................................................................

Don't panic! Your data is probably intact. The most frequent cause for
the error is that you tried to open an earlier Berkeley DB file with a
later version of the Berkeley DB library.

  Many Linux systems now have all three versions of Berkeley DB
available.  If you are migrating from version 1 to a newer version use
db_dump185 to dump a plain text version of the database.  If you are
migrating from version 2 to version 3 use db2_dump to create a plain
text version of the database.  In either case, use db_load to create a
new native database for the latest version installed on your computer.
If you have version 3 of Berkeley DB installed, you should be able to
use db2_load to create a native version 2 database.

  You should move away from Berkeley DB version 1 files because the
hash file code contains known bugs that can corrupt your data.


File: python.info,  Node: Mathematics and Numerics,  Prev: Databases,  Up: Library and Extension FAQ

11.4.7 Mathematics and Numerics
-------------------------------

* Menu:

* How do I generate random numbers in Python?::


File: python.info,  Node: How do I generate random numbers in Python?,  Up: Mathematics and Numerics

11.4.7.1 How do I generate random numbers in Python?
....................................................

The standard module *note random: 142. implements a random number
generator.  Usage is simple:

    import random
    random.random()

This returns a random floating point number in the range [0, 1).

  There are also many other specialized generators in this module, such
as:

   * `randrange(a, b)' chooses an integer in the range [a, b).

   * `uniform(a, b)' chooses a floating point number in the range [a,
     b).

   * `normalvariate(mean, sdev)' samples the normal (Gaussian)
     distribution.

  Some higher-level functions operate on sequences directly, such as:

   * `choice(S)' chooses random element from a given sequence

   * `shuffle(L)' shuffles a list in-place, i.e. permutes it randomly

  There's also a `Random' class you can instantiate to create
independent multiple random number generators.


File: python.info,  Node: Extending/Embedding FAQ,  Next: Python on Windows FAQ,  Prev: Library and Extension FAQ,  Up: Python Frequently Asked Questions

11.5 Extending/Embedding FAQ
============================

* Menu:

* Can I create my own functions in C?::
* Can I create my own functions in C++?::
* Writing C is hard; are there any alternatives?::
* How can I execute arbitrary Python statements from C?::
* How can I evaluate an arbitrary Python expression from C?::
* How do I extract C values from a Python object?::
* How do I use Py_BuildValue() to create a tuple of arbitrary length?: How do I use Py_BuildValue to create a tuple of arbitrary length?.
* How do I call an object's method from C?::
* How do I catch the output from PyErr_Print() (or anything that prints to stdout/stderr)?: How do I catch the output from PyErr_Print or anything that prints to stdout/stderr ?.
* How do I access a module written in Python from C?::
* How do I interface to C++ objects from Python?::
* I added a module using the Setup file and the make fails; why?::
* How do I debug an extension?::
* I want to compile a Python module on my Linux system, but some files are missing. Why?: I want to compile a Python module on my Linux system but some files are missing Why?.
* What does "SystemError; _PyImport_FixupExtension; module yourmodule not loaded" mean?: What does "SystemError _PyImport_FixupExtension module yourmodule not loaded" mean?.
* How do I tell "incomplete input" from "invalid input"?::
* How do I find undefined g++ symbols __builtin_new or __pure_virtual?::
* Can I create an object class with some methods implemented in C and others in Python (e.g. through inheritance)?: Can I create an object class with some methods implemented in C and others in Python e g through inheritance ?.
* When importing module X, why do I get "undefined symbol; PyUnicodeUCS2*"?: When importing module X why do I get "undefined symbol PyUnicodeUCS2*"?.


File: python.info,  Node: Can I create my own functions in C?,  Next: Can I create my own functions in C++?,  Up: Extending/Embedding FAQ

11.5.1 Can I create my own functions in C?
------------------------------------------

Yes, you can create built-in modules containing functions, variables,
exceptions and even new types in C.  This is explained in the document
*note Extending and Embedding the Python Interpreter: 4f1.

  Most intermediate or advanced Python books will also cover this topic.


File: python.info,  Node: Can I create my own functions in C++?,  Next: Writing C is hard; are there any alternatives?,  Prev: Can I create my own functions in C?,  Up: Extending/Embedding FAQ

11.5.2 Can I create my own functions in C++?
--------------------------------------------

Yes, using the C compatibility features found in C++.  Place `extern
"C" { ... }' around the Python include files and put `extern "C"'
before each function that is going to be called by the Python
interpreter.  Global or static C++ objects with constructors are
probably not a good idea.


File: python.info,  Node: Writing C is hard; are there any alternatives?,  Next: How can I execute arbitrary Python statements from C?,  Prev: Can I create my own functions in C++?,  Up: Extending/Embedding FAQ

11.5.3 Writing C is hard; are there any alternatives?
-----------------------------------------------------

There are a number of alternatives to writing your own C extensions,
depending on what you're trying to do.

  If you need more speed, Psyco(1) generates x86 assembly code from
Python bytecode.  You can use Psyco to compile the most time-critical
functions in your code, and gain a significant improvement with very
little effort, as long as you're running on a machine with an
x86-compatible processor.

  Pyrex(2) is a compiler that accepts a slightly modified form of
Python and generates the corresponding C code.  Pyrex makes it possible
to write an extension without having to learn Python's C API.

  If you need to interface to some C or C++ library for which no Python
extension currently exists, you can try wrapping the library's data
types and functions with a tool such as SWIG(3).  SIP(4), CXX(5)
Boost(6), or Weave(7) are also alternatives for wrapping C++ libraries.

  ---------- Footnotes ----------

  (1) http://psyco.sourceforge.net/

  (2) http://www.cosc.canterbury.ac.nz/~greg/python/Pyrex/

  (3) http://www.swig.org

  (4) http://www.riverbankcomputing.co.uk/software/sip/

  (5) http://cxx.sourceforge.net/

  (6) http://www.boost.org/libs/python/doc/index.html

  (7) http://www.scipy.org/Weave


File: python.info,  Node: How can I execute arbitrary Python statements from C?,  Next: How can I evaluate an arbitrary Python expression from C?,  Prev: Writing C is hard; are there any alternatives?,  Up: Extending/Embedding FAQ

11.5.4 How can I execute arbitrary Python statements from C?
------------------------------------------------------------

The highest-level function to do this is *note PyRun_SimpleString():
29eb. which takes a single string argument to be executed in the
context of the module `__main__' and returns 0 for success and -1 when
an exception occurred (including `SyntaxError').  If you want more
control, use *note PyRun_String(): 2a30.; see the source for *note
PyRun_SimpleString(): 29eb. in `Python/pythonrun.c'.


File: python.info,  Node: How can I evaluate an arbitrary Python expression from C?,  Next: How do I extract C values from a Python object?,  Prev: How can I execute arbitrary Python statements from C?,  Up: Extending/Embedding FAQ

11.5.5 How can I evaluate an arbitrary Python expression from C?
----------------------------------------------------------------

Call the function *note PyRun_String(): 2a30. from the previous
question with the start symbol *note Py_eval_input: 2a3d.; it parses an
expression, evaluates it and returns its value.


File: python.info,  Node: How do I extract C values from a Python object?,  Next: How do I use Py_BuildValue to create a tuple of arbitrary length?,  Prev: How can I evaluate an arbitrary Python expression from C?,  Up: Extending/Embedding FAQ

11.5.6 How do I extract C values from a Python object?
------------------------------------------------------

That depends on the object's type.  If it's a tuple, *note
PyTuple_Size(): 2c99.  returns its length and *note PyTuple_GetItem():
29a0. returns the item at a specified index.  Lists have similar
functions, `PyListSize()' and *note PyList_GetItem(): 29a1.

  For strings, *note PyString_Size(): 2bee. returns its length and
*note PyString_AsString(): 2bf0. a pointer to its value.  Note that
Python strings may contain null bytes so C's `strlen()' should not be
used.

  To test the type of an object, first make sure it isn't _NULL_, and
then use *note PyString_Check(): 2bea, *note PyTuple_Check(): 2c95,
*note PyList_Check(): 2ca3, etc.

  There is also a high-level API to Python objects which is provided by
the so-called 'abstract' interface - read `Include/abstract.h' for
further details.  It allows interfacing with any kind of Python
sequence using calls like *note PySequence_Length(): 2b3c, *note
PySequence_GetItem(): 2a0c, etc.)  as well as many other useful
protocols.


File: python.info,  Node: How do I use Py_BuildValue to create a tuple of arbitrary length?,  Next: How do I call an object's method from C?,  Prev: How do I extract C values from a Python object?,  Up: Extending/Embedding FAQ

11.5.7 How do I use Py_BuildValue() to create a tuple of arbitrary length?
--------------------------------------------------------------------------

You can't.  Use `t = PyTuple_New(n)' instead, and fill it with objects
using `PyTuple_SetItem(t, i, o)' - note that this "eats" a reference
count of `o', so you have to *note Py_INCREF(): 297b. it.  Lists have
similar functions `PyList_New(n)' and `PyList_SetItem(l, i, o)'.  Note
that you _must_ set all the tuple items to some value before you pass
the tuple to Python code - `PyTuple_New(n)' initializes them to NULL,
which isn't a valid Python value.


File: python.info,  Node: How do I call an object's method from C?,  Next: How do I catch the output from PyErr_Print or anything that prints to stdout/stderr ?,  Prev: How do I use Py_BuildValue to create a tuple of arbitrary length?,  Up: Extending/Embedding FAQ

11.5.8 How do I call an object's method from C?
-----------------------------------------------

The *note PyObject_CallMethod(): 2aff. function can be used to call an
arbitrary method of an object.  The parameters are the object, the name
of the method to call, a format string like that used with *note
Py_BuildValue(): 3a1, and the argument values:

    PyObject *
    PyObject_CallMethod(PyObject *object, char *method_name,
                        char *arg_format, ...);

This works for any object that has methods - whether built-in or
user-defined.  You are responsible for eventually *note Py_DECREF():
2981.'ing the return value.

  To call, e.g., a file object's "seek" method with arguments 10, 0
(assuming the file object pointer is "f"):

    res = PyObject_CallMethod(f, "seek", "(ii)", 10, 0);
    if (res == NULL) {
            ... an exception occurred ...
    }
    else {
            Py_DECREF(res);
    }

Note that since *note PyObject_CallObject(): 2992. _always_ wants a
tuple for the argument list, to call a function without arguments, pass
"()" for the format, and to call a function with one argument, surround
the argument in parentheses, e.g. "(i)".


File: python.info,  Node: How do I catch the output from PyErr_Print or anything that prints to stdout/stderr ?,  Next: How do I access a module written in Python from C?,  Prev: How do I call an object's method from C?,  Up: Extending/Embedding FAQ

11.5.9 How do I catch the output from PyErr_Print() (or anything that prints to stdout/stderr)?
-----------------------------------------------------------------------------------------------

In Python code, define an object that supports the `write()' method.
Assign this object to *note sys.stdout: 873. and *note sys.stderr: 634.
Call print_error, or just allow the standard traceback mechanism to
work. Then, the output will go wherever your `write()' method sends it.

  The easiest way to do this is to use the StringIO class in the
standard library.

  Sample code and use for catching stdout:

    >>> class StdoutCatcher:
    ...     def __init__(self):
    ...         self.data = ''
    ...     def write(self, stuff):
    ...         self.data = self.data + stuff
    ...
    >>> import sys
    >>> sys.stdout = StdoutCatcher()
    >>> print 'foo'
    >>> print 'hello world!'
    >>> sys.stderr.write(sys.stdout.data)
    foo
    hello world!



File: python.info,  Node: How do I access a module written in Python from C?,  Next: How do I interface to C++ objects from Python?,  Prev: How do I catch the output from PyErr_Print or anything that prints to stdout/stderr ?,  Up: Extending/Embedding FAQ

11.5.10 How do I access a module written in Python from C?
----------------------------------------------------------

You can get a pointer to the module object as follows:

    module = PyImport_ImportModule("<modulename>");

If the module hasn't been imported yet (i.e. it is not yet present in
*note sys.modules: 80f.), this initializes the module; otherwise it
simply returns the value of `sys.modules["<modulename>"]'.  Note that
it doesn't enter the module into any namespace - it only ensures it has
been initialized and is stored in *note sys.modules: 80f.

  You can then access the module's attributes (i.e. any name defined in
the module) as follows:

    attr = PyObject_GetAttrString(module, "<attrname>");

Calling *note PyObject_SetAttrString(): 2af0. to assign to variables in
the module also works.


File: python.info,  Node: How do I interface to C++ objects from Python?,  Next: I added a module using the Setup file and the make fails; why?,  Prev: How do I access a module written in Python from C?,  Up: Extending/Embedding FAQ

11.5.11 How do I interface to C++ objects from Python?
------------------------------------------------------

Depending on your requirements, there are many approaches.  To do this
manually, begin by reading *note the "Extending and Embedding"
document: 4f1.  Realize that for the Python run-time system, there
isn't a whole lot of difference between C and C++ - so the strategy of
building a new Python type around a C structure (pointer) type will
also work for C++ objects.

  For C++ libraries, see *note Writing C is hard; are there any
alternatives?: 314d.


File: python.info,  Node: I added a module using the Setup file and the make fails; why?,  Next: How do I debug an extension?,  Prev: How do I interface to C++ objects from Python?,  Up: Extending/Embedding FAQ

11.5.12 I added a module using the Setup file and the make fails; why?
----------------------------------------------------------------------

Setup must end in a newline, if there is no newline there, the build
process fails.  (Fixing this requires some ugly shell script hackery,
and this bug is so minor that it doesn't seem worth the effort.)


File: python.info,  Node: How do I debug an extension?,  Next: I want to compile a Python module on my Linux system but some files are missing Why?,  Prev: I added a module using the Setup file and the make fails; why?,  Up: Extending/Embedding FAQ

11.5.13 How do I debug an extension?
------------------------------------

When using GDB with dynamically loaded extensions, you can't set a
breakpoint in your extension until your extension is loaded.

  In your `.gdbinit' file (or interactively), add the command:

    br _PyImport_LoadDynamicModule

Then, when you run GDB:

    $ gdb /local/bin/python
    gdb) run myscript.py
    gdb) continue # repeat until your extension is loaded
    gdb) finish   # so that your extension is loaded
    gdb) br myfunction.c:50
    gdb) continue



File: python.info,  Node: I want to compile a Python module on my Linux system but some files are missing Why?,  Next: What does "SystemError _PyImport_FixupExtension module yourmodule not loaded" mean?,  Prev: How do I debug an extension?,  Up: Extending/Embedding FAQ

11.5.14 I want to compile a Python module on my Linux system, but some files are missing. Why?
----------------------------------------------------------------------------------------------

Most packaged versions of Python don't include the
`/usr/lib/python2._x_/config/' directory, which contains various files
required for compiling Python extensions.

  For Red Hat, install the python-devel RPM to get the necessary files.

  For Debian, run `apt-get install python-dev'.


File: python.info,  Node: What does "SystemError _PyImport_FixupExtension module yourmodule not loaded" mean?,  Next: How do I tell "incomplete input" from "invalid input"?,  Prev: I want to compile a Python module on my Linux system but some files are missing Why?,  Up: Extending/Embedding FAQ

11.5.15 What does "SystemError: _PyImport_FixupExtension: module yourmodule not loaded" mean?
---------------------------------------------------------------------------------------------

This means that you have created an extension module named
"yourmodule", but your module init function does not initialize with
that name.

  Every module init function will have a line similar to:

    module = Py_InitModule("yourmodule", yourmodule_functions);

If the string passed to this function is not the same name as your
extension module, the *note SystemError: 93d. exception will be raised.


File: python.info,  Node: How do I tell "incomplete input" from "invalid input"?,  Next: How do I find undefined g++ symbols __builtin_new or __pure_virtual?,  Prev: What does "SystemError _PyImport_FixupExtension module yourmodule not loaded" mean?,  Up: Extending/Embedding FAQ

11.5.16 How do I tell "incomplete input" from "invalid input"?
--------------------------------------------------------------

Sometimes you want to emulate the Python interactive interpreter's
behavior, where it gives you a continuation prompt when the input is
incomplete (e.g. you typed the start of an "if" statement or you didn't
close your parentheses or triple string quotes), but it gives you a
syntax error message immediately when the input is invalid.

  In Python you can use the *note codeop: 64. module, which
approximates the parser's behavior sufficiently.  IDLE uses this, for
example.

  The easiest way to do it in C is to call *note
PyRun_InteractiveLoop(): 2a23. (perhaps in a separate thread) and let
the Python interpreter handle the input for you. You can also set the
`PyOS_ReadlineFunctionPointer()' to point at your custom input
function. See `Modules/readline.c' and `Parser/myreadline.c' for more
hints.

  However sometimes you have to run the embedded Python interpreter in
the same thread as your rest application and you can't allow the *note
PyRun_InteractiveLoop(): 2a23. to stop while waiting for user input.
The one solution then is to call `PyParser_ParseString()' and test for
`e.error' equal to `E_EOF', which means the input is incomplete).
Here's a sample code fragment, untested, inspired by code from Alex
Farber:

    #include <Python.h>
    #include <node.h>
    #include <errcode.h>
    #include <grammar.h>
    #include <parsetok.h>
    #include <compile.h>

    int testcomplete(char *code)
      /* code should end in \n */
      /* return -1 for error, 0 for incomplete, 1 for complete */
    {
      node *n;
      perrdetail e;

      n = PyParser_ParseString(code, &_PyParser_Grammar,
                               Py_file_input, &e);
      if (n == NULL) {
        if (e.error == E_EOF)
          return 0;
        return -1;
      }

      PyNode_Free(n);
      return 1;
    }

Another solution is trying to compile the received string with *note
Py_CompileString(): 2a36. If it compiles without errors, try to execute
the returned code object by calling *note PyEval_EvalCode(): 2a38.
Otherwise save the input for later. If the compilation fails, find out
if it's an error or just more input is required - by extracting the
message string from the exception tuple and comparing it to the string
"unexpected EOF while parsing".  Here is a complete example using the
GNU readline library (you may want to ignore *SIGINT* while calling
readline()):

    #include <stdio.h>
    #include <readline.h>

    #include <Python.h>
    #include <object.h>
    #include <compile.h>
    #include <eval.h>

    int main (int argc, char* argv[])
    {
      int i, j, done = 0;                          /* lengths of line, code */
      char ps1[] = ">>> ";
      char ps2[] = "... ";
      char *prompt = ps1;
      char *msg, *line, *code = NULL;
      PyObject *src, *glb, *loc;
      PyObject *exc, *val, *trb, *obj, *dum;

      Py_Initialize ();
      loc = PyDict_New ();
      glb = PyDict_New ();
      PyDict_SetItemString (glb, "__builtins__", PyEval_GetBuiltins ());

      while (!done)
      {
        line = readline (prompt);

        if (NULL == line)                          /* CTRL-D pressed */
        {
          done = 1;
        }
        else
        {
          i = strlen (line);

          if (i > 0)
            add_history (line);                    /* save non-empty lines */

          if (NULL == code)                        /* nothing in code yet */
            j = 0;
          else
            j = strlen (code);

          code = realloc (code, i + j + 2);
          if (NULL == code)                        /* out of memory */
            exit (1);

          if (0 == j)                              /* code was empty, so */
            code[0] = '\0';                        /* keep strncat happy */

          strncat (code, line, i);                 /* append line to code */
          code[i + j] = '\n';                      /* append '\n' to code */
          code[i + j + 1] = '\0';

          src = Py_CompileString (code, "<stdin>", Py_single_input);

          if (NULL != src)                         /* compiled just fine - */
          {
            if (ps1  == prompt ||                  /* ">>> " or */
                '\n' == code[i + j - 1])           /* "... " and double '\n' */
            {                                               /* so execute it */
              dum = PyEval_EvalCode ((PyCodeObject *)src, glb, loc);
              Py_XDECREF (dum);
              Py_XDECREF (src);
              free (code);
              code = NULL;
              if (PyErr_Occurred ())
                PyErr_Print ();
              prompt = ps1;
            }
          }                                        /* syntax error or E_EOF? */
          else if (PyErr_ExceptionMatches (PyExc_SyntaxError))
          {
            PyErr_Fetch (&exc, &val, &trb);        /* clears exception! */

            if (PyArg_ParseTuple (val, "sO", &msg, &obj) &&
                !strcmp (msg, "unexpected EOF while parsing")) /* E_EOF */
            {
              Py_XDECREF (exc);
              Py_XDECREF (val);
              Py_XDECREF (trb);
              prompt = ps2;
            }
            else                                   /* some other syntax error */
            {
              PyErr_Restore (exc, val, trb);
              PyErr_Print ();
              free (code);
              code = NULL;
              prompt = ps1;
            }
          }
          else                                     /* some non-syntax error */
          {
            PyErr_Print ();
            free (code);
            code = NULL;
            prompt = ps1;
          }

          free (line);
        }
      }

      Py_XDECREF(glb);
      Py_XDECREF(loc);
      Py_Finalize();
      exit(0);
    }



File: python.info,  Node: How do I find undefined g++ symbols __builtin_new or __pure_virtual?,  Next: Can I create an object class with some methods implemented in C and others in Python e g through inheritance ?,  Prev: How do I tell "incomplete input" from "invalid input"?,  Up: Extending/Embedding FAQ

11.5.17 How do I find undefined g++ symbols __builtin_new or __pure_virtual?
----------------------------------------------------------------------------

To dynamically load g++ extension modules, you must recompile Python,
relink it using g++ (change LINKCC in the Python Modules Makefile), and
link your extension module using g++ (e.g., `g++ -shared -o mymodule.so
mymodule.o').


File: python.info,  Node: Can I create an object class with some methods implemented in C and others in Python e g through inheritance ?,  Next: When importing module X why do I get "undefined symbol PyUnicodeUCS2*"?,  Prev: How do I find undefined g++ symbols __builtin_new or __pure_virtual?,  Up: Extending/Embedding FAQ

11.5.18 Can I create an object class with some methods implemented in C and others in Python (e.g. through inheritance)?
------------------------------------------------------------------------------------------------------------------------

In Python 2.2, you can inherit from built-in classes such as *note int:
1ef, *note list: 3b5, *note dict: 2fe, etc.

  The Boost Python Library (BPL,
<http://www.boost.org/libs/python/doc/index.html>) provides a way of
doing this from C++ (i.e. you can inherit from an extension class
written in C++ using the BPL).


File: python.info,  Node: When importing module X why do I get "undefined symbol PyUnicodeUCS2*"?,  Prev: Can I create an object class with some methods implemented in C and others in Python e g through inheritance ?,  Up: Extending/Embedding FAQ

11.5.19 When importing module X, why do I get "undefined symbol: PyUnicodeUCS2*"?
---------------------------------------------------------------------------------

You are using a version of Python that uses a 4-byte representation for
Unicode characters, but some C extension module you are importing was
compiled using a Python that uses a 2-byte representation for Unicode
characters (the default).

  If instead the name of the undefined symbol starts with
`PyUnicodeUCS4', the problem is the reverse: Python was built using
2-byte Unicode characters, and the extension module was compiled using
a Python with 4-byte Unicode characters.

  This can easily occur when using pre-built extension packages.
RedHat Linux 7.x, in particular, provided a "python2" binary that is
compiled with 4-byte Unicode.  This only causes the link failure if the
extension uses any of the `PyUnicode_*()' functions.  It is also a
problem if an extension uses any of the Unicode-related format
specifiers for *note Py_BuildValue(): 3a1. (or similar) or parameter
specifications for *note PyArg_ParseTuple(): 314.

  You can check the size of the Unicode character a Python interpreter
is using by checking the value of sys.maxunicode:

    >>> import sys
    >>> if sys.maxunicode > 65535:
    ...     print 'UCS4 build'
    ... else:
    ...     print 'UCS2 build'

The only way to solve this problem is to use extension modules compiled
with a Python binary built using the same size for Unicode characters.


File: python.info,  Node: Python on Windows FAQ,  Next: Graphic User Interface FAQ,  Prev: Extending/Embedding FAQ,  Up: Python Frequently Asked Questions

11.6 Python on Windows FAQ
==========================

* Menu:

* How do I run a Python program under Windows?::
* How do I make Python scripts executable?::
* Why does Python sometimes take so long to start?::
* How do I make an executable from a Python script?::
* Is a *.pyd file the same as a DLL?: Is a * pyd file the same as a DLL?.
* How can I embed Python into a Windows application?::
* How do I keep editors from inserting tabs into my Python source?::
* How do I check for a keypress without blocking?::
* How do I emulate os.kill() in Windows?: How do I emulate os kill in Windows?.
* How do I extract the downloaded documentation on Windows?::


File: python.info,  Node: How do I run a Python program under Windows?,  Next: How do I make Python scripts executable?,  Up: Python on Windows FAQ

11.6.1 How do I run a Python program under Windows?
---------------------------------------------------

This is not necessarily a straightforward question. If you are already
familiar with running programs from the Windows command line then
everything will seem obvious; otherwise, you might need a little more
guidance.

Python Development on XP
........................

Python Development on XP(1)

  This series of screencasts aims to get you up and running with Python
on Windows XP.  The knowledge is distilled into 1.5 hours and will get
you up and running with the right Python distribution, coding in your
choice of IDE, and debugging and writing solid code with unit-tests.

  Unless you use some sort of integrated development environment, you
will end up _typing_ Windows commands into what is variously referred
to as a "DOS window" or "Command prompt window".  Usually you can
create such a window from your Start menu; under Windows 7 the menu
selection is _Start  Programs  Accessories  Command Prompt_.  You
should be able to recognize when you have started such a window because
you will see a Windows "command prompt", which usually looks like this:

    C:\>

The letter may be different, and there might be other things after it,
so you might just as easily see something like:

    D:\YourName\Projects\Python>

depending on how your computer has been set up and what else you have
recently done with it.  Once you have started such a window, you are
well on the way to running Python programs.

  You need to realize that your Python scripts have to be processed by
another program called the Python _interpreter_.  The interpreter reads
your script, compiles it into bytecodes, and then executes the
bytecodes to run your program. So, how do you arrange for the
interpreter to handle your Python?

  First, you need to make sure that your command window recognises the
word "python" as an instruction to start the interpreter.  If you have
opened a command window, you should try entering the command `python'
and hitting return.:

    C:\Users\YourName> python

You should then see something like:

    Python 2.7.3 (default, Apr 10 2012, 22.71:26) [MSC v.1500 32 bit (Intel)] on win32
    Type "help", "copyright", "credits" or "license" for more information.
    >>>

You have started the interpreter in "interactive mode". That means you
can enter Python statements or expressions interactively and have them
executed or evaluated while you wait.  This is one of Python's
strongest features.  Check it by entering a few expressions of your
choice and seeing the results:

    >>> print "Hello"
    Hello
    >>> "Hello" * 3
    HelloHelloHello

Many people use the interactive mode as a convenient yet highly
programmable calculator.  When you want to end your interactive Python
session, hold the Ctrl key down while you enter a Z, then hit the
"Enter" key to get back to your Windows command prompt.

  You may also find that you have a Start-menu entry such as _Start 
Programs  Python 2.7  Python (command line)_ that results in you
seeing the `>>>' prompt in a new window.  If so, the window will
disappear after you enter the Ctrl-Z character; Windows is running a
single "python" command in the window, and closes it when you terminate
the interpreter.

  If the `python' command, instead of displaying the interpreter prompt
`>>>', gives you a message like:

    'python' is not recognized as an internal or external command, operable program or batch file.


Adding Python to DOS Path
.........................

Adding Python to DOS Path(2)

  Python is not added to the DOS path by default.  This screencast will
walk you through the steps to add the correct entry to the `System
Path', allowing Python to be executed from the command-line by all
users.

  or:

    Bad command or filename

then you need to make sure that your computer knows where to find the
Python interpreter.  To do this you will have to modify a setting
called PATH, which is a list of directories where Windows will look for
programs.

  You should arrange for Python's installation directory to be added to
the PATH of every command window as it starts.  If you installed Python
fairly recently then the command

    dir C:\py*

will probably tell you where it is installed; the usual location is
something like `C:\Python27'.  Otherwise you will be reduced to a
search of your whole disk ... use _Tools  Find_ or hit the _Search_
button and look for "python.exe".  Supposing you discover that Python is
installed in the `C:\Python27' directory (the default at the time of
writing), you should make sure that entering the command

    c:\Python27\python

starts up the interpreter as above (and don't forget you'll need a
"CTRL-Z" and an "Enter" to get out of it). Once you have verified the
directory, you can add it to the system path to make it easier to start
Python by just running the `python' command. This is currently an
option in the installer as of CPython 2.7.

  More information about environment variables can be found on the
*note Using Python on Windows: 65d. page.

  ---------- Footnotes ----------

  (1)
http://www.showmedo.com/videos/series?name=pythonOzsvaldPyNewbieSeries

  (2) http://showmedo.com/videos/video?name=960000&fromSeriesID=96


File: python.info,  Node: How do I make Python scripts executable?,  Next: Why does Python sometimes take so long to start?,  Prev: How do I run a Python program under Windows?,  Up: Python on Windows FAQ

11.6.2 How do I make Python scripts executable?
-----------------------------------------------

On Windows, the standard Python installer already associates the .py
extension with a file type (Python.File) and gives that file type an
open command that runs the interpreter (`D:\Program
Files\Python\python.exe "%1" %*').  This is enough to make scripts
executable from the command prompt as 'foo.py'.  If you'd rather be
able to execute the script by simple typing 'foo' with no extension you
need to add .py to the PATHEXT environment variable.


File: python.info,  Node: Why does Python sometimes take so long to start?,  Next: How do I make an executable from a Python script?,  Prev: How do I make Python scripts executable?,  Up: Python on Windows FAQ

11.6.3 Why does Python sometimes take so long to start?
-------------------------------------------------------

Usually Python starts very quickly on Windows, but occasionally there
are bug reports that Python suddenly begins to take a long time to
start up.  This is made even more puzzling because Python will work
fine on other Windows systems which appear to be configured identically.

  The problem may be caused by a misconfiguration of virus checking
software on the problem machine.  Some virus scanners have been known
to introduce startup overhead of two orders of magnitude when the
scanner is configured to monitor all reads from the filesystem.  Try
checking the configuration of virus scanning software on your systems
to ensure that they are indeed configured identically.  McAfee, when
configured to scan all file system read activity, is a particular
offender.


File: python.info,  Node: How do I make an executable from a Python script?,  Next: Is a * pyd file the same as a DLL?,  Prev: Why does Python sometimes take so long to start?,  Up: Python on Windows FAQ

11.6.4 How do I make an executable from a Python script?
--------------------------------------------------------

See <http://www.py2exe.org/> for a distutils extension that allows you
to create console and GUI executables from Python code.


File: python.info,  Node: Is a * pyd file the same as a DLL?,  Next: How can I embed Python into a Windows application?,  Prev: How do I make an executable from a Python script?,  Up: Python on Windows FAQ

11.6.5 Is a `*.pyd' file the same as a DLL?
-------------------------------------------

Yes, .pyd files are dll's, but there are a few differences.  If you
have a DLL named `foo.pyd', then it must have a function `initfoo()'.
You can then write Python "import foo", and Python will search for
foo.pyd (as well as foo.py, foo.pyc) and if it finds it, will attempt
to call `initfoo()' to initialize it.  You do not link your .exe with
foo.lib, as that would cause Windows to require the DLL to be present.

  Note that the search path for foo.pyd is PYTHONPATH, not the same as
the path that Windows uses to search for foo.dll.  Also, foo.pyd need
not be present to run your program, whereas if you linked your program
with a dll, the dll is required.  Of course, foo.pyd is required if you
want to say `import foo'.  In a DLL, linkage is declared in the source
code with `__declspec(dllexport)'.  In a .pyd, linkage is defined in a
list of available functions.


File: python.info,  Node: How can I embed Python into a Windows application?,  Next: How do I keep editors from inserting tabs into my Python source?,  Prev: Is a * pyd file the same as a DLL?,  Up: Python on Windows FAQ

11.6.6 How can I embed Python into a Windows application?
---------------------------------------------------------

Embedding the Python interpreter in a Windows app can be summarized as
follows:

  1. Do _not_ build Python into your .exe file directly.  On Windows,
     Python must be a DLL to handle importing modules that are
     themselves DLL's.  (This is the first key undocumented fact.)
     Instead, link to `python_NN_.dll'; it is typically installed in
     `C:\Windows\System'.  _NN_ is the Python version, a number such as
     "27" for Python 2.7.

     You can link to Python in two different ways.  Load-time linking
     means linking against `python_NN_.lib', while run-time linking
     means linking against `python_NN_.dll'.  (General note:
     `python_NN_.lib' is the so-called "import lib" corresponding to
     `python_NN_.dll'.  It merely defines symbols for the linker.)

     Run-time linking greatly simplifies link options; everything
     happens at run time.  Your code must load `python_NN_.dll' using
     the Windows `LoadLibraryEx()' routine.  The code must also use
     access routines and data in `python_NN_.dll' (that is, Python's C
     API's) using pointers obtained by the Windows `GetProcAddress()'
     routine.  Macros can make using these pointers transparent to any
     C code that calls routines in Python's C API.

     Borland note: convert `python_NN_.lib' to OMF format using
     Coff2Omf.exe first.

  2. If you use SWIG, it is easy to create a Python "extension module"
     that will make the app's data and methods available to Python.
     SWIG will handle just about all the grungy details for you.  The
     result is C code that you link _into_ your .exe file (!)  You do
     _not_ have to create a DLL file, and this also simplifies linking.

  3. SWIG will create an init function (a C function) whose name
     depends on the name of the extension module.  For example, if the
     name of the module is leo, the init function will be called
     initleo().  If you use SWIG shadow classes, as you should, the
     init function will be called initleoc().  This initializes a
     mostly hidden helper class used by the shadow class.

     The reason you can link the C code in step 2 into your .exe file
     is that calling the initialization function is equivalent to
     importing the module into Python! (This is the second key
     undocumented fact.)

  4. In short, you can use the following code to initialize the Python
     interpreter with your extension module.

         #include "python.h"
         ...
         Py_Initialize();  // Initialize Python.
         initmyAppc();  // Initialize (import) the helper class.
         PyRun_SimpleString("import myApp") ;  // Import the shadow class.


  5. There are two problems with Python's C API which will become
     apparent if you use a compiler other than MSVC, the compiler used
     to build pythonNN.dll.

     Problem 1: The so-called "Very High Level" functions that take
     FILE * arguments will not work in a multi-compiler environment
     because each compiler's notion of a struct FILE will be different.
     From an implementation standpoint these are very _low_ level
     functions.

     Problem 2: SWIG generates the following code when generating
     wrappers to void functions:

         Py_INCREF(Py_None);
         _resultobj = Py_None;
         return _resultobj;

     Alas, Py_None is a macro that expands to a reference to a complex
     data structure called _Py_NoneStruct inside pythonNN.dll.  Again,
     this code will fail in a mult-compiler environment.  Replace such
     code by:

         return Py_BuildValue("");

     It may be possible to use SWIG's `%typemap' command to make the
     change automatically, though I have not been able to get this to
     work (I'm a complete SWIG newbie).

  6. Using a Python shell script to put up a Python interpreter window
     from inside your Windows app is not a good idea; the resulting
     window will be independent of your app's windowing system.
     Rather, you (or the wxPythonWindow class) should create a "native"
     interpreter window.  It is easy to connect that window to the
     Python interpreter.  You can redirect Python's i/o to _any_ object
     that supports read and write, so all you need is a Python object
     (defined in your extension module) that contains read() and
     write() methods.


File: python.info,  Node: How do I keep editors from inserting tabs into my Python source?,  Next: How do I check for a keypress without blocking?,  Prev: How can I embed Python into a Windows application?,  Up: Python on Windows FAQ

11.6.7 How do I keep editors from inserting tabs into my Python source?
-----------------------------------------------------------------------

The FAQ does not recommend using tabs, and the Python style guide, PEP
8(1), recommends 4 spaces for distributed Python code; this is also the
Emacs python-mode default.

  Under any editor, mixing tabs and spaces is a bad idea.  MSVC is no
different in this respect, and is easily configured to use spaces: Take
_Tools  Options  Tabs_, and for file type "Default" set "Tab size"
and "Indent size" to 4, and select the "Insert spaces" radio button.

  If you suspect mixed tabs and spaces are causing problems in leading
whitespace, run Python with the *note -t: 3c9. switch or run
`Tools/Scripts/tabnanny.py' to check a directory tree in batch mode.

  ---------- Footnotes ----------

  (1) http://www.python.org/dev/peps/pep-0008


File: python.info,  Node: How do I check for a keypress without blocking?,  Next: How do I emulate os kill in Windows?,  Prev: How do I keep editors from inserting tabs into my Python source?,  Up: Python on Windows FAQ

11.6.8 How do I check for a keypress without blocking?
------------------------------------------------------

Use the msvcrt module.  This is a standard Windows-specific extension
module.  It defines a function `kbhit()' which checks whether a
keyboard hit is present, and `getch()' which gets one character without
echoing it.


File: python.info,  Node: How do I emulate os kill in Windows?,  Next: How do I extract the downloaded documentation on Windows?,  Prev: How do I check for a keypress without blocking?,  Up: Python on Windows FAQ

11.6.9 How do I emulate os.kill() in Windows?
---------------------------------------------

Prior to Python 2.7 and 3.2, to terminate a process, you can use *note
ctypes: 78.:

    import ctypes

    def kill(pid):
        """kill function for Win32"""
        kernel32 = ctypes.windll.kernel32
        handle = kernel32.OpenProcess(1, 0, pid)
        return (0 != kernel32.TerminateProcess(handle, 0))

In 2.7 and 3.2, *note os.kill(): 2ce. is implemented similar to the
above function, with the additional feature of being able to send
CTRL+C and CTRL+BREAK to console subprocesses which are designed to
handle those signals. See *note os.kill(): 2ce. for further details.


File: python.info,  Node: How do I extract the downloaded documentation on Windows?,  Prev: How do I emulate os kill in Windows?,  Up: Python on Windows FAQ

11.6.10 How do I extract the downloaded documentation on Windows?
-----------------------------------------------------------------

Sometimes, when you download the documentation package to a Windows
machine using a web browser, the file extension of the saved file ends
up being .EXE.  This is a mistake; the extension should be .TGZ.

  Simply rename the downloaded file to have the .TGZ extension, and
WinZip will be able to handle it.  (If your copy of WinZip doesn't, get
a newer one from <http://www.winzip.com>.)


File: python.info,  Node: Graphic User Interface FAQ,  Next: "Why is Python Installed on my Computer?" FAQ,  Prev: Python on Windows FAQ,  Up: Python Frequently Asked Questions

11.7 Graphic User Interface FAQ
===============================

* Menu:

* What platform-independent GUI toolkits exist for Python?::
* What platform-specific GUI toolkits exist for Python?::
* Tkinter questions::

What platform-independent GUI toolkits exist for Python?

* Tkinter::
* wxWidgets::
* Qt::
* Gtk+::
* FLTK::
* FOX::
* OpenGL::

Tkinter questions

* How do I freeze Tkinter applications?::
* Can I have Tk events handled while waiting for I/O?::
* I can't get key bindings to work in Tkinter; why?: I can't get key bindings to work in Tkinter why?.


File: python.info,  Node: What platform-independent GUI toolkits exist for Python?,  Next: What platform-specific GUI toolkits exist for Python?,  Up: Graphic User Interface FAQ

11.7.1 What platform-independent GUI toolkits exist for Python?
---------------------------------------------------------------

Depending on what platform(s) you are aiming at, there are several.

* Menu:

* Tkinter::
* wxWidgets::
* Qt::
* Gtk+::
* FLTK::
* FOX::
* OpenGL::


File: python.info,  Node: Tkinter,  Next: wxWidgets,  Up: What platform-independent GUI toolkits exist for Python?

11.7.1.1 Tkinter
................

Standard builds of Python include an object-oriented interface to the
Tcl/Tk widget set, called Tkinter.  This is probably the easiest to
install and use.  For more info about Tk, including pointers to the
source, see the Tcl/Tk home page at <http://www.tcl.tk>.  Tcl/Tk is
fully portable to the MacOS, Windows, and Unix platforms.


File: python.info,  Node: wxWidgets,  Next: Qt,  Prev: Tkinter,  Up: What platform-independent GUI toolkits exist for Python?

11.7.1.2 wxWidgets
..................

wxWidgets (<http://www.wxwidgets.org>) is a free, portable GUI class
library written in C++ that provides a native look and feel on a number
of platforms, with Windows, MacOS X, GTK, X11, all listed as current
stable targets.  Language bindings are available for a number of
languages including Python, Perl, Ruby, etc.

  wxPython (<http://www.wxpython.org>) is the Python binding for
wxwidgets.  While it often lags slightly behind the official wxWidgets
releases, it also offers a number of features via pure Python
extensions that are not available in other language bindings.  There is
an active wxPython user and developer community.

  Both wxWidgets and wxPython are free, open source, software with
permissive licences that allow their use in commercial products as well
as in freeware or shareware.


File: python.info,  Node: Qt,  Next: Gtk+,  Prev: wxWidgets,  Up: What platform-independent GUI toolkits exist for Python?

11.7.1.3 Qt
...........

There are bindings available for the Qt toolkit (PyQt(1)) and for KDE
(PyKDE(2)).  If you're writing open source software, you don't need to
pay for PyQt, but if you want to write proprietary applications, you
must buy a PyQt license from Riverbank Computing(3) and (up to Qt 4.4;
Qt 4.5 upwards is licensed under the LGPL license) a Qt license from
Trolltech(4).

  ---------- Footnotes ----------

  (1) http://www.riverbankcomputing.co.uk/software/pyqt/

  (2) http://www.riverbankcomputing.co.uk/software/pykde/intro

  (3) http://www.riverbankcomputing.co.uk

  (4) http://www.trolltech.com


File: python.info,  Node: Gtk+,  Next: FLTK,  Prev: Qt,  Up: What platform-independent GUI toolkits exist for Python?

11.7.1.4 Gtk+
.............

PyGtk bindings for the Gtk+ toolkit(1) have been implemented by James
Henstridge; see <<http://www.pygtk.org>>.

  ---------- Footnotes ----------

  (1) http://www.gtk.org


File: python.info,  Node: FLTK,  Next: FOX,  Prev: Gtk+,  Up: What platform-independent GUI toolkits exist for Python?

11.7.1.5 FLTK
.............

Python bindings for the FLTK toolkit(1), a simple yet powerful and
mature cross-platform windowing system, are available from the PyFLTK
project(2).

  ---------- Footnotes ----------

  (1) http://www.fltk.org

  (2) http://pyfltk.sourceforge.net


File: python.info,  Node: FOX,  Next: OpenGL,  Prev: FLTK,  Up: What platform-independent GUI toolkits exist for Python?

11.7.1.6 FOX
............

A wrapper for the FOX toolkit(1) called FXpy(2) is available.  FOX
supports both Unix variants and Windows.

  ---------- Footnotes ----------

  (1) http://www.fox-toolkit.org/

  (2) http://fxpy.sourceforge.net/


File: python.info,  Node: OpenGL,  Prev: FOX,  Up: What platform-independent GUI toolkits exist for Python?

11.7.1.7 OpenGL
...............

For OpenGL bindings, see PyOpenGL(1).

  ---------- Footnotes ----------

  (1) http://pyopengl.sourceforge.net


File: python.info,  Node: What platform-specific GUI toolkits exist for Python?,  Next: Tkinter questions,  Prev: What platform-independent GUI toolkits exist for Python?,  Up: Graphic User Interface FAQ

11.7.2 What platform-specific GUI toolkits exist for Python?
------------------------------------------------------------

The Mac port(1) by Jack Jansen has a rich and ever-growing set of
modules that support the native Mac toolbox calls.  The port supports
MacOS X's Carbon libraries.

  By installing the PyObjc Objective-C bridge(2), Python programs can
use MacOS X's Cocoa libraries. See the documentation that comes with
the Mac port.

  *note Pythonwin: 315e. by Mark Hammond includes an interface to the
Microsoft Foundation Classes and a Python programming environment
that's written mostly in Python using the MFC classes.

  ---------- Footnotes ----------

  (1) http://python.org/download/mac

  (2) http://pyobjc.sourceforge.net


File: python.info,  Node: Tkinter questions,  Prev: What platform-specific GUI toolkits exist for Python?,  Up: Graphic User Interface FAQ

11.7.3 Tkinter questions
------------------------

* Menu:

* How do I freeze Tkinter applications?::
* Can I have Tk events handled while waiting for I/O?::
* I can't get key bindings to work in Tkinter; why?: I can't get key bindings to work in Tkinter why?.


File: python.info,  Node: How do I freeze Tkinter applications?,  Next: Can I have Tk events handled while waiting for I/O?,  Up: Tkinter questions

11.7.3.1 How do I freeze Tkinter applications?
..............................................

Freeze is a tool to create stand-alone applications.  When freezing
Tkinter applications, the applications will not be truly stand-alone,
as the application will still need the Tcl and Tk libraries.

  One solution is to ship the application with the Tcl and Tk
libraries, and point to them at run-time using the `TCL_LIBRARY' and `TK_LIBRARY'
environment variables.

  To get truly stand-alone applications, the Tcl scripts that form the
library have to be integrated into the application as well. One tool
supporting that is SAM (stand-alone modules), which is part of the Tix
distribution (<http://tix.sourceforge.net/>).

  Build Tix with SAM enabled, perform the appropriate call to
`Tclsam_init()', etc. inside Python's `Modules/tkappinit.c', and link
with libtclsam and libtksam (you might include the Tix libraries as
well).


File: python.info,  Node: Can I have Tk events handled while waiting for I/O?,  Next: I can't get key bindings to work in Tkinter why?,  Prev: How do I freeze Tkinter applications?,  Up: Tkinter questions

11.7.3.2 Can I have Tk events handled while waiting for I/O?
............................................................

Yes, and you don't even need threads!  But you'll have to restructure
your I/O code a bit.  Tk has the equivalent of Xt's `XtAddInput()'
call, which allows you to register a callback function which will be
called from the Tk mainloop when I/O is possible on a file descriptor.
Here's what you need:

    from Tkinter import tkinter
    tkinter.createfilehandler(file, mask, callback)

The file may be a Python file or socket object (actually, anything with
a fileno() method), or an integer file descriptor.  The mask is one of
the constants tkinter.READABLE or tkinter.WRITABLE.  The callback is
called as follows:

    callback(file, mask)

You must unregister the callback when you're done, using

    tkinter.deletefilehandler(file)

Note: since you don't know _how many bytes_ are available for reading,
you can't use the Python file object's read or readline methods, since
these will insist on reading a predefined number of bytes.  For
sockets, the `recv()' or `recvfrom()' methods will work fine; for other
files, use `os.read(file.fileno(), maxbytecount)'.


File: python.info,  Node: I can't get key bindings to work in Tkinter why?,  Prev: Can I have Tk events handled while waiting for I/O?,  Up: Tkinter questions

11.7.3.3 I can't get key bindings to work in Tkinter: why?
..........................................................

An often-heard complaint is that event handlers bound to events with the
`bind()' method don't get handled even when the appropriate key is
pressed.

  The most common cause is that the widget to which the binding applies
doesn't have "keyboard focus".  Check out the Tk documentation for the
focus command.  Usually a widget is given the keyboard focus by
clicking in it (but not for labels; see the takefocus option).


File: python.info,  Node: "Why is Python Installed on my Computer?" FAQ,  Prev: Graphic User Interface FAQ,  Up: Python Frequently Asked Questions

11.8 "Why is Python Installed on my Computer?" FAQ
==================================================

* Menu:

* What is Python?: What is Python?<2>.
* Why is Python installed on my machine?::
* Can I delete Python?::


File: python.info,  Node: What is Python?<2>,  Next: Why is Python installed on my machine?,  Up: "Why is Python Installed on my Computer?" FAQ

11.8.1 What is Python?
----------------------

Python is a programming language.  It's used for many different
applications.  It's used in some high schools and colleges as an
introductory programming language because Python is easy to learn, but
it's also used by professional software developers at places such as
Google, NASA, and Lucasfilm Ltd.

  If you wish to learn more about Python, start with the Beginner's
Guide to Python(1).

  ---------- Footnotes ----------

  (1) http://wiki.python.org/moin/BeginnersGuide


File: python.info,  Node: Why is Python installed on my machine?,  Next: Can I delete Python?,  Prev: What is Python?<2>,  Up: "Why is Python Installed on my Computer?" FAQ

11.8.2 Why is Python installed on my machine?
---------------------------------------------

If you find Python installed on your system but don't remember
installing it, there are several possible ways it could have gotten
there.

   * Perhaps another user on the computer wanted to learn programming
     and installed it; you'll have to figure out who's been using the
     machine and might have installed it.

   * A third-party application installed on the machine might have been
     written in Python and included a Python installation.  For a home
     computer, the most common such application is PySol(1), a
     solitaire game that includes over 1000 different games and
     variations.

   * Some Windows machines also have Python installed.  At this writing
     we're aware of computers from Hewlett-Packard and Compaq that
     include Python.  Apparently some of HP/Compaq's administrative
     tools are written in Python.

   * All Apple computers running Mac OS X have Python installed; it's
     included in the base installation.

  ---------- Footnotes ----------

  (1) http://pysolfc.sourceforge.net/


File: python.info,  Node: Can I delete Python?,  Prev: Why is Python installed on my machine?,  Up: "Why is Python Installed on my Computer?" FAQ

11.8.3 Can I delete Python?
---------------------------

That depends on where Python came from.

  If someone installed it deliberately, you can remove it without
hurting anything.  On Windows, use the Add/Remove Programs icon in the
Control Panel.

  If Python was installed by a third-party application, you can also
remove it, but that application will no longer work.  You should use
that application's uninstaller rather than removing Python directly.

  If Python came with your operating system, removing it is not
recommended.  If you remove it, whatever tools were written in Python
will no longer run, and some of them might be important to you.
Reinstalling the whole system would then be required to fix things
again.


File: python.info,  Node: Glossary,  Next: About these documents,  Prev: Python Frequently Asked Questions,  Up: Top

12 Glossary
***********

`>>>'
     The default Python prompt of the interactive shell.  Often seen
     for code examples which can be executed interactively in the
     interpreter.  

`...'
     The default Python prompt of the interactive shell when entering
     code for an indented code block or within a pair of matching left
     and right delimiters (parentheses, square brackets or curly
     braces).  

2to3
     A tool that tries to convert Python 2.x code to Python 3.x code by
     handling most of the incompatibilities which can be detected by
     parsing the source and traversing the parse tree.

     2to3 is available in the standard library as *note lib2to3: fe.; a
     standalone entry point is provided as `Tools/scripts/2to3'.  See
     *note 2to3 - Automated Python 2 to 3 code translation: 636.  

abstract base class
     Abstract base classes complement *note duck-typing: 3183. by
     providing a way to define interfaces when other techniques like
     *note hasattr(): 329. would be clumsy or subtly wrong (for example
     with *note magic methods: 6fe.).  ABCs introduce virtual
     subclasses, which are classes that don't inherit from a class but
     are still recognized by *note isinstance(): 317. and *note
     issubclass(): 318.; see the *note abc: 4. module documentation.
     Python comes with many built-in ABCs for data structures (in the
     *note collections: 65. module), numbers (in the *note numbers:
     125. module), and streams (in the *note io: f9. module). You can
     create your own ABCs with the *note abc: 4. module.  

argument
     A value passed to a *note function: 7aa. (or *note method: 3184.)
     when calling the function.  There are two types of arguments:

        * _keyword argument_: an argument preceded by an identifier
          (e.g.  `name=') in a function call or passed as a value in a
          dictionary preceded by `**'.  For example, `3' and `5' are
          both keyword arguments in the following calls to *note
          complex(): 1e9.:

              complex(real=3, imag=5)
              complex(**{'real': 3, 'imag': 5})


        * _positional argument_: an argument that is not a keyword
          argument.  Positional arguments can appear at the beginning
          of an argument list and/or be passed as elements of an *note
          iterable: 8b4. preceded by `*'.  For example, `3' and `5' are
          both positional arguments in the following calls:

              complex(3, 5)
              complex(*(3, 5))



     Arguments are assigned to the named local variables in a function
     body.  See the *note Calls: 6e7. section for the rules governing
     this assignment.  Syntactically, any expression can be used to
     represent an argument; the evaluated value is assigned to the
     local variable.

     See also the *note parameter: 7b1. glossary entry and the FAQ
     question on *note the difference between arguments and parameters:
     30cf.  

attribute
     A value associated with an object which is referenced by name using
     dotted expressions.  For example, if an object _o_ has an attribute
     _a_ it would be referenced as _o.a_.  

BDFL
     Benevolent Dictator For Life, a.k.a. Guido van Rossum(1), Python's
     creator.  

bytes-like object
     An object that supports the *note buffer protocol: 937, like *note
     str: 1e7, *note bytearray: 1f4. or *note memoryview: 1c0.
     Bytes-like objects can be used for various operations that expect
     binary data, such as compression, saving to a binary file or
     sending over a socket. Some operations need the binary data to be
     mutable, in which case not all bytes-like objects can apply.  

bytecode
     Python source code is compiled into bytecode, the internal
     representation of a Python program in the CPython interpreter.
     The bytecode is also cached in `.pyc' and `.pyo' files so that
     executing the same file is faster the second time (recompilation
     from source to bytecode can be avoided).  This "intermediate
     language" is said to run on a *note virtual machine: 3188. that
     executes the machine code corresponding to each bytecode. Do note
     that bytecodes are not expected to work between different Python
     virtual machines, nor to be stable between Python releases.

     A list of bytecode instructions can be found in the documentation
     for *note the dis module: 25d6.  

class
     A template for creating user-defined objects. Class definitions
     normally contain method definitions which operate on instances of
     the class.  

classic class
     Any class which does not inherit from *note object: 1ee.  See
     *note new-style class: 5c3.  Classic classes have been removed in
     Python 3.  

coercion
     The implicit conversion of an instance of one type to another
     during an operation which involves two arguments of the same type.
     For example, `int(3.15)' converts the floating point number to the
     integer `3', but in `3+4.5', each argument is of a different type
     (one int, one float), and both must be converted to the same type
     before they can be added or it will raise a `TypeError'.  Coercion
     between two operands can be performed with the `coerce' built-in
     function; thus, `3+4.5' is equivalent to calling
     `operator.add(*coerce(3, 4.5))' and results in `operator.add(3.0,
     4.5)'.  Without coercion, all arguments of even compatible types
     would have to be normalized to the same value by the programmer,
     e.g., `float(3)+4.5' rather than just `3+4.5'.  

complex number
     An extension of the familiar real number system in which all
     numbers are expressed as a sum of a real part and an imaginary
     part.  Imaginary numbers are real multiples of the imaginary unit
     (the square root of `-1'), often written `i' in mathematics or `j'
     in engineering.  Python has built-in support for complex numbers,
     which are written with this latter notation; the imaginary part is
     written with a `j' suffix, e.g., `3+1j'.  To get access to complex
     equivalents of the *note math: 10c. module, use *note cmath: 60.
     Use of complex numbers is a fairly advanced mathematical feature.
     If you're not aware of a need for them, it's almost certain you
     can safely ignore them.  

context manager
     An object which controls the environment seen in a *note with: 1bd.
     statement by defining *note __enter__(): 1fc. and *note
     __exit__(): 1fd. methods.  See PEP 343(2).  

CPython
     The canonical implementation of the Python programming language, as
     distributed on python.org(3).  The term "CPython" is used when
     necessary to distinguish this implementation from others such as
     Jython or IronPython.  

decorator
     A function returning another function, usually applied as a
     function transformation using the `@wrapper' syntax.  Common
     examples for decorators are *note classmethod(): 3ef. and *note
     staticmethod(): 3ee.

     The decorator syntax is merely syntactic sugar, the following two
     function definitions are semantically equivalent:

         def f(...):
             ...
         f = staticmethod(f)

         @staticmethod
         def f(...):
             ...

     The same concept exists for classes, but is less commonly used
     there.  See the documentation for *note function definitions: 6e8.
     and *note class definitions: 336. for more about decorators.  

descriptor
     Any _new-style_ object which defines the methods *note __get__():
     700, *note __set__(): 701, or *note __delete__(): 702.  When a
     class attribute is a descriptor, its special binding behavior is
     triggered upon attribute lookup.  Normally, using _a.b_ to get,
     set or delete an attribute looks up the object named _b_ in the
     class dictionary for _a_, but if _b_ is a descriptor, the
     respective descriptor method gets called.  Understanding
     descriptors is a key to a deep understanding of Python because
     they are the basis for many features including functions, methods,
     properties, class methods, static methods, and reference to super
     classes.

     For more information about descriptors' methods, see *note
     Implementing Descriptors: 6eb.  

dictionary
     An associative array, where arbitrary keys are mapped to values.
     The keys can be any object with *note __hash__(): 32e.  and *note
     __eq__(): 219. methods.  Called a hash in Perl.  

docstring
     A string literal which appears as the first expression in a class,
     function or module.  While ignored when the suite is executed, it
     is recognized by the compiler and put into the `__doc__' attribute
     of the enclosing class, function or module.  Since it is available
     via introspection, it is the canonical place for documentation of
     the object.  

duck-typing
     A programming style which does not look at an object's type to
     determine if it has the right interface; instead, the method or
     attribute is simply called or used ("If it looks like a duck and
     quacks like a duck, it must be a duck.")  By emphasizing
     interfaces rather than specific types, well-designed code improves
     its flexibility by allowing polymorphic substitution.  Duck-typing
     avoids tests using *note type(): 487. or *note isinstance(): 317.
     (Note, however, that duck-typing can be complemented with *note
     abstract base classes: 870.)  Instead, it typically employs *note
     hasattr(): 329. tests or *note EAFP: 111c. programming.  

EAFP
     Easier to ask for forgiveness than permission.  This common Python
     coding style assumes the existence of valid keys or attributes and
     catches exceptions if the assumption proves false.  This clean and
     fast style is characterized by the presence of many *note try:
     38e. and *note except: 390.  statements.  The technique contrasts
     with the *note LBYL: 318f. style common to many other languages
     such as C.  

expression
     A piece of syntax which can be evaluated to some value.  In other
     words, an expression is an accumulation of expression elements
     like literals, names, attribute access, operators or function
     calls which all return a value.  In contrast to many other
     languages, not all language constructs are expressions.  There are
     also *note statement: dac.s which cannot be used as expressions,
     such as *note print: 4d7. or *note if: 425.  Assignments are also
     statements, not expressions.  

extension module
     A module written in C or C++, using Python's C API to interact
     with the core and with user code.  

file object
     An object exposing a file-oriented API (with methods such as
     `read()' or `write()') to an underlying resource.  Depending on
     the way it was created, a file object can mediate access to a real
     on-disk file or to another type of storage or communication device
     (for example standard input/output, in-memory buffers, sockets,
     pipes, etc.).  File objects are also called _file-like objects_ or
     _streams_.

     There are actually three categories of file objects: raw binary
     files, buffered binary files and text files.  Their interfaces are
     defined in the *note io: f9. module.  The canonical way to create
     a file object is by using the *note open(): 2d3. function.  

file-like object
     A synonym for *note file object: 3191.  

finder
     An object that tries to find the *note loader: 812. for a module.
     It must implement a method named `find_module()'. See PEP 302(4)
     for details.  

floor division
     Mathematical division that rounds down to nearest integer.  The
     floor division operator is `//'.  For example, the expression `11
     // 4' evaluates to `2' in contrast to the `2.75' returned by float
     true division.  Note that `(-11) // 4' is `-3' because that is
     `-2.75' rounded _downward_. See PEP 238(5).  

function
     A series of statements which returns some value to a caller. It
     can also be passed zero or more *note arguments: 7ab. which may be
     used in the execution of the body. See also *note parameter: 7b1,
     *note method: 3184, and the *note Function definitions: 6e8.
     section.  

__future__
     A pseudo-module which programmers can use to enable new language
     features which are not compatible with the current interpreter.
     For example, the expression `11/4' currently evaluates to `2'. If
     the module in which it is executed had enabled _true division_ by
     executing:

         from __future__ import division

     the expression `11/4' would evaluate to `2.75'.  By importing the
     *note __future__: 1. module and evaluating its variables, you can
     see when a new feature was first added to the language and when it
     will become the default:

         >>> import __future__
         >>> __future__.division
         _Feature((2, 2, 0, 'alpha', 2), (3, 0, 0, 'alpha', 0), 8192)

     
garbage collection
     The process of freeing memory when it is not used anymore.  Python
     performs garbage collection via reference counting and a cyclic
     garbage collector that is able to detect and break reference
     cycles.

generator
     A function which returns an iterator.  It looks like a normal
     function except that it contains *note yield: 2f0. statements for
     producing a series a values usable in a for-loop or that can be
     retrieved one at a time with the *note next(): 392. function. Each
     *note yield: 2f0. temporarily suspends processing, remembering the
     location execution state (including local variables and pending
     try-statements).  When the generator resumes, it picks-up where it
     left-off (in contrast to functions which start fresh on every
     invocation).

generator expression
     An expression that returns an iterator.  It looks like a normal
     expression followed by a *note for: 2e9. expression defining a
     loop variable, range, and an optional *note if: 425. expression.
     The combined expression generates values for an enclosing function:

         >>> sum(i*i for i in range(10))         # sum of squares 0, 1, 4, ... 81
         285

     
GIL
     See *note global interpreter lock: 1523.  

global interpreter lock
     The mechanism used by the *note CPython: 318d. interpreter to
     assure that only one thread executes Python *note bytecode: 57a.
     at a time.  This simplifies the CPython implementation by making
     the object model (including critical built-in types such as *note
     dict: 2fe.) implicitly safe against concurrent access.  Locking
     the entire interpreter makes it easier for the interpreter to be
     multi-threaded, at the expense of much of the parallelism afforded
     by multi-processor machines.

     However, some extension modules, either standard or third-party,
     are designed so as to release the GIL when doing
     computationally-intensive tasks such as compression or hashing.
     Also, the GIL is always released when doing I/O.

     Past efforts to create a "free-threaded" interpreter (one which
     locks shared data at a much finer granularity) have not been
     successful because performance suffered in the common
     single-processor case. It is believed that overcoming this
     performance issue would make the implementation much more
     complicated and therefore costlier to maintain.  

hashable
     An object is _hashable_ if it has a hash value which never changes
     during its lifetime (it needs a *note __hash__(): 32e. method),
     and can be compared to other objects (it needs an *note __eq__():
     219. or *note __cmp__(): 21e. method).  Hashable objects which
     compare equal must have the same hash value.

     Hashability makes an object usable as a dictionary key and a set
     member, because these data structures use the hash value
     internally.

     All of Python's immutable built-in objects are hashable, while no
     mutable containers (such as lists or dictionaries) are.  Objects
     which are instances of user-defined classes are hashable by
     default; they all compare unequal (except with themselves), and
     their hash value is their *note id(): 3ab.  

IDLE
     An Integrated Development Environment for Python.  IDLE is a basic
     editor and interpreter environment which ships with the standard
     distribution of Python.  

immutable
     An object with a fixed value.  Immutable objects include numbers,
     strings and tuples.  Such an object cannot be altered.  A new
     object has to be created if a different value has to be stored.
     They play an important role in places where a constant hash value
     is needed, for example as a key in a dictionary.  

integer division
     Mathematical division discarding any remainder.  For example, the
     expression `11/4' currently evaluates to `2' in contrast to the
     `2.75' returned by float division.  Also called _floor division_.
     When dividing two integers the outcome will always be another
     integer (having the floor function applied to it). However, if one
     of the operands is another numeric type (such as a *note float:
     1e8.), the result will be coerced (see *note coercion: a78.) to a
     common type.  For example, an integer divided by a float will
     result in a float value, possibly with a decimal fraction.
     Integer division can be forced by using the `//' operator instead
     of the `/' operator.  See also *note __future__: 3193.  

importer
     An object that both finds and loads a module; both a *note finder:
     811. and *note loader: 812. object.  

interactive
     Python has an interactive interpreter which means you can enter
     statements and expressions at the interpreter prompt, immediately
     execute them and see their results.  Just launch `python' with no
     arguments (possibly by selecting it from your computer's main
     menu). It is a very powerful way to test out new ideas or inspect
     modules and packages (remember `help(x)').  

interpreted
     Python is an interpreted language, as opposed to a compiled one,
     though the distinction can be blurry because of the presence of the
     bytecode compiler.  This means that source files can be run
     directly without explicitly creating an executable which is then
     run.  Interpreted languages typically have a shorter
     development/debug cycle than compiled ones, though their programs
     generally also run more slowly.  See also *note interactive: 3198.  

iterable
     An object capable of returning its members one at a time. Examples
     of iterables include all sequence types (such as *note list: 3b5,
     *note str: 1e7, and *note tuple: 401.) and some non-sequence types
     like *note dict: 2fe.  and *note file: 1f6. and objects of any
     classes you define with an *note __iter__(): 31a. or *note
     __getitem__(): 448. method.  Iterables can be used in a *note for:
     2e9. loop and in many other places where a sequence is needed
     (*note zip(): 3fe, *note map(): 2fd, ...).  When an iterable
     object is passed as an argument to the built-in function *note
     iter(): 319, it returns an iterator for the object.  This iterator
     is good for one pass over the set of values.  When using
     iterables, it is usually not necessary to call *note iter(): 319.
     or deal with iterator objects yourself.  The `for' statement does
     that automatically for you, creating a temporary unnamed variable
     to hold the iterator for the duration of the loop.  See also *note
     iterator: 869, *note sequence: b66, and *note generator: 5cd.  

iterator
     An object representing a stream of data.  Repeated calls to the
     iterator's *note next(): 392. method return successive items in
     the stream.  When no more data are available a *note
     StopIteration: 32c. exception is raised instead.  At this point,
     the iterator object is exhausted and any further calls to its
     *note next(): 392. method just raise *note StopIteration: 32c.
     again.  Iterators are required to have an *note __iter__(): 31a.
     method that returns the iterator object itself so every iterator
     is also iterable and may be used in most places where other
     iterables are accepted.  One notable exception is code which
     attempts multiple iteration passes.  A container object (such as a
     *note list: 3b5.) produces a fresh new iterator each time you pass
     it to the *note iter(): 319. function or use it in a *note for:
     2e9. loop.  Attempting this with an iterator will just return the
     same exhausted iterator object used in the previous iteration
     pass, making it appear like an empty container.

     More information can be found in *note Iterator Types: 717.  

key function
     A key function or collation function is a callable that returns a
     value used for sorting or ordering.  For example, *note
     locale.strxfrm(): 200a. is used to produce a sort key that is
     aware of locale specific sort conventions.

     A number of tools in Python accept key functions to control how
     elements are ordered or grouped.  They include *note min(): 221,
     *note max(): 222, *note sorted(): 220, `list.sort()', *note
     heapq.nsmallest(): b71, *note heapq.nlargest(): b70, and *note
     itertools.groupby(): d4b.

     There are several ways to create a key function.  For example. the
     *note str.lower(): 8b5. method can serve as a key function for
     case insensitive sorts.  Alternatively, an ad-hoc key function can
     be built from a *note lambda: 3fc. expression such as `lambda r:
     (r[0], r[2])'.  Also, the *note operator: 126. module provides
     three key function constructors: *note attrgetter(): dce, *note
     itemgetter(): dcf, and *note methodcaller(): dd0.  See the *note
     Sorting HOW TO: 304a. for examples of how to create and use key
     functions.  

keyword argument
     See *note argument: 7ab.  

lambda
     An anonymous inline function consisting of a single *note
     expression: 2398.  which is evaluated when the function is called.
     The syntax to create a lambda function is `lambda [arguments]:
     expression' 

LBYL
     Look before you leap.  This coding style explicitly tests for
     pre-conditions before making calls or lookups.  This style
     contrasts with the *note EAFP: 111c. approach and is characterized
     by the presence of many *note if: 425. statements.

     In a multi-threaded environment, the LBYL approach can risk
     introducing a race condition between "the looking" and "the
     leaping".  For example, the code, `if key in mapping: return
     mapping[key]' can fail if another thread removes _key_ from
     _mapping_ after the test, but before the lookup.  This issue can
     be solved with locks or by using the EAFP approach.  

list
     A built-in Python *note sequence: b66.  Despite its name it is
     more akin to an array in other languages than to a linked list
     since access to elements are O(1).  

list comprehension
     A compact way to process all or part of the elements in a sequence
     and return a list with the results.  `result = ["0x%02x" % x for x
     in range(256) if x % 2 == 0]' generates a list of strings
     containing even hex numbers (0x..) in the range from 0 to 255. The
     *note if: 425.  clause is optional.  If omitted, all elements in
     `range(256)' are processed.  

loader
     An object that loads a module. It must define a method named
     `load_module()'. A loader is typically returned by a *note finder:
     811. See PEP 302(6) for details.  

mapping
     A container object that supports arbitrary key lookups and
     implements the methods specified in the *note Mapping: 20a. or
     *note MutableMapping: b61.  *note abstract base classes: b3b.
     Examples include *note dict: 2fe, *note collections.defaultdict:
     8e1, *note collections.OrderedDict: 1b5. and *note
     collections.Counter: 1b6.  

metaclass
     The class of a class.  Class definitions create a class name, a
     class dictionary, and a list of base classes.  The metaclass is
     responsible for taking those three arguments and creating the
     class.  Most object oriented programming languages provide a
     default implementation.  What makes Python special is that it is
     possible to create custom metaclasses.  Most users never need this
     tool, but when the need arises, metaclasses can provide powerful,
     elegant solutions.  They have been used for logging attribute
     access, adding thread-safety, tracking object creation,
     implementing singletons, and many other tasks.

     More information can be found in *note Customizing class creation:
     708.  

method
     A function which is defined inside a class body.  If called as an
     attribute of an instance of that class, the method will get the
     instance object as its first *note argument: 7ab. (which is
     usually called `self').  See *note function: 7aa. and *note nested
     scope: 319d.  

method resolution order
     Method Resolution Order is the order in which base classes are
     searched for a member during lookup. See The Python 2.3 Method
     Resolution Order(7).  

MRO
     See *note method resolution order: 319e.  

mutable
     Mutable objects can change their value but keep their *note id():
     3ab.  See also *note immutable: 561.  

named tuple
     Any tuple-like class whose indexable elements are also accessible
     using named attributes (for example, *note time.localtime(): ac2.
     returns a tuple-like object where the _year_ is accessible either
     with an index such as `t[0]' or with a named attribute like
     `t.tm_year').

     A named tuple can be a built-in type such as *note
     time.struct_time: ac1, or it can be created with a regular class
     definition.  A full featured named tuple can also be created with
     the factory function *note collections.namedtuple(): 1cc.  The
     latter approach automatically provides extra features such as a
     self-documenting representation like `Employee(name='jones',
     title='programmer')'.  

namespace
     The place where a variable is stored.  Namespaces are implemented
     as dictionaries.  There are the local, global and built-in
     namespaces as well as nested namespaces in objects (in methods).
     Namespaces support modularity by preventing naming conflicts.  For
     instance, the functions `__builtin__.open()' and *note os.open():
     5d5. are distinguished by their namespaces.  Namespaces also aid
     readability and maintainability by making it clear which module
     implements a function.  For instance, writing *note random.seed():
     d2c. or *note itertools.izip(): 3ff. makes it clear that those
     functions are implemented by the *note random: 142. and *note
     itertools: fa.  modules, respectively.  

nested scope
     The ability to refer to a variable in an enclosing definition.  For
     instance, a function defined inside another function can refer to
     variables in the outer function.  Note that nested scopes work
     only for reference and not for assignment which will always write
     to the innermost scope.  In contrast, local variables both read
     and write in the innermost scope.  Likewise, global variables read
     and write to the global namespace.  

new-style class
     Any class which inherits from *note object: 1ee.  This includes
     all built-in types like *note list: 3b5. and *note dict: 2fe.
     Only new-style classes can use Python's newer, versatile features
     like *note __slots__: 482, descriptors, properties, and *note
     __getattribute__(): 334.

     More information can be found in *note New-style and classic
     classes: 6f1.  

object
     Any data with state (attributes or value) and defined behavior
     (methods).  Also the ultimate base class of any *note new-style
     class: 5c3.  

parameter
     A named entity in a *note function: 7aa. (or method) definition
     that specifies an *note argument: 7ab. (or in some cases,
     arguments) that the function can accept.  There are four types of
     parameters:

        * _positional-or-keyword_: specifies an argument that can be
          passed either *note positionally: 7ab. or as a *note keyword
          argument: 7ab.  This is the default kind of parameter, for
          example _foo_ and _bar_ in the following:

              def func(foo, bar=None): ...


        * _positional-only_: specifies an argument that can be supplied
          only by position.  Python has no syntax for defining
          positional-only parameters.  However, some built-in functions
          have positional-only parameters (e.g. *note abs(): 5b3.).

        * _var-positional_: specifies that an arbitrary sequence of
          positional arguments can be provided (in addition to any
          positional arguments already accepted by other parameters).
          Such a parameter can be defined by prepending the parameter
          name with `*', for example _args_ in the following:

              def func(*args, **kwargs): ...


        * _var-keyword_: specifies that arbitrarily many keyword
          arguments can be provided (in addition to any keyword
          arguments already accepted by other parameters).  Such a
          parameter can be defined by prepending the parameter name
          with `**', for example _kwargs_ in the example above.

     Parameters can specify both optional and required arguments, as
     well as default values for some optional arguments.

     See also the *note argument: 7ab. glossary entry, the FAQ question
     on *note the difference between arguments and parameters: 30cf,
     and the *note Function definitions: 6e8. section.  

positional argument
     See *note argument: 7ab.  

Python 3000
     Nickname for the Python 3.x release line (coined long ago when the
     release of version 3 was something in the distant future.)  This
     is also abbreviated "Py3k".  

Pythonic
     An idea or piece of code which closely follows the most common
     idioms of the Python language, rather than implementing code using
     concepts common to other languages.  For example, a common idiom
     in Python is to loop over all elements of an iterable using a
     *note for: 2e9.  statement.  Many other languages don't have this
     type of construct, so people unfamiliar with Python sometimes use
     a numerical counter instead:

         for i in range(len(food)):
             print food[i]

     As opposed to the cleaner, Pythonic method:

         for piece in food:
             print piece

     
reference count
     The number of references to an object.  When the reference count
     of an object drops to zero, it is deallocated.  Reference counting
     is generally not visible to Python code, but it is a key element
     of the *note CPython: 318d. implementation.  The *note sys: 16d.
     module defines a *note getrefcount(): 23a0. function that
     programmers can call to return the reference count for a
     particular object.  

__slots__
     A declaration inside a *note new-style class: 5c3. that saves
     memory by pre-declaring space for instance attributes and
     eliminating instance dictionaries.  Though popular, the technique
     is somewhat tricky to get right and is best reserved for rare
     cases where there are large numbers of instances in a
     memory-critical application.  

sequence
     An *note iterable: 8b4. which supports efficient element access
     using integer indices via the *note __getitem__(): 448. special
     method and defines a *note len(): 517. method that returns the
     length of the sequence.  Some built-in sequence types are *note
     list: 3b5, *note str: 1e7, *note tuple: 401, and *note unicode:
     1f2. Note that *note dict: 2fe. also supports *note __getitem__():
     448. and *note __len__(): 403, but is considered a mapping rather
     than a sequence because the lookups use arbitrary *note immutable:
     561. keys rather than integers.  

slice
     An object usually containing a portion of a *note sequence: b66.
     A slice is created using the subscript notation, `[]' with colons
     between numbers when several are given, such as in
     `variable_name[1:3:5]'.  The bracket (subscript) notation uses
     *note slice: 449. objects internally (or in older versions, *note
     __getslice__(): 711. and *note __setslice__(): 71d.).  

special method
     A method that is called implicitly by Python to execute a certain
     operation on a type, such as addition.  Such methods have names
     starting and ending with double underscores.  Special methods are
     documented in *note Special method names: 6a9.  

statement
     A statement is part of a suite (a "block" of code).  A statement
     is either an *note expression: 2398. or a one of several
     constructs with a keyword, such as *note if: 425, *note while:
     522. or *note for: 2e9.  

struct sequence
     A tuple with named elements. Struct sequences expose an interface
     similiar to *note named tuple: a0f. in that elements can either be
     accessed either by index or as an attribute. However, they do not
     have any of the named tuple methods like *note _make(): b51. or
     *note _asdict(): 1cb. Examples of struct sequences include *note
     sys.float_info: 892. and the return value of *note os.stat(): 3bd.  

triple-quoted string
     A string which is bound by three instances of either a quotation
     mark (") or an apostrophe (').  While they don't provide any
     functionality not available with single-quoted strings, they are
     useful for a number of reasons.  They allow you to include
     unescaped single and double quotes within a string and they can
     span multiple lines without the use of the continuation character,
     making them especially useful when writing docstrings.  

type
     The type of a Python object determines what kind of object it is;
     every object has a type.  An object's type is accessible as its
     `__class__' attribute or can be retrieved with `type(obj)'.  

universal newlines
     A manner of interpreting text streams in which all of the
     following are recognized as ending a line: the Unix end-of-line
     convention `'\n'', the Windows convention `'\r\n'', and the old
     Macintosh convention `'\r''.  See PEP 278(8) and PEP 3116(9), as
     well as *note str.splitlines(): 8bf. for an additional use.  

view
     The objects returned from *note dict.viewkeys(): 1e1, *note
     dict.viewvalues(): 1e2, and *note dict.viewitems(): 1e3. are
     called dictionary views.  They are lazy sequences that will see
     changes in the underlying dictionary.  To force the dictionary
     view to become a full list use `list(dictview)'.  See *note
     Dictionary view objects: 8ed.  

virtual machine
     A computer defined entirely in software.  Python's virtual machine
     executes the *note bytecode: 57a. emitted by the bytecode compiler.  

Zen of Python
     Listing of Python design principles and philosophies that are
     helpful in understanding and using the language.  The listing can
     be found by typing "`import this'" at the interactive prompt.

  ---------- Footnotes ----------

  (1) http://www.python.org/~guido/

  (2) http://www.python.org/dev/peps/pep-0343

  (3) http://python.org

  (4) http://www.python.org/dev/peps/pep-0302

  (5) http://www.python.org/dev/peps/pep-0238

  (6) http://www.python.org/dev/peps/pep-0302

  (7) http://www.python.org/download/releases/2.3/mro/

  (8) http://www.python.org/dev/peps/pep-0278

  (9) http://www.python.org/dev/peps/pep-3116



Local Variables:
coding: utf-8
End:
