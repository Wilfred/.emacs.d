<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2017-08-07 Mon 14:15 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title></title>
<meta name="generator" content="Org mode">
<meta name="author" content="Wilfred Hughes">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="init.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd0aef84">1. Introduction</a>
<ul>
<li><a href="#orgf37228f">1.1. Licensing</a></li>
<li><a href="#org81a4be1">1.2. Reading This Document</a></li>
<li><a href="#org7447b84">1.3. Generating This Document</a></li>
</ul>
</li>
<li><a href="#orgc1d5f26">2. Installing locally</a>
<ul>
<li><a href="#org9604a18">2.1. The Git Repository</a></li>
<li><a href="#org9a5a1cd">2.2. Emacs 25</a></li>
<li><a href="#orgd372c10">2.3. Python</a></li>
<li><a href="#orgecf34e0">2.4. Less</a></li>
</ul>
</li>
<li><a href="#org295fda4">3. Contents</a>
<ul>
<li><a href="#orga3080fa">3.1. Folder Structure</a></li>
<li><a href="#orgc48aeb8">3.2. Packages</a></li>
<li><a href="#org4b43074">3.3. UI</a>
<ul>
<li><a href="#orgbec2014">3.3.1. Theme</a></li>
<li><a href="#org3a85fff">3.3.2. Visibility of UI Elements</a></li>
<li><a href="#org89b4672">3.3.3. Recursive Editing</a></li>
</ul>
</li>
<li><a href="#org19583c3">3.4. Moving Around</a>
<ul>
<li><a href="#orga9ec45d">3.4.1. By Symbol</a></li>
<li><a href="#org1e68e2e">3.4.2. By indentation</a></li>
<li><a href="#org7ec6e51">3.4.3. By Character</a></li>
<li><a href="#orgbedd3a1">3.4.4. Measuring Movement</a></li>
</ul>
</li>
<li><a href="#org2da079c">3.5. Inserting</a></li>
<li><a href="#org1b5a39e">3.6. Killing</a></li>
<li><a href="#org7939485">3.7. Modifying and Editing</a>
<ul>
<li><a href="#org2e830ff">3.7.1. Matched Pairs</a></li>
</ul>
</li>
<li><a href="#org73cf68c">3.8. Files</a>
<ul>
<li><a href="#org3bfc7a5">3.8.1. Opening</a></li>
<li><a href="#org695994f">3.8.2. Dired</a></li>
<li><a href="#orga77495a">3.8.3. Deleting and Backups</a></li>
<li><a href="#org7e8d636">3.8.4. Scratch Files</a></li>
</ul>
</li>
<li><a href="#org5639ced">3.9. As-you-type Checks</a>
<ul>
<li><a href="#org001c6b1">3.9.1. Flymake</a></li>
<li><a href="#org4d4290c">3.9.2. Flycheck</a></li>
</ul>
</li>
<li><a href="#orgd100f5d">3.10. Undoing</a></li>
<li><a href="#org9ac3bee">3.11. Emacs Lisp</a>
<ul>
<li><a href="#orgc3507b7">3.11.1. Shortcuts</a></li>
<li><a href="#org651afca">3.11.2. Editing Parentheses</a></li>
<li><a href="#orgbeb3094">3.11.3. Highlighting Parentheses</a></li>
<li><a href="#orga18e5e3">3.11.4. Function Signatures</a></li>
<li><a href="#org0a98b11">3.11.5. On-the-fly Checking</a></li>
<li><a href="#org64fba89">3.11.6. Highlighting</a></li>
</ul>
</li>
<li><a href="#org1e73091">3.12. Languages</a>
<ul>
<li><a href="#org92c707f">3.12.1. prog-mode</a></li>
<li><a href="#org99899cb">3.12.2. Python</a></li>
<li><a href="#org7eb0bc7">3.12.3. Haskell</a></li>
<li><a href="#org26251b2">3.12.4. Ruby</a></li>
<li><a href="#orgeb44fef">3.12.5. C/C++</a></li>
<li><a href="#org0c6fd91">3.12.6. HTML</a></li>
<li><a href="#org9b299a2">3.12.7. CSS</a></li>
<li><a href="#org97713e5">3.12.8. Less (CSS)</a></li>
<li><a href="#orgc50289a">3.12.9. Org-mode</a></li>
<li><a href="#org8731b98">3.12.10. Markdown</a></li>
<li><a href="#org0f6ffb3">3.12.11. Shell</a></li>
</ul>
</li>
<li><a href="#org728f6e6">3.13. Performance</a></li>
<li><a href="#org64350cb">3.14. Shut Down</a></li>
<li><a href="#org0a495f2">3.15. Workarounds</a></li>
<li><a href="#orga72008f">3.16. Undocumented</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgd0aef84" class="outline-2">
<h2 id="orgd0aef84"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This is the Emacs environment I (Wilfred Hughes) use for development.
</p>
</div>

<div id="outline-container-orgf37228f" class="outline-3">
<h3 id="orgf37228f"><span class="section-number-3">1.1</span> Licensing</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Code I've written (init.el and files under <code>user-lisp/</code>) is BSD
licensed, see <a href="COPYING">COPYING</a>.
</p>
</div>
</div>

<div id="outline-container-org81a4be1" class="outline-3">
<h3 id="org81a4be1"><span class="section-number-3">1.2</span> Reading This Document</h3>
<div class="outline-text-3" id="text-1-2">
<p>
This file is a literate programming document written with org-mode and
org-mode-babel. You can view init.html in a web browser, or read
init.org in Emacs.
</p>

<p>
You can edit any code block by putting point inside the block and
pressing <code>C-c '</code> (press <code>C-c '</code> again to escape).
</p>
</div>
</div>

<div id="outline-container-org7447b84" class="outline-3">
<h3 id="org7447b84"><span class="section-number-3">1.3</span> Generating This Document</h3>
<div class="outline-text-3" id="text-1-3">
<p>
init.org is the source file that I edit, and init.el and init.html are
generated from it. We define a convenience function to generate these files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/export-init-org</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Generate init.html and init.html from the current init.org file."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>call-interactively <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-babel-tangle</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Export as HTML 5, and include our styling overrides.</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-html-doctype <span class="org-string">"html5"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-html-head <span class="org-string">"&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"init.css\" /&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-html-htmlize-output-type <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">css</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-interactively <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">org-html-export-to-html</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc1d5f26" class="outline-2">
<h2 id="orgc1d5f26"><span class="section-number-2">2</span> Installing locally</h2>
<div class="outline-text-2" id="text-2">
<p>
This repository seeks to be as self-contained as possible. Generally,
you should be able to check out the repository and start using it on
any of Linux, OS X and Windows. To use this repository, you will
require:
</p>
</div>

<div id="outline-container-org9604a18" class="outline-3">
<h3 id="org9604a18"><span class="section-number-3">2.1</span> The Git Repository</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Remove any existing .emacs.d configuration (or move elsewhere):
</p>

<div class="org-src-container">
<pre class="src src-sh">rm -r ~/.emacs.d
</pre>
</div>

<p>
Clone the repo:
</p>

<div class="org-src-container">
<pre class="src src-sh">git clone git://github.com/Wilfred/.emacs.d.git
</pre>
</div>
</div>
</div>

<div id="outline-container-org9a5a1cd" class="outline-3">
<h3 id="org9a5a1cd"><span class="section-number-3">2.2</span> Emacs 25</h3>
<div class="outline-text-3" id="text-2-2">
<p>
I use this repository with Emacs 25. Older Emacsen are used
occasionally, but will probably have bugs.
</p>
</div>
</div>

<div id="outline-container-orgd372c10" class="outline-3">
<h3 id="orgd372c10"><span class="section-number-3">2.3</span> Python</h3>
<div class="outline-text-3" id="text-2-3">
<p>
I use pyflakes, which is available on PyPI. You can install it with:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo pip install pyflakes
</pre>
</div>
</div>
</div>

<div id="outline-container-orgecf34e0" class="outline-3">
<h3 id="orgecf34e0"><span class="section-number-3">2.4</span> Less</h3>
<div class="outline-text-3" id="text-2-4">
<p>
I use lessc to check the syntax of <code>.less</code> files. You can install it
with:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo npm install -g less
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org295fda4" class="outline-2">
<h2 id="org295fda4"><span class="section-number-2">3</span> Contents</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-orga3080fa" class="outline-3">
<h3 id="orga3080fa"><span class="section-number-3">3.1</span> Folder Structure</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Code I've written lives in user-lisp. This includes packages that I
haven't polished enough to release yet, small convenience functions,
and package customisations.
</p>

<p>
Interactive commands, configuration and keybindings are kept in files
named <code>FOO-customisations.el</code>. Elisp convenience functions are kept in
files named <code>FOO-utils.el</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">load-path</span> <span class="org-string">"~/.emacs.d/user-lisp/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Since init.el is generated from init.org, I don't want customize
writing to init.org. Define a separate file for customized variables
and faces:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> custom-file <span class="org-string">"~/.emacs.d/user-lisp/customized.el"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>load custom-file<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Code that I haven't written lives in third-party-lisp. This directory
should ultimately disappear once all these packages live in <a href="http://melpa.milkbox.net/">MELPA</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">load-path</span> <span class="org-string">"~/.emacs.d/third-party-lisp/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc48aeb8" class="outline-3">
<h3 id="orgc48aeb8"><span class="section-number-3">3.2</span> Packages</h3>
<div class="outline-text-3" id="text-3-2">
<p>
I use ELPA packages heavily for functionality, primarily the MELPA
repository. We initalize all the packages here, so we can use them
later.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">package</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> package-archives
      <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gnu"</span> . <span class="org-string">"https://elpa.gnu.org/packages/"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"melpa"</span> . <span class="org-string">"https://melpa.org/packages/"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"org"</span> . <span class="org-string">"http://orgmode.org/elpa/"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>package-initialize<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4b43074" class="outline-3">
<h3 id="org4b43074"><span class="section-number-3">3.3</span> UI</h3>
<div class="outline-text-3" id="text-3-3">
</div><div id="outline-container-orgbec2014" class="outline-4">
<h4 id="orgbec2014"><span class="section-number-4">3.3.1</span> Theme</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
I like the tangotango theme. It has very contrasting colours and uses
bold faces for definitions. It also has good support for a range of
popular packages.
</p>

<p>
TODO: I would also prefer zig-zag underlines for flycheck.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>load-theme <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">tangotango</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a85fff" class="outline-4">
<h4 id="org3a85fff"><span class="section-number-4">3.3.2</span> Visibility of UI Elements</h4>
<div class="outline-text-4" id="text-3-3-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">hide toolbar and scrollbar</span>
<span class="org-rainbow-delimiters-depth-1">(</span>tool-bar-mode 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>scroll-bar-mode 0<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">show x-position (ie column number) for point in buffer</span>
<span class="org-rainbow-delimiters-depth-1">(</span>column-number-mode 1<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org89b4672" class="outline-4">
<h4 id="org89b4672"><span class="section-number-4">3.3.3</span> Recursive Editing</h4>
<div class="outline-text-4" id="text-3-3-3">
<p>
We can make the minibuffer much more useful by enabling recursive
usage. This means that when the minibuffer is active we can still call
commands that require the minibuffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> enable-recursive-minibuffers t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
It's easy to lose track of whether we're in a recursive minibuffer or
not. We display the recursion level in the minibuffer to avoid confusion.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>minibuffer-depth-indicate-mode 1<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Occasionally, you end up with an active minibuffer that you didn't
want. ESC ESC ESC will close the minibuffer.
</p>
</div>
</div>
</div>

<div id="outline-container-org19583c3" class="outline-3">
<h3 id="org19583c3"><span class="section-number-3">3.4</span> Moving Around</h3>
<div class="outline-text-3" id="text-3-4">
<p>
C-v and M-v don't undo each other, because the point position isn't
preservered. Fix that.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> scroll-preserve-screen-position <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">always</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-orga9ec45d" class="outline-4">
<h4 id="orga9ec45d"><span class="section-number-4">3.4.1</span> By Symbol</h4>
<div class="outline-text-4" id="text-3-4-1">
<p>
It's extremely useful to be able to move between different occurrences
of the same symbol.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key prog-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-n"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">highlight-symbol-next</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key prog-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-p"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">highlight-symbol-prev</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Whilst YAML isn't a programming language, it's useful to move by</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">symbol here too.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">yaml-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key yaml-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-n"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">highlight-symbol-next</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key yaml-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-p"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">highlight-symbol-prev</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Jumping to the first occurrence of the symbol is handy for finding
where a symbol was imported.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">highlight-symbol-first</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Jump to the first location of symbol at point."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>push-mark<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>eval
   <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>case-fold-search nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>search-forward-regexp
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">rx</span> symbol-start ,<span class="org-rainbow-delimiters-depth-7">(</span>thing-at-point <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">symbol</span><span class="org-rainbow-delimiters-depth-7">)</span> symbol-end<span class="org-rainbow-delimiters-depth-6">)</span>
         nil t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>beginning-of-thing <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">symbol</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key prog-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-P"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">highlight-symbol-first</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
More rarely, it's useful to be able to jump to the last occurrence of
a symbol.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">highlight-symbol-last</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Jump to the last location of symbol at point."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>push-mark<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>eval
   <span class="org-highlight-quoted-quote">`</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-max<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>case-fold-search nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>search-backward-regexp
         <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">rx</span> symbol-start ,<span class="org-rainbow-delimiters-depth-7">(</span>thing-at-point <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">symbol</span><span class="org-rainbow-delimiters-depth-7">)</span> symbol-end<span class="org-rainbow-delimiters-depth-6">)</span>
         nil t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-N"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">highlight-symbol-last</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e68e2e" class="outline-4">
<h4 id="org1e68e2e"><span class="section-number-4">3.4.2</span> By indentation</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
<a href="(describe-key%20(kbd%20"C-a"))">C-a</a> normally moves us to the beginning of the line unconditionally
with <a href="(describe-function%20#'move-beginning-of-line)">move-beginning-of-line</a>. This version is more useful, as it moves
to the first non-whitespace character if we're already at the
beginning of the line. Repeated use of <code>C-a</code> toggles between these two
positions.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">beginning-of-line-dwim</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Toggles between moving point to the first non-whitespace character, and</span>
<span class="org-doc">the start of the line."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>start-position <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Move to the first non-whitespace character.</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>back-to-indentation<span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">If we haven't moved position, go to start of the line.</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>= <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span> start-position<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>move-beginning-of-line nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-a"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">beginning-of-line-dwim</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ec6e51" class="outline-4">
<h4 id="org7ec6e51"><span class="section-number-4">3.4.3</span> By Character</h4>
<div class="outline-text-4" id="text-3-4-3">
<p>
Vim has a handy command where you can type <code>f</code> to jump to the next
occurrence of a character on a line.
</p>

<p>
We can do this with <code>jump-char</code> without the constraint that the
character must be on the current line. This command needs to be
accessible with a short shortcut, so we use <code>M-m</code>. <code>M-m</code> is bound to
<code>back-to-indentation</code> by default, but our <code>C-a</code> behaviour makes it
redundant.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">jump-char</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-m"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">jump-char-forward</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-M"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">jump-char-backward</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbedd3a1" class="outline-4">
<h4 id="orgbedd3a1"><span class="section-number-4">3.4.4</span> Measuring Movement</h4>
<div class="outline-text-4" id="text-3-4-4">
<p>
Since movement commands tend to be used more than any others, it's
useful to measure how much we use each command. This enables us to
look at frequent commands to see if we need to create custom commands
or different keybindings for common commands.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>keyfreq-mode 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>keyfreq-autosave-mode 1<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2da079c" class="outline-3">
<h3 id="org2da079c"><span class="section-number-3">3.5</span> Inserting</h3>
<div class="outline-text-3" id="text-3-5">
<p>
It's often useful to start a new line of code that's above or below
the current line. This code is based on
<a href="http://emacsredux.com/blog/2013/03/26/smarter-open-line/">http://emacsredux.com/blog/2013/03/26/smarter-open-line/</a> .
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">crux</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-o"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">crux-smart-open-line</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-O"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">crux-smart-open-line-above</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b5a39e" class="outline-3">
<h3 id="org1b5a39e"><span class="section-number-3">3.6</span> Killing</h3>
<div class="outline-text-3" id="text-3-6">
<p>
It's handy to also delete the trailing newline when using <a href="(describe-key%20(kbd%20"C-k"))">C-k</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">kill-line</span> <span class="org-rainbow-delimiters-depth-2">(</span>around kill-line-remove-newline activate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>kill-whole-line t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    ad-do-it<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I sometimes want to simply delete a region, rather than
saving it to the kill-ring. I've added a function that allows me to
type <code>C-u C-w</code> to delete the region, whilst <code>C-w</code> works as normal.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">kill-or-delete-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>beg end prefix<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Delete the region, storing it in the kill-ring.</span>
<span class="org-doc">If a prefix argument is given, don't change the kill-ring."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"r\nP"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> prefix
      <span class="org-rainbow-delimiters-depth-3">(</span>delete-region beg end<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>kill-region beg end<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-w"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">kill-or-delete-region</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7939485" class="outline-3">
<h3 id="org7939485"><span class="section-number-3">3.7</span> Modifying and Editing</h3>
<div class="outline-text-3" id="text-3-7">
<p>
Modifying text is fundamental to Emacs, and I use many utilites to
make life easier. Most of these are still in user-lisp/editing-customisations.el.
</p>
</div>

<div id="outline-container-org2e830ff" class="outline-4">
<h4 id="org2e830ff"><span class="section-number-4">3.7.1</span> Matched Pairs</h4>
<div class="outline-text-4" id="text-3-7-1">
<p>
Smartparens is an excellent way of editing pairs of brackets, quotes
etc. It's similar to paredit, but can be used in lisp, other
programming languages and even HTML.
</p>

<p>
Currently, I only use a few smartparens commands, using the same
keybindings as the equivalent paredit commands. You can view a list of all smartparens
commands with the command <code>sp-cheat-sheet</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">smartparens</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">(foo bar) -&gt; foo bar</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-s"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">sp-splice-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">(foo bar) -&gt; [foo bar]</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-S"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">sp-rewrap-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">(|foo) bar -&gt; (|foo bar)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;C-right&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">sp-slurp-hybrid-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">(|foo bar) -&gt; (|foo) bar</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;C-left&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">sp-forward-barf-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">foo(1, |[2, 3], 4) -&gt; foo(1, |, 2)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-M-k"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">sp-kill-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"s-k"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">sp-kill-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/smartparens-wrap-round</span> <span class="org-rainbow-delimiters-depth-2">(</span>arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Smartparens equivalent of `</span><span class="org-doc"><span class="org-constant">paredit-wrap-round</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-wrap-with-pair <span class="org-string">"("</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-("</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">wh/smartparens-wrap-round</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/smartparens-wrap-square-bracket</span> <span class="org-rainbow-delimiters-depth-2">(</span>arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"[] equivalent of `</span><span class="org-doc"><span class="org-constant">wh/smartparens-wrap-round</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-wrap-with-pair <span class="org-string">"["</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-["</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">wh/smartparens-wrap-square-bracket</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/smartparens-wrap-curly-paren</span> <span class="org-rainbow-delimiters-depth-2">(</span>arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"{} equivalent of `</span><span class="org-doc"><span class="org-constant">wh/smartparens-wrap-round</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-wrap-with-pair <span class="org-string">"{"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-{"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">wh/smartparens-wrap-curly-paren</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/smartparens-wrap-singlequote</span> <span class="org-rainbow-delimiters-depth-2">(</span>arg<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"As `</span><span class="org-doc"><span class="org-constant">wh/smartparens-wrap-round</span></span><span class="org-doc">' but for wrapping with single quotes."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-wrap-with-pair <span class="org-string">"'"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-'"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">wh/smartparens-wrap-singlequote</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Many useful smartparens have a <code>C-M-</code> prefix, which I find difficult
to type. I use super (usually the windows key) keybindings too (so
<code>C-M-f</code> becomes <code>s-f</code> and so on).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"s-f"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">sp-forward-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"s-b"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">sp-backward-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key smartparens-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"s-u"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">sp-backward-up-sexp</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I like to use smartparens in all programming modes.
</p>

<p>
Smartparens strict mode ensures parens always stay balanced when
editing. For example, given code of the form <code>foo(1, |bar())</code>, C-k
produces <code>foo(1, |)</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">smartparens-config</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">smartparens-html</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">prog-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">smartparens-strict-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Outside of programming, strict mode is more easily confused, so I
prefer normal smartparens-mode.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">yaml-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">smartparens-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">sqlplus-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">smartparens-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org73cf68c" class="outline-3">
<h3 id="org73cf68c"><span class="section-number-3">3.8</span> Files</h3>
<div class="outline-text-3" id="text-3-8">
</div><div id="outline-container-org3bfc7a5" class="outline-4">
<h4 id="org3bfc7a5"><span class="section-number-4">3.8.1</span> Opening</h4>
<div class="outline-text-4" id="text-3-8-1">
<p>
It's useful to be able to quickly open files that we opened before. We
load and configure a function for this:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">recentf</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">offer recently accessed files from the menu</span>
<span class="org-rainbow-delimiters-depth-1">(</span>recentf-mode t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">remember this many files</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> recentf-max-saved-items 500<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">from http://www.masteringemacs.org/article/find-files-faster-recent-files-package</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">crux</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
We bind this to <code>C-x C-r</code> (mnemonic: recent). By default, <code>C-x C-r</code> is bound to
<code>find-file-read-only</code>, which isn't very useful. (You can set any file
as read only with <code>read-only-mode</code>, mapped to <code>C-x C-q</code>.)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-x C-r"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">crux-recentf-ido-find-file</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Most of the time though, it's helpful to be able to pick a file in the
same source code repository as the current buffer. There are several
tools to do this. I've played with <code>find-file-in-repository</code>,
<code>projectile</code> and <code>find-file-in-project</code>.
</p>

<p>
<code>find-file-in-project</code> seems unmaintained. <code>find-file-in-repository</code>
is fast and works well, but is only lightly maintained and doesn't
support some version control systems. <code>projectile</code> is fast enough,
actively maintained and featureful.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">projectile</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>projectile-global-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
We bind <code>projectile-find-file</code> to <code>C-x C-g</code>, as we use it
a lot and it's right next to <code>C-x C-f</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-x C-g"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">projectile-find-file</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org695994f" class="outline-4">
<h4 id="org695994f"><span class="section-number-4">3.8.2</span> Dired</h4>
<div class="outline-text-4" id="text-3-8-2">
<p>
Dired isn't very colourful by default, but <code>dired+</code> has helpful
highlighting.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dired+</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> diredp-hide-details-initially-flag nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga77495a" class="outline-4">
<h4 id="orga77495a"><span class="section-number-4">3.8.3</span> Deleting and Backups</h4>
<div class="outline-text-4" id="text-3-8-3">
<p>
When we delete a file, it should go to the recycle bin rather than
just acting like <a href="rm">rm</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> delete-by-moving-to-trash t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Emacs' backup behaviour is helpful, so we increase the number of
backups. However, rather than writing <code>foo~1~</code> files everywhere, we
store all our backups in <code>~/.saves</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span>
   backup-by-copying t      <span class="org-comment-delimiter">; </span><span class="org-comment">don't clobber symlinks</span>
   backup-directory-alist
    <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"."</span> . <span class="org-string">"~/.saves"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>    <span class="org-comment-delimiter">; </span><span class="org-comment">don't litter my fs tree</span>
   delete-old-versions t
   kept-new-versions 6
   kept-old-versions 2
   version-control t<span class="org-rainbow-delimiters-depth-1">)</span>       <span class="org-comment-delimiter">; </span><span class="org-comment">use versioned backups</span>
</pre>
</div>

<p>
However, Emacs isn't aggressive enough with backups. We use
<code>backup-each-save</code> to ensure we have a copy of state of every file
we've modified.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">backup-each-save</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">after-save-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">backup-each-save</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7e8d636" class="outline-4">
<h4 id="org7e8d636"><span class="section-number-4">3.8.4</span> Scratch Files</h4>
<div class="outline-text-4" id="text-3-8-4">
<p>
It's often useful to create a throwaway file to write a minimal
testcase for some language or library feature.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">start--file</span> <span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a file at PATH, creating any containing directories as necessary.</span>
<span class="org-doc">Visit the file after creation."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>make-directory <span class="org-rainbow-delimiters-depth-3">(</span>file-name-directory path<span class="org-rainbow-delimiters-depth-3">)</span> t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>find-file path<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/start-scratch-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>file-name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a file in ~/scratch for the given file name."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"sName of scratch file: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>start--file <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"~/scratch/%s"</span> file-name<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/start-tmp-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>file-name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a file in /tmp for the given file name."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"sName of temporary file: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>start--file <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"/tmp/%s"</span> file-name<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
It's also useful to quickly generate a minimal HTML page to play with.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/start-scratch-html-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>file-name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a test HTML file in ~/scratch to play around with."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"sName of scratch HTML file: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>wh/start-scratch-file file-name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>erase-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>insert <span class="org-string">"&lt;!DOCTYPE html&gt;</span>
<span class="org-string">&lt;html&gt;</span>
<span class="org-string">    &lt;head&gt;</span>
<span class="org-string">        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;</span>
<span class="org-string">        &lt;title&gt;</span>
<span class="org-string">        &lt;/title&gt;</span>
<span class="org-string">        &lt;style type=\"text/css\"&gt;</span>
<span class="org-string">        &lt;/style&gt;</span>
<span class="org-string">    &lt;/head&gt;</span>
<span class="org-string">    &lt;body&gt;</span>

<span class="org-string">    &lt;/body&gt;</span>
<span class="org-string">&lt;/html&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>forward-line -2<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>move-end-of-line nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5639ced" class="outline-3">
<h3 id="org5639ced"><span class="section-number-3">3.9</span> As-you-type Checks</h3>
<div class="outline-text-3" id="text-3-9">
</div><div id="outline-container-org001c6b1" class="outline-4">
<h4 id="org001c6b1"><span class="section-number-4">3.9.1</span> Flymake</h4>
<div class="outline-text-4" id="text-3-9-1">
<p>
(Note that there's language-specific flymake configuration too.)
</p>

<p>
It's really useful to be able to move between flymake errors, so we
bind <code>F8</code> and <code>F9</code> for this. Since there's a gap between these two
keys, they're easy to find.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">flymake</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;f8&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flymake-goto-prev-error</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;f9&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flymake-goto-next-error</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
When the cursor (point) is on a line, we want to show the error on
that line in the minibuffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">flymake-error-at-point</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Show the flymake error in the minibuffer when point is on an invalid line."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>get-char-property <span class="org-rainbow-delimiters-depth-4">(</span>point<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flymake-overlay</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>help <span class="org-rainbow-delimiters-depth-6">(</span>get-char-property <span class="org-rainbow-delimiters-depth-7">(</span>point<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">help-echo</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> help <span class="org-rainbow-delimiters-depth-5">(</span>message <span class="org-string">"%s"</span> help<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">post-command-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flymake-error-at-point</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I prefer my errors underlined.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>custom-set-faces
 <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>flymake-errline <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>class color<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:underline</span> <span class="org-string">"Red"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>flymake-warnline <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>class color<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:underline</span> <span class="org-string">"Orange"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d4290c" class="outline-4">
<h4 id="org4d4290c"><span class="section-number-4">3.9.2</span> Flycheck</h4>
<div class="outline-text-4" id="text-3-9-2">
<p>
Flycheck is an excellent on-the-fly checker that provides many
additional features and languages. Flymake is part of stock Emacs,
flycheck is third-party.
</p>

<p>
Flycheck can be quite slow with a large number of errors. We reduce
how often we run it. We also change the highlighting to simply
highlight the whole line, as it's much faster. See
<a href="https://github.com/lunaryorn/flycheck/issues/153#issuecomment-19450255">flycheck issue #53</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> flycheck-highlighting-mode <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">lines</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Style flycheck errors consistently with flymake.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>custom-set-faces
 <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>flycheck-error <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>class color<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:underline</span> <span class="org-string">"Red"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>flycheck-warning <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>class color<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:underline</span> <span class="org-string">"Orange"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
We use the same movement keys for flycheck as we do for flymake.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">flycheck</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key flycheck-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;f8&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flycheck-previous-error</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key flycheck-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;f9&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flycheck-next-error</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
flycheck also provides a great overview buffer, but it's usually bound
to <code>C-c ! f</code>. This is tricky to type, so we use our own keybinding.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key flycheck-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c f"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">flycheck-list-errors</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>flycheck-next-error</code> doesn't push the mark, so we can't use
<code>pop-mark</code> to go back to our previous position. We define and activate
advice to fix that.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">flycheck-next-error</span> <span class="org-rainbow-delimiters-depth-2">(</span>before wh/flycheck-next-error-push-mark activate<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>push-mark<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Since I like using the minibuffer for eldoc, showing flycheck errors
in the minibuffer just causes it to jump around. I've played with
flycheck-pos-tip, but I find the popup hides code, or covers company
popups.
</p>

<p>
Instead, I show the flycheck error in the title bar of the window if
there's an error at point.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-eval-after-load</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flycheck</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-title-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd100f5d" class="outline-3">
<h3 id="orgd100f5d"><span class="section-number-3">3.10</span> Undoing</h3>
<div class="outline-text-3" id="text-3-10">
<p>
Emacs' undo facility is excellent, but undo-tree is even better.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">undo-tree</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-undo-tree-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Rather than just showing 'o' for edits, show a relative timestamp for
when the edit occurred.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> undo-tree-visualizer-timestamps t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Since we're using it the whole time, it's not very informative to show
it on the mode line. Hide it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">diminish</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>diminish <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">undo-tree-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ac3bee" class="outline-3">
<h3 id="org9ac3bee"><span class="section-number-3">3.11</span> Emacs Lisp</h3>
<div class="outline-text-3" id="text-3-11">
</div><div id="outline-container-orgc3507b7" class="outline-4">
<h4 id="orgc3507b7"><span class="section-number-4">3.11.1</span> Shortcuts</h4>
<div class="outline-text-4" id="text-3-11-1">
<p>
<code>eval-defun</code> is bound to <code>C-M-x</code>, but Gnome doesn't allow Emacs to
receive that key sequence. When writing elisp, it's very useful, so we
bind it to a convenient keybinding.
</p>

<p>
<code>edebug-eval-defun</code> is even more powerful. It ensures that <code>defvar</code>
and <code>defcustom</code> are re-evaluated, so they're reset to their initial
values. It can even mark a function for edebug, if it's called with a
prefix.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">edebug</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key emacs-lisp-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c e"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">edebug-eval-defun</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Similarly, toggle-debug-on-error is something I call a lot when
developing, and it doesn't have have any keybinding.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key emacs-lisp-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c d"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">toggle-debug-on-error</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
When writing and debugging macros, it's really important to be able
to see what they expand to. Macrostep allows us to incrementally
expand the macros in our elisp file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-key emacs-lisp-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c m"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">macrostep-expand</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org651afca" class="outline-4">
<h4 id="org651afca"><span class="section-number-4">3.11.2</span> Editing Parentheses</h4>
<div class="outline-text-4" id="text-3-11-2">
<p>
Paredit make editing code with parentheses wonderful and has been the
gold standard for lisp coding for some time. Smartparens has recently
gained popularity as an paredit alternative, but I haven't invested
the time to set it up for lisp yet.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">emacs-lisp-mode-hook</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span>paredit-mode 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbeb3094" class="outline-4">
<h4 id="orgbeb3094"><span class="section-number-4">3.11.3</span> Highlighting Parentheses</h4>
<div class="outline-text-4" id="text-3-11-3">
<p>
We colour each pair of parentheses according to their depth. This is
useful for seeing similarly nested lines, such as conditions in a
cond expression.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">emacs-lisp-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Our theme (tangotango) only provides colours for the first few nesting
levels before repeating. We override the face colours so we have
unique colours until we're seven levels deep.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">rainbow-delimiters</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-1-face</span> <span class="org-string">"white"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-2-face</span> <span class="org-string">"cyan"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-3-face</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-4-face</span> <span class="org-string">"green"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-5-face</span> <span class="org-string">"orange"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-6-face</span> <span class="org-string">"purple"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-7-face</span> <span class="org-string">"white"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-8-face</span> <span class="org-string">"cyan"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-depth-9-face</span> <span class="org-string">"yellow"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-delimiters-unmatched-face</span> <span class="org-string">"red"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga18e5e3" class="outline-4">
<h4 id="orga18e5e3"><span class="section-number-4">3.11.4</span> Function Signatures</h4>
<div class="outline-text-4" id="text-3-11-4">
<p>
We use eldoc to show the signature of the function at point in the
minibuffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">emacs-lisp-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">eldoc-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
We don't want this minor mode to be shown in the minibuffer, however.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">diminish</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">eldoc</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>diminish <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">eldoc-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a98b11" class="outline-4">
<h4 id="org0a98b11"><span class="section-number-4">3.11.5</span> On-the-fly Checking</h4>
<div class="outline-text-4" id="text-3-11-5">
<p>
It's really useful to use flycheck when coding elisp. It detects
mistyped variables, deprecated functions (everything that
byte-compilation checks).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">emacs-lisp-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flycheck-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
By default, flycheck also runs checkdoc on elisp code. This gets in
the way for quick throwaway elisp scripts, so we switch off checkdoc.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">flycheck</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> flycheck-checkers <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">--remove</span> <span class="org-rainbow-delimiters-depth-3">(</span>eq <span class="org-variable-name">it</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">emacs-lisp-checkdoc</span><span class="org-rainbow-delimiters-depth-3">)</span> flycheck-checkers<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org64fba89" class="outline-4">
<h4 id="org64fba89"><span class="section-number-4">3.11.6</span> Highlighting</h4>
<div class="outline-text-4" id="text-3-11-6">
<p>
Emacs lisp highlighting works pretty well out of the box. However,
dash.el provides addition highlighting for its functions and variables
used in its anaphoric macros (e.g. <code>it</code>).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>eval-after-load <span class="org-string">"dash"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>dash-enable-font-lock<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1e73091" class="outline-3">
<h3 id="org1e73091"><span class="section-number-3">3.12</span> Languages</h3>
<div class="outline-text-3" id="text-3-12">
</div><div id="outline-container-org92c707f" class="outline-4">
<h4 id="org92c707f"><span class="section-number-4">3.12.1</span> prog-mode</h4>
<div class="outline-text-4" id="text-3-12-1">
<p>
Modes derived from <code>cc-mode</code> (e.g. <code>c-mode</code>, <code>c++-mode</code>, <code>java-mode</code>) don't
derive from prog-mode. This means that keybindings in <code>prog-mode-map</code>
don't apply.
</p>

<p>
This has been fixed in Emacs 26 (bug #26658), but patch in the
meantime.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>eval-after-load <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">cc-mode</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>set-keymap-parent c-mode-base-map prog-mode-map<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org99899cb" class="outline-4">
<h4 id="org99899cb"><span class="section-number-4">3.12.2</span> Python</h4>
<div class="outline-text-4" id="text-3-12-2">
<p>
We use flake8 with flycheck to check for coding errors. Since flake8
includes pep8 style checks, we use a <a href="https://github.com/Wilfred/dotfiles/blob/master/.config/flake8">whitelist of coding errors</a> to
ignore style checks.
</p>

<p>
Flycheck includes other Python checkers so we also disable those.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">python-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flycheck-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">python-mode-hook</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span>
            <span class="org-rainbow-delimiters-depth-3">(</span>add-to-list <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flycheck-disabled-checkers</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">python-pylint</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I often write triple-quoted docstrings, so it's convenient to have a
shortcut for inserting them.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">python</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">python-insert-docstring</span>
  <span class="org-doc">"Insert a Python docstring."</span>
  <span class="org-string">"This string is ignored!"</span>
  <span class="org-string">"\"\"\""</span> - <span class="org-string">"\n\n    \"\"\""</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key python-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c s"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">python-insert-docstring</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7eb0bc7" class="outline-4">
<h4 id="org7eb0bc7"><span class="section-number-4">3.12.3</span> Haskell</h4>
<div class="outline-text-4" id="text-3-12-3">
<p>
Flycheck supports Haskell well, so we switch it on inside Haskell
buffers.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">haskell-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flycheck-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Tab doesn't indent in haskell-mode by default, so we enable
indentation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">haskell-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">turn-on-haskell-indentation</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org26251b2" class="outline-4">
<h4 id="org26251b2"><span class="section-number-4">3.12.4</span> Ruby</h4>
<div class="outline-text-4" id="text-3-12-4">
<p>
Vagrant files are Ruby, so use Ruby syntax highlighting for them.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">auto-mode-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Vagrantfile"</span> . ruby-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb44fef" class="outline-4">
<h4 id="orgeb44fef"><span class="section-number-4">3.12.5</span> C/C++</h4>
<div class="outline-text-4" id="text-3-12-5">
<p>
Flycheck supports C, so we switch it on.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">c-mode-common-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">flycheck-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Always indent with 4 spaces, in the Linux kernel style.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> c-default-style <span class="org-string">"linux"</span>
              c-basic-offset 4<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Hungry delete is useful in C (i.e. remove up to the next
non-whitespace character on C-d) when removing indentation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> c-hungry-delete-key t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0c6fd91" class="outline-4">
<h4 id="org0c6fd91"><span class="section-number-4">3.12.6</span> HTML</h4>
<div class="outline-text-4" id="text-3-12-6">
<p>
I like to indent my HTML with tabs (company policy at the first web
shop I worked at).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">sgml-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">; </span><span class="org-comment">indent html with tabs only</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html-mode-hook</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">function</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> sgml-basic-offset 4<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Automatically close &lt; and " character inside HTML using smartparens.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">smartparens-config</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">smartparens-strict-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Much of my HTML is for Django templates. These sometimes have .dtml
filenames, so use html-mode for those files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">auto-mode-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.dtml$"</span> . html-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
We want syntax highlighting for Django template syntax, so add extra
font faces and use them if we see Django syntax.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Define coloured faces for Django syntax.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">django-tag-face</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-face <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">django-tag-face</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">django-tag-face</span> <span class="org-string">"Orange"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">django-variable-face</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-face <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">django-variable-face</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">django-variable-face</span> <span class="org-string">"Green"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">django-comment-face</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-face <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">django-comment-face</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-face-foreground <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">django-comment-face</span> <span class="org-string">"Gray"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Use these faces for Django syntax.  </span>
<span class="org-rainbow-delimiters-depth-1">(</span>font-lock-add-keywords
 <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">html-mode</span>
 <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">{%[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">%]*%}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> 1 django-tag-face prepend<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">{{[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">}]*}}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> 1 django-variable-face prepend<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">{#[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">}]*#}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> 1 django-comment-face prepend<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">{% comment %}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span>
<span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">*{% endcomment %}</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span> 1 django-comment-face prepend<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
TODO: document the rest of our HTML configuration.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">; </span><span class="org-comment">skeletons for Django template tags</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">template-tag-skeleton</span>
  <span class="org-doc">"Insert a {% foo %} template tag"</span>
  <span class="org-string">"Template tag name: "</span>
  <span class="org-string">"{% "</span> str <span class="org-string">" %}"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">template-variable-skeleton</span>
  <span class="org-doc">"Insert a {{ foo }} template variable"</span>
  <span class="org-string">"Template variable: "</span>
  <span class="org-string">"{{ "</span> str <span class="org-string">" }}"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">template-comment-skeleton</span>
  <span class="org-doc">"Insert a {# foo #} template variable"</span>
  <span class="org-string">"Comment: "</span>
  <span class="org-string">"{# "</span> str <span class="org-string">" #}"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">template-block-skeleton</span>
  <span class="org-doc">"Insert {% block foo %}{% endblock %}"</span>
  <span class="org-string">"Block name: "</span>
  <span class="org-string">"{% block "</span> str <span class="org-string">" %}\n"</span> - <span class="org-string">"\n{% endblock %}"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">template-if-else-skeleton</span>
  <span class="org-doc">"Insert {% if foo %}{% else %}{% endif %}"</span>
  <span class="org-string">"If condition: "</span>
  <span class="org-string">"{% if "</span> str <span class="org-string">" %}\n"</span> - <span class="org-string">"\n{% else %}\n\n{% endif %}"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">template-if-skeleton</span>
  <span class="org-doc">"Insert {% if foo %}{% endif %}"</span>
  <span class="org-string">"If condition: "</span>
  <span class="org-string">"{% if "</span> str <span class="org-string">" %}"</span> - <span class="org-string">"{% endif %}"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-skeleton</span> <span class="org-function-name">underscore-skeleton</span>
  <span class="org-doc">"Insert &lt;%= foo %&gt;"</span>
  <span class="org-string">"Contents: "</span>
  <span class="org-string">"&lt;%= "</span> str <span class="org-string">" %&gt;"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">template-skeletons</span>
  <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span>template-tag-skeleton
    template-variable-skeleton
    template-comment-skeleton
    template-block-skeleton
    template-if-skeleton
    template-if-else-skeleton
    underscore-skeleton<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">insert-django-skeleton</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>skeleton-names <span class="org-rainbow-delimiters-depth-5">(</span>mapcar <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">symbol-name</span> template-skeletons<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>skeleton-chosen <span class="org-rainbow-delimiters-depth-5">(</span>ido-completing-read <span class="org-string">"HTML skeleton: "</span> skeleton-names<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>funcall <span class="org-rainbow-delimiters-depth-4">(</span>intern skeleton-chosen<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key html-mode-map <span class="org-string">"\C-ct"</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">insert-django-skeleton</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">visit-parent-django-template</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"In a buffer containg {% extends \"foo.html\" %}, visit foo.html."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>start-pos end-pos template-name<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>widen<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">Find the extends tag</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>not <span class="org-rainbow-delimiters-depth-6">(</span>looking-at <span class="org-string">"{% ?extends"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>forward-char 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">Find the opening " of the file name.</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>not <span class="org-rainbow-delimiters-depth-6">(</span>looking-at <span class="org-string">"\""</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>forward-char 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>forward-char<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> start-pos <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>

      <span class="org-comment-delimiter">;; </span><span class="org-comment">Find the closing "</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>not <span class="org-rainbow-delimiters-depth-6">(</span>looking-at <span class="org-string">"\""</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>forward-char 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> end-pos <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>

      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> template-name <span class="org-rainbow-delimiters-depth-5">(</span>buffer-substring-no-properties start-pos end-pos<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Open this file, assuming it's in the same directory.</span>
    <span class="org-comment-delimiter">;; </span><span class="org-fic">TODO</span><span class="org-comment">: Search the current VCS checkout for it.</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file template-name<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">html-linkify-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>url<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Wraps the region in an &lt;a&gt; tag with href set to URL."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"sURL: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>initial-cursor-position <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>beginning <span class="org-rainbow-delimiters-depth-5">(</span>region-beginning<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>end <span class="org-rainbow-delimiters-depth-5">(</span>region-end<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>first-replacement <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">"&lt;a href=\""</span> url <span class="org-string">"\"&gt;"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>second-replacement <span class="org-string">"&lt;/a&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>goto-char beginning<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>insert first-replacement<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>+ end <span class="org-rainbow-delimiters-depth-5">(</span>length first-replacement<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>insert second-replacement<span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>+ initial-cursor-position <span class="org-rainbow-delimiters-depth-5">(</span>length first-replacement<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
  <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">; </span><span class="org-comment">zen coding: converts selector-style lines to tags</span>
<span class="org-comment-delimiter">; </span><span class="org-comment">e.g. table&gt;tr*2 becomes &lt;table&gt;&lt;tr&gt;&lt;/tr&gt;&lt;tr&gt;&lt;/tr&gt;&lt;/table&gt;</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">zencoding-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">sgml-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">zencoding-mode</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">Auto-start on any markup modes</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9b299a2" class="outline-4">
<h4 id="org9b299a2"><span class="section-number-4">3.12.7</span> CSS</h4>
<div class="outline-text-4" id="text-3-12-7">
<p>
Typically I work on projects that use 4 spaces for CSS indenetation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">css-mode-hook</span>
          <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">function</span>
           <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
             <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
               <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> css-indent-offset 4<span class="org-rainbow-delimiters-depth-5">)</span>
               <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
It's really handy to highlight CSS colour values to show the colour
they represent.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">css-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">rainbow-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Smartparens is well suited to CSS too, to automatically pair up curly
brackets.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">css-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">smartparens-strict-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Highlight symbols, so we can see repeated tag names and classes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">css-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">highlight-symbol-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Company does a great job with completion for CSS, so use it here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">css-mode-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">company-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I often toggle <code>!important</code> when editing, so define a keybinding
for this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">css-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key css-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c i"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">emr-css-toggle-important</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org97713e5" class="outline-4">
<h4 id="org97713e5"><span class="section-number-4">3.12.8</span> Less (CSS)</h4>
<div class="outline-text-4" id="text-3-12-8">
<p>
The less compiler doesn't give much feedback, but it does gives us a
syntax check.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">less-css-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">less-css-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">flymake-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc50289a" class="outline-4">
<h4 id="orgc50289a"><span class="section-number-4">3.12.9</span> Org-mode</h4>
<div class="outline-text-4" id="text-3-12-9">
<p>
We often use code snippets in org-mode files, so syntax highlight
them.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-src-fontify-natively t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8731b98" class="outline-4">
<h4 id="org8731b98"><span class="section-number-4">3.12.10</span> Markdown</h4>
<div class="outline-text-4" id="text-3-12-10">
<p>
Markdown is essentially prose, so it's nice to automatically line-wrap
(by inserting newlines) as we type.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">markdown-mode-hook</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">auto-fill-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0f6ffb3" class="outline-4">
<h4 id="org0f6ffb3"><span class="section-number-4">3.12.11</span> Shell</h4>
<div class="outline-text-4" id="text-3-12-11">
<p>
In OS X, starting Emacs in GUI mode doesn't inherit the shell's
environment. We set up Emacs' exec-path based on PATH in a shell, so
any command we can call from a shell, we can call inside Emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">exec-path-from-shell</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> exec-path-from-shell-check-startup-files nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>exec-path-from-shell-initialize<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org728f6e6" class="outline-3">
<h3 id="org728f6e6"><span class="section-number-3">3.13</span> Performance</h3>
<div class="outline-text-3" id="text-3-13">
<p>
Emacs will run garbage collection after <code>gc-cons-threshold</code> bytes of
consing. The default value is 800,000 bytes, or ~ 0.7 MiB. By
increasing to 10 MiB we reduce the number of pauses due to garbage collection.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> gc-cons-threshold <span class="org-rainbow-delimiters-depth-2">(</span>* 10 1024 1024<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org64350cb" class="outline-3">
<h3 id="org64350cb"><span class="section-number-3">3.14</span> Shut Down</h3>
<div class="outline-text-3" id="text-3-14">
<p>
I rarely close Emacs, but using Zile means I use <code>C-x C-c</code> a lot. It's
annoying to accidentally close Emacs, so warn first.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> confirm-kill-emacs <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">y-or-n-p</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a495f2" class="outline-3">
<h3 id="org0a495f2"><span class="section-number-3">3.15</span> Workarounds</h3>
<div class="outline-text-3" id="text-3-15">
<p>
Don't try to reopen all files that are owned by other users.
<a href="https://github.com/bbatsov/crux/issues/20">https://github.com/bbatsov/crux/issues/20</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>remove-hook <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">find-file-hook</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">crux-reopen-as-root</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga72008f" class="outline-3">
<h3 id="orga72008f"><span class="section-number-3">3.16</span> Undocumented</h3>
<div class="outline-text-3" id="text-3-16">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">ui-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">file-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">movement-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">editing-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">kill-ring-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>eq system-type <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">darwin</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">os-x-fixes</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">minibuffer-completion-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">make re-builder use the same regexp format as regexp-replace (no double escaping)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> reb-re-syntax <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">string</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">treat space charcters as matching space characters, not like PCRE's '\s+'</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> search-whitespace-regexp nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">completion-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">snippet-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">structured-text-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">isearch-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">projectile-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">go-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">c-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">asm-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">coffee-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">javascript-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">lisp-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">makefile-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">python-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">groovy-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">rust-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">llvm-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">sh-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">xml-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">html-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">startup-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">git-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">irc-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">eshell-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">compilation-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">site-customisations</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> ag-highlight-search <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">t</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"&lt;f5&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">ag-project</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">stolen from http://whattheemacsd.com/setup-dired.el-02.html</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">dired-back-to-top</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>beginning-of-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>dired-next-line <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> dired-omit-mode 2 4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key dired-mode-map
  <span class="org-rainbow-delimiters-depth-2">(</span>vector <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">remap</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">beginning-of-buffer</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">dired-back-to-top</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">dired-jump-to-bottom</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>end-of-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>dired-next-line -1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key dired-mode-map
  <span class="org-rainbow-delimiters-depth-2">(</span>vector <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">remap</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">end-of-buffer</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">dired-jump-to-bottom</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">conflicts-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">org-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">tags-customisations</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">blog-utils</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">crontab mode for files named</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">crontab-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">auto-mode-alist</span> <span class="org-highlight-quoted-quote">'</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"crontab.*?\\'"</span> . crontab-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> ring-bell-function <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">ignore</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">suspend seems to crash on Gnome 3, and I don't use it anyway, so just disable it</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> cannot-suspend t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">suspend-emacs</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">suspend-frame</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;rest</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>put <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">narrow-to-region</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">disabled</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">indent-buffer</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Indent the everything in the current buffer."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>indent-region <span class="org-rainbow-delimiters-depth-3">(</span>point-min<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>point-max<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">f</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">s</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">wh/download-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>url directory file-name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Download the file at URL into DIRECTORY.</span>
<span class="org-doc">The FILE-NAME defaults to the one used in the URL."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span>
   <span class="org-comment-delimiter">;; </span><span class="org-comment">We're forced to let-bind url here since we access it before</span>
   <span class="org-comment-delimiter">;; </span><span class="org-comment">interactive binds the function parameters.</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>url <span class="org-rainbow-delimiters-depth-6">(</span>read-from-minibuffer <span class="org-string">"URL: "</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>list
      url
      <span class="org-rainbow-delimiters-depth-5">(</span>read-directory-name <span class="org-string">"Destination dir: "</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">deliberately not using read-file-name since that inludes the directory</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>read-from-minibuffer
       <span class="org-string">"File name: "</span>
       <span class="org-rainbow-delimiters-depth-6">(</span>car <span class="org-rainbow-delimiters-depth-7">(</span>last <span class="org-rainbow-delimiters-depth-8">(</span>s-split <span class="org-string">"/"</span> url<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>destination <span class="org-rainbow-delimiters-depth-5">(</span>f-join directory file-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>url-copy-file url destination <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">t</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file destination<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> dired-listing-switches <span class="org-string">"-alhv"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-anzu-mode +1<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> <span class="org-highlight-quoted-quote">'</span><span class="org-constant">diminish</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>diminish <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">anzu-mode</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>put <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">dired-find-alternate-file</span> <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">disabled</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">There are a few applications, such as crontab, that require a</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">trailing new line. To be safe, always leave a trailing newline.</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> require-final-newline t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">cycle through amounts of spacing</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">http://pragmaticemacs.com/emacs/cycle-spacing/</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-SPC"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-quoted-quote">#'</span><span class="org-highlight-quoted-symbol">cycle-spacing</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">twittering-mode</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't show the twitter client or location, it's just distracting.</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> twittering-status-format <span class="org-string">"%i %s,  %@:\n%FILL[  ]{%T %r%R}\n "</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">font-size-for-demos</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Increase font size everywhere.</span>
<span class="org-doc">Really handy when doing Emacs demos on projectors."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-face-attribute <span class="org-highlight-quoted-quote">'</span><span class="org-highlight-quoted-symbol">default</span> <span class="org-rainbow-delimiters-depth-3">(</span>selected-frame<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-builtin">:height</span> 120<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Wilfred Hughes</p>
<p class="date">Created: 2017-08-07 Mon 14:15</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
